(window["nojMonomainWebpackJsonpproduction"]=window["nojMonomainWebpackJsonpproduction"]||[]).push([[8],{"++M8":function(e,t){},"/ZaN":function(e,t,n){"use strict";var r=n("D57K");var i=n("ERkP");var a=n.n(i);var o=n("+1CV");var s=n("8d7B");var l=n("z/Ec");var u=n("5ZzG");var c=n("ZqiK");var d=n.n(c);var f=["facebook","twitter","google","linkedin-c"];var p=["weibo","wechat","qqzone","douban","linkedin-o"];var m={normal:"normal",china:"china"};var v=function(t){r["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.onClick=function(){return e.props.onClick(e.props.type)};return e}e.prototype.render=function(){return a.a.createElement("div",{className:d.a.root,"data-icon":this.props.type},this.props.link?a.a.createElement("a",{href:this.props.link,target:"_blank",className:d.a.icon,"data-region":this.props.shareRegion,onClick:this.onClick},a.a.createElement(u["a"],{type:this.props.type})):a.a.createElement(u["a"],{type:this.props.type,className:d.a.icon,onClick:this.onClick,"data-region":this.props.shareRegion}))};return e}(a.a.PureComponent);function h(e){var i=[];for(var t=1;t<arguments.length;t++){i[t-1]=arguments[t]}return e.reduce(function(e,t,n){return e+t+encodeURIComponent(i[n]||"")},"")}var g={weibo:function(e){var t=e.link,n=e.title;return h(b||(b=r["__makeTemplateObject"](["https://service.weibo.com/share/share.php?url=","&title=",""],["https://service.weibo.com/share/share.php?url=","&title=",""])),t,n)},qqzone:function(e){var t=e.link,n=e.title,i=e.description;return h(k||(k=r["__makeTemplateObject"](["http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=","&title=","&summary=",""],["http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=","&title=","&summary=",""])),t,n,i)},douban:function(e){var t=e.link,n=e.title,i=e.description;return h(y||(y=r["__makeTemplateObject"](["http://shuo.douban.com/!service/share?href=","&name=","&text=","&starid=0&aid=0&style=11"],["http://shuo.douban.com/!service/share?href=","&name=","&text=","&starid=0&aid=0&style=11"])),t,n,i)},linkedin:function(e){var t=e.link,n=e.title,i=e.description;return h(S||(S=r["__makeTemplateObject"](["http://www.linkedin.com/shareArticle?url=","&title=","&summary=","&mini=true&ro=true&armin=armin"],["http://www.linkedin.com/shareArticle?url=","&title=","&summary=","&mini=true&ro=true&armin=armin"])),t,n,i)},get"linkedin-c"(){return this.linkedin},get"linkedin-o"(){return this.linkedin},facebook:function(e){var t=e.link;return h(E||(E=r["__makeTemplateObject"](["https://www.facebook.com/sharer/sharer.php?u=",""],["https://www.facebook.com/sharer/sharer.php?u=",""])),t)},twitter:function(e){var t=e.link,n=e.title;return h(C||(C=r["__makeTemplateObject"](["https://twitter.com/intent/tweet?text=","&url=",""],["https://twitter.com/intent/tweet?text=","&url=",""])),n,t)},google:function(e){var t=e.link;return h(_||(_=r["__makeTemplateObject"](["https://plus.google.com/share?url=",""],["https://plus.google.com/share?url=",""])),t)}};var b,k,y,S,E,C,_;var w=n("528F");var x=n.n(w);n.d(t,"a",function(){return N});var N=function(e){r["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}Object.defineProperty(t.prototype,"onShareLinkClicked",{get:function(){return this.props.onShareLinkClicked||function(){return undefined}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shareRegion",{get:function(){return this.props.shareRegion||(s["global"].siteRegion==="CN"?"china":"normal")},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"items",{get:function(){var e=this.props.items||(s["global"].siteRegion==="CN"?p:f);return this.props.flatten?e:e.filter(function(e){return e!=="wechat"})},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"link",{get:function(){return this.props.shareConfig&&this.props.shareConfig.link||window.location.href},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){if(this.props.shareConfig&&this.props.shareConfig.title){return this.props.shareConfig.title}var e=document.title;var t=(document.querySelector('meta[property="og:title"]')||{}).content;return(t||e).replace(/^\(\d+\)/,"")},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"description",{get:function(){if(this.props.shareConfig&&this.props.shareConfig.description){return this.props.shareConfig.description}var e=(document.querySelector('meta[property="og:description"]')||{}).content,t=e===void 0?"":e;return t},enumerable:true,configurable:true});t.prototype.renderItem=function(e){var t=g[e];return a.a.createElement(v,{key:e,shareRegion:this.shareRegion,type:this.replaceType(e),link:t?t({link:this.link,title:this.title,description:this.description}):null,onClick:t?this.onShareLinkClicked:function(){return undefined}})};t.prototype.render=function(){var t=this;return a.a.createElement("div",null,a.a.createElement("div",{className:x.a.iconArea},this.items.map(function(e){if(t.props.flatten&&e==="wechat"){return a.a.createElement(l["a"],{content:t.renderWechatQRCode(),key:e,trigger:"click",placement:"bottom"},t.renderItem(e))}return t.renderItem(e)})),s["global"].siteRegion==="CN"&&!this.props.flatten&&this.renderWechatQRCode())};t.prototype.renderWechatQRCode=function(){return a.a.createElement("div",{className:x.a.wechat},a.a.createElement("div",{className:x.a.qrCodeArea},a.a.createElement(o["QRCode"],{value:this.link,level:"Q"}),a.a.createElement("div",{className:x.a.logo},a.a.createElement(u["a"],{type:"wechat"}))),a.a.createElement("p",{className:x.a.tips},"微信扫一扫分享"))};t.prototype.replaceType=function(e){var t={qqzone:"qq",google:"google-plus"};return t[e]||e};t.defaultProps={flatten:true};return t}(a.a.PureComponent)},"/usP":function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n("D57K");var i=n("ERkP");var a=n.n(i);var o=n("DuHN");var s=n("IJu9");var l=n("fQLH");var u=n("U3QC");var c=n("rzNM");var d=n("mhnT");var f=n("q/oC");var p=n("Y7lc");var m=n("w+fZ");var v=n("9Xp4");var h=n("xml1");var g=function(e){r["__extends"](t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;i.state={mutateWithdrawLoading:false};i.withdraw$=new l["a"];i.dispose$=new l["a"];i.postWithdraw$=i.withdraw$.pipe(Object(u["a"])(function(){return i.setState({mutateWithdrawLoading:true})}),Object(c["a"])(function(e){var t=e.reasonId,n=e.reasonText;return Object(p["a"])({mutation:h["a"].flagSetContentStatus,variables:{data:r["__assign"]({resourceId:i.props.resourceId,resourceType:i.props.resourceType,operation:i.props.flagStatus},t?{reasonId:t}:{},n?{description:n}:{})}}).pipe(Object(u["a"])(function(){return i.setState({mutateWithdrawLoading:false})}),Object(u["a"])(function(e){var t=e.data,n=e.errors;if(n){o["a"].error("网络错误: "+n);Object(f["d"])(m["a"]).error("下线请求错误",{errors:n})}else if(t.flagSetContentStatus.error){o["a"].error("下线失败")}else if(t.flagSetContentStatus.ok){o["a"].success("下线成功");i.props.onOk&&i.props.onOk();i.props.onClose&&i.props.onClose()}}),Object(d["a"])(i.dispose$))}));i.componentDidMount=function(){i.postWithdraw$.subscribe()};i.componentWillUnmount=function(){i.withdraw$.complete();i.dispose$.next();i.dispose$.complete()};i.onOk=function(e){i.withdraw$.next(e)};return i}t.prototype.render=function(){return a.a.createElement(v["a"],r["__assign"]({key:this.props.resourceId===null?"":this.props.resourceId},this.props,{onOk:this.onOk,mutateLoading:this.state.mutateWithdrawLoading}))};t.defaultProps={title:"下线"};return t}(a.a.PureComponent)},"1ZoV":function(e,t,n){e.exports=n.p+"17df28f35bfb3292fe5bdd94b81fa456.svg"},"1cOo":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"commentReplyConnection"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentReplyConnection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"commentId"},value:{kind:"Variable",name:{kind:"Name",value:"commentId"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalNum"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"commentFields"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:351}};i.loc.source={body:'#import "../../fragments/comment.graphql"\n\nquery commentReplyConnection($commentId: ID!, $after: String, $first: Int) {\n  commentReplyConnection(commentId: $commentId, after: $after, first: $first) {\n    totalNum\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n    edges {\n      cursor\n      node {\n        ...commentFields\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(r[t]){return false}else{r[t]=true;return true}})}i.definitions=i.definitions.concat(a(n("KaeL").definitions));function o(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){o(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){o(e,t)})}if(e.definitions){e.definitions.forEach(function(e){o(e,t)})}}var s={};(function e(){i.definitions.forEach(function(e){if(e.name){var t=new Set;o(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function u(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=i;e.exports["commentReplyConnection"]=u(i,"commentReplyConnection")},"2DAU":function(e,t,n){"use strict";var i=n("Ak0P");n.d(t,"wechat",function(){return i});var r=n("Y+c1");if(n.o(r,"Discuss"))n.d(t,"Discuss",function(){return r["Discuss"]})},"4xXt":function(e,t,n){"use strict";n.d(t,"b",function(){return v});n.d(t,"a",function(){return h});var c=n("D57K");var s=n("pN2L");var o=n("cQOC");var i=n("U3QC");var l=n("Jg5f");var u=n("HswR");var d=n("GmjC");var r=n("ZRNH");var a=n("k8K+");var f=n("dCET");var p=n("x4OZ");var m=function(e,t){var n="/submissions/detail/"+e+"/check";return d["a"].get(n).pipe(Object(i["a"])(function(e){if(e.state==="PENDING"){if(t)t(p["a"].PD);throw r["a"]}else if(e.state==="STARTED"){if(t)t(p["a"].JG);throw r["a"]}}),Object(l["a"])(function(e){return Object(a["a"])(e)}),Object(r["b"])({options:{limit:10,delay:100,backoffExponentially:true},timeout:Object(s["a"])({statusCode:30})}))};function v(e,t,n,i){var r="/problems/"+e+"/submit/";var a=d["a"].post(r,{body:JSON.stringify(n),headers:{"content-type":"application/json"}});var o=function(e){return m(e,i).pipe(Object(l["a"])(function(e){return{status:Object(f["b"])(e.statusCode),input:e.input,output:e.codeOutput,expected:e.expectedOutput,stdout:e.stdOutput,errorMsg:e.compileError||e.runtimeError||"",fullErrorMsg:e.fullCompileError||e.fullRuntimeError||"",statusMsg:e.statusMsg,runtime:e.statusRuntime,runtimePercentile:e.runtimePercentile,lang:e.prettyLang,lastTestcase:e.lastTestcase,questionTitle:t,submissionId:e.submissionId,memory:e.statusMemory,memoryPercentile:e.memoryPercentile}}))};return a.pipe(Object(u["a"])(function(e){return e.submission_id?o(e.submission_id):Object(s["a"])({error:e.error})}))}function h(e,t,n){var i="/problems/"+e+"/interpret_solution/";var r=d["a"].post(i,{body:JSON.stringify(t),headers:{"content-type":"application/json"}});var a=function(u){return Object(o["a"])(m(u.interpret_id,n),m(u.interpret_expected_id)).pipe(Object(l["a"])(function(e){var t=c["__read"](e,2),n=t[0],i=t[1];var r=n.codeOutput||[];var a=n.codeAnswer||[];var o=n.compileError||n.runtimeError||"";var s=n.fullCompileError||n.fullRuntimeError||"";var l=i.codeAnswer!==undefined?i.codeAnswer:i.compileError||i.runtimeError;return{status:Object(f["b"])(n.statusCode),input:u.test_case,stdout:r,output:a,errorMsg:o,fullErrorMsg:s,expected:l,runtime:n.statusRuntime}}))};return r.pipe(Object(u["a"])(function(e){return e.interpret_id?a(e):Object(s["a"])({error:e.error})}))}},"528F":function(e,t,n){e.exports={"icon-area":"icon-area__tMO5",iconArea:"icon-area__tMO5",wechat:"wechat__Jm8B",tips:"tips__1ZEK","qr-code-area":"qr-code-area__DdOM",qrCodeArea:"qr-code-area__DdOM",logo:"logo__7dCS"}},"55pm":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("D57K");var i=n("ERkP");var a=n.n(i);var o=n("7nmT");var s=n.n(o);var l=n("5ZzG");var u=n("8d7B");var c=n("SZui");var d=n("sYqU");var f=n("7Ej0");var p=n("6Ltx");var m=function(e){r["__extends"](i,e);function i(){return e!==null&&e.apply(this,arguments)||this}i.hide=function(){s.a.render(a.a.createElement(i,{visible:false}),Object(p["d"])())};i.signIn=function(e){if(e===void 0){e={}}var t=u["global"].userStatus&&u["global"].userStatus.isSignedIn;var n=e.afterSignIn;if(t){if(typeof n==="function"){n()}}else if(c["b"]){s.a.render(a.a.createElement(i,{visible:true,onClose:i.hide}),Object(p["d"])())}else{window.location.href=d["a"].signIn()}};i.ensureSignedIn=function(e,t){return function(){i.signIn(r["__assign"]({afterSignIn:e},t))}};i.prototype.render=function(){return a.a.createElement(f["d"],{visible:this.props.visible},a.a.createElement(f["c"],null,a.a.createElement(f["f"],{href:Object(p["c"])()},a.a.createElement(l["a"],{type:"wechat"}),"微信快捷登录"),a.a.createElement(f["b"],{href:d["a"].signIn()},a.a.createElement(l["a"],{type:"leetcode"}),"已有力扣账号登录"),a.a.createElement(f["a"],{onClick:this.props.onClose},"取消")))};return i}(a.a.PureComponent)},"5RBF":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"commentsSelection"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topicId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentsSelection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"topicId"},value:{kind:"Variable",name:{kind:"Name",value:"topicId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"commentFields"},directives:[]}]}}]}}],loc:{start:0,end:152}};i.loc.source={body:'#import "../../fragments/comment.graphql"\n\nquery commentsSelection($topicId: ID!) {\n  commentsSelection(topicId: $topicId) {\n    ...commentFields\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(r[t]){return false}else{r[t]=true;return true}})}i.definitions=i.definitions.concat(a(n("KaeL").definitions));function o(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){o(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){o(e,t)})}if(e.definitions){e.definitions.forEach(function(e){o(e,t)})}}var s={};(function e(){i.definitions.forEach(function(e){if(e.name){var t=new Set;o(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function u(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=i;e.exports["commentsSelection"]=u(i,"commentsSelection")},"6Ltx":function(e,t,n){"use strict";n.d(t,"d",function(){return u});n.d(t,"c",function(){return f});n.d(t,"a",function(){return p});n.d(t,"b",function(){return m});var i=n("D57K");var r=n("pu3o");var a=n.n(r);var o=n("lXyA");var s=n.n(o);var l=n("sYqU");var u=s()(function(){var e=document.createElement("div");e.classList.add("wechat-sign-in-modal-container");document.body.appendChild(e);return e});function c(){var e=l["a"].getCurrentRelativePath();var t=a.a.stringify({direct_next:e,connect_next:location.origin+"/wechat/login-connect?"+a.a.stringify({next:e})});return location.origin+"/wechat/mplogin?"+t}function d(e){var t=a.a.stringify(i["__assign"]({},e,{redirect_uri:e.redirect_uri,response_type:"code"}));return"https://open.weixin.qq.com/connect/oauth2/authorize?"+t+"#wechat_redirect"}function f(){return d({appid:"wx8895d677f6fa453f",redirect_uri:c(),scope:"snsapi_userinfo"})}function p(){return v("login")}function m(){var e=v("connect");return l["a"].signIn(e)}function v(e){var t=a.a.parse(location.search.substr(1)),n=t.next,i=t.lc_ticket;var r=a.a.stringify({process:e,next:n,lc_ticket:i});return"/wechat/mplogin/new?"+r}},"7Ej0":function(e,t,n){"use strict";n.d(t,"d",function(){return s});n.d(t,"c",function(){return l});n.d(t,"f",function(){return c});n.d(t,"b",function(){return d});n.d(t,"e",function(){return f});n.d(t,"a",function(){return p});var i=n("l1C2");var r=n("LJ7e");var a=n("rJKo");var o=n("SwI/");var s=r["default"].div(function(e){var t=e.visible;return{display:t?"flex":"none",transition:"opacity 0.2s east-in-out",position:"fixed",top:"0",bottom:"0",left:"0",right:"0",flexDirection:"column",width:"100vw",height:"100vh",background:""+Object(a["a"])(o["a"].black).setAlpha(.7),zIndex:5,"&::before":{content:'" "',flex:"0.618 0 15px"},"&::after":{content:'" "',flex:"1 0 15px"}}},"label:Overlay;");var l=r["default"].div({flex:"0 0 auto",margin:"0 auto",padding:"10px 0",width:"250px",borderRadius:"3px",background:o["a"].white},"label:Modal;");var u=Object(i["d"])({display:"flex",justifyContent:"center",alignItems:"center",margin:"20px",padding:"11px",fontSize:"14px",lineHeight:"20px",borderRadius:"3px",color:o["a"].dblue8,userSelect:"none",background:"transparent",cursor:"pointer",svg:{marginRight:"5px",width:"20px",height:"20px",color:o["a"].white},"&:active":{color:o["a"].dblue7}},"label:ButtonStyle;");var c=r["default"].a(u,{color:o["a"].white,background:o["a"].wechatColor,"&:active":{background:""+Object(a["a"])(o["a"].wechatColor).setAlpha(.8)}},"label:WechatButton;");var d=r["default"].a(u,{color:o["a"].white,background:o["a"].dblue5,"&:active":{background:""+Object(a["a"])(o["a"].dblue5).setAlpha(.8)}},"label:LeetCodeButton;");var f=r["default"].a(u,{border:"1px solid "+Object(a["a"])(o["a"].dblue9).setAlpha(.2)},"label:PrimaryButton;");var p=r["default"].div({marginTop:"23px",paddingTop:"10px",borderTop:"1px solid "+o["a"].grey2,lineHeight:"26px",color:o["a"].dark5,textAlign:"center",cursor:"pointer",userSelect:"none","&:active":{color:o["a"].dark3}},"label:CancelButton;")},"8CDz":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"checkin"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkedIn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:67}};n.loc.source={body:"mutation checkin {\n  checkin {\n    checkedIn\n    ok\n    error\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["checkin"]=o(n,"checkin")},"8jAb":function(e,t,n){"use strict";var i=n("D57K");var r=n("ERkP");var a=n.n(r);var o=n("pu3o");var s=n.n(o);var l=n("5ZzG");var u=n("8d7B");var c=n("jaZD");var d={weixin:"wechat"};function f(e){var t=e.id,n=e.login_url;return{iconType:d[t]||t,url:""+window.location.origin+n}}function p(e){if(e===void 0){e="[]"}try{return JSON.parse(e).map(f)}catch(e){return[]}}var m=n("LJ7e");var v=n("qzvP");var h=n("6h7y");var g=function(e,t){var n;var i="&[data-icon^="+e+"]";return n={},n[i]={"&:hover":{color:t}},n};var b=Object(v["a"])(i["__assign"]({},g("weibo",h["weiboColor"]),g("baidu",h["baiduColor"]),g("wechat",h["wechatColor"]),g("facebook",h["facebookColor"]),g("google",h["googleColor"]),g("github",h["dark1"]),g("linkedin",h["linkedinColor"]),{color:h["dark6"],margin:"0 7.5px"}),"label:link;");var k=Object(v["a"])({width:"30px",height:"30px"},"label:icon;");var y=Object(m["default"])("div",{target:"e5i1odf0"})(function(e){var t=e.isCn;var n;return t?(n={},n["."+b]={margin:"0 10px"},n["."+k]={width:"24px",height:"24px"},n):null},{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:"25px auto 0"},"label:Container;");var S=Object(m["default"])("p",{target:"e5i1odf1"})({marginBottom:"15px",color:h["dark6"],pointerEvents:"none"},"label:Tips;");n.d(t,"a",function(){return E});var E=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.render=function(){var n=this;return a.a.createElement(y,{isCn:true},a.a.createElement(S,null,"第三方登录"),a.a.createElement(c["a"],null,function(e){var t=e.next;return n.renderIcons(t)}))};t.prototype.renderIcons=function(e){var t=p(u["global"].feature.socialProviders);var i=s.a.stringify({next:e});return a.a.createElement("div",null,t.map(function(e){var t=e.iconType,n=e.url;return a.a.createElement("a",{key:t,href:n+"?"+i,"data-icon":t,className:b},a.a.createElement(l["a"],{type:t,className:k}))}))};return t}(a.a.PureComponent)},"9Xp4":function(e,t,n){"use strict";var i=n("D57K");var r=n("ERkP");var a=n.n(r);var o=n("DuHN");var s=n("IJu9");var l=n("fQLH");var u=n("Jg5f");var c=n("U3QC");var d=n("mhnT");var f=n("fsDi");var p=n("nPqx");var m=n("xdqw");var v=n("Y7lc");var h=n("xml1");var g={advertising:"骚扰广告",sexual:"黄色内容",violent:"暴力内容",terrorism:"恐怖主义",politics:"政治言论",fake:"造谣传谣",illegal:"违法内容",plagiarism:"侵权内容",other:"其他"};var b=n("LJ7e");var k=n("5ZzG");var y=n("SwI/");var S=n("IDXw");var E=Object(b["default"])("div",{target:"e5i1odf0"})({fontSize:"12px",color:y["a"].grey4,maring:"15px 0",textAlign:"center"},"label:WarningText;");var C=Object(b["default"])("ul",{target:"e5i1odf1"})({margin:0,padding:"0 10px",listStyle:"none"},"label:ReasonList;");var _=Object(b["default"])("li",{target:"e5i1odf2"})({height:"40px",lineHeight:"40px",fontSize:"12px",cursor:"pointer",display:"flex",justifyContent:"space-between",borderBottom:"1px solid "+y["a"].grey2,"&:nth-last-child(1)":{border:"none"}},"label:ReasonListItem;");var w=Object(b["default"])("div",{target:"e5i1odf3"})({height:"inherit",lineBreak:"inherit",fontSize:"inherit",color:y["a"].dblue8},"label:ReasonListItemText;");var x=Object(b["default"])(k["a"],{target:"e5i1odf4"})({fontSize:"18px",alignSelf:"center",color:y["a"].dblue8},"label:ReasonListItemCheckedIcon;");var N=Object(b["default"])("textarea",{target:"e5i1odf5"})({width:"100%",height:"100px",fontSize:"12px",color:y["a"].dblue8,border:"1px solid "+y["a"].dblue9,borderRadius:S["i"],"&:placeholder":{color:y["a"].grey2,fontSize:"inherit"}},"label:OtherReasonInput;");n.d(t,"a",function(){return R});var O="REASONS";var I=Object(m["a"])("LEETCODE/FLAG_CONTENT",{expiredTime:1e3*3600*24});var R=function(e){i["__extends"](t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;n.state={checkedReasonItemId:null,otherReasonText:null,reasons:[],fetchReasonLoading:true};n.dispose$=new l["a"];n.getReportReasons$=Object(v["b"])({query:h["b"].flagReasons,fetchPolicy:"network-only"}).pipe(Object(u["a"])(function(e){var t=e.data;return t.flagReasons}),Object(c["a"])(function(e){return n.setState({reasons:e,fetchReasonLoading:false},function(){return I.set(O,n.state.reasons)})}),Object(d["a"])(n.dispose$));n.onCancel=function(){n.setState({checkedReasonItemId:null,otherReasonText:null},function(){return n.props.onClose()})};n.onOk=function(){if(n.state.checkedReasonItemId==="other"&&!n.state.otherReasonText){o["a"].error("请填写"+n.props.title+"理由");return}n.props.onOk(i["__assign"]({reasonText:n.state.otherReasonText},n.state.checkedReasonItemId&&n.state.checkedReasonItemId!=="other"?{reasonId:n.state.checkedReasonItemId}:{}))};n.onInput=function(e){return n.setState({otherReasonText:e.currentTarget.value})};n.renderReasonList=function(){return n.state.fetchReasonLoading?a.a.createElement(f["a"],{size:"xs"}):a.a.createElement(C,null,n.state.reasons.map(function(e){return n.renderReasonListItem(e)}),n.renderReasonListItem({id:"other",name:"other"}))};n.onClickReasonItem=function(e){var t=e.currentTarget.dataset.reasonId;if(!t)return;n.setState({checkedReasonItemId:t})};return n}t.prototype.componentDidMount=function(){this.getReportReasons()};t.prototype.componentWillUnmount=function(){this.dispose$.next();this.dispose$.complete()};t.prototype.render=function(){return a.a.createElement(p["a"],{visible:this.props.visible,type:"default",title:this.props.title,onClose:this.onCancel,onCancel:this.onCancel,onOk:this.onOk,disableOk:!this.state.checkedReasonItemId,okLoading:this.props.mutateLoading},this.renderWarningText(),this.renderReasonList(),this.renderOtherReasonInput())};t.prototype.getReportReasons=function(){var e=I.get(O);if(e){this.setState({reasons:e,fetchReasonLoading:false})}else{this.getReportReasons$.subscribe()}};t.prototype.renderOtherReasonInput=function(){return this.state.checkedReasonItemId==="other"&&a.a.createElement(N,{onInput:this.onInput})};t.prototype.renderReasonListItem=function(e){return a.a.createElement(_,{key:e.id,"data-reason-id":e.id,onClick:this.onClickReasonItem},a.a.createElement(w,null,g[e.name.toLowerCase()]),this.state.checkedReasonItemId===e.id&&a.a.createElement(x,{type:"check"}))};t.prototype.renderWarningText=function(){return!!this.props.warningText&&a.a.createElement(E,null,this.props.warningText)};t.defaultProps={mutateLoading:false};return t}(a.a.PureComponent)},AIW4:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("D57K");var r=n("ERkP");var s=n.n(r);var a=n("aWzz");var o=n.n(a);var l=n("0I+d");var u=Object(l["a"])();var c=function(e){i["__extends"](t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;i.form=s.a.createRef();i.handleSubmit=function(){if(i.form.current){var e=i.props,t=e.lang,n=e.questionId;i.form.current.submit()}};return i}t.prototype.render=function(){var e=this.props,t=e.code,n=e.questionId,i=e.testcase,r=e.lang,a=e.children,o=e.isInSubmissionResult;return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{style:{display:"none"},target:"_blank",method:"POST",action:"/playground/new/empty",ref:this.form},s.a.createElement("input",{name:"csrfmiddlewaretoken",type:"hidden",value:u}),s.a.createElement("input",{name:"code",type:"hidden",value:t}),s.a.createElement("input",{name:"question",type:"hidden",value:n}),s.a.createElement("input",{name:"testcase",type:"hidden",value:i}),s.a.createElement("input",{name:"lang",type:"hidden",value:r}),s.a.createElement("input",{name:"from_submission_result",type:"hidden",value:o?"1":""})),a(this.handleSubmit))};t.propTypes={code:o.a.string.isRequired,questionId:o.a.string.isRequired,testcase:o.a.string.isRequired,lang:o.a.string.isRequired,isInSubmissionResult:o.a.bool,children:o.a.func};t.defaultProps={children:function(){},isInSubmissionResult:false};return t}(s.a.Component)},Ak0P:function(e,t,n){"use strict";n.r(t);var a=n("D57K");var i=n("lXyA");var r=n.n(i);var o=n("TLco");var s=n("SZui");var l=["onMenuShareWeibo","onMenuShareQZone","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"];var u=n("q/oC");var c=n("w+fZ");function d(e,t){var n=Object(u["d"])(c["a"]);var i=new Error("Wechat js sdk error, when calling "+e+"; Detail: "+JSON.stringify(t));n.info(i);return i}var f={onMenuShareAppMessage:"menu:share:appmessage",onMenuShareTimeline:"menu:share:timeline",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",onMenuShareQQ:"menu:share:qq"};var p=r()(function(){return new Promise(function(t){window.wx.checkJsApi({jsApiList:l,success:function(e){try{if(typeof e.checkResult==="object"){t(e.checkResult)}else{t(JSON.parse(e.checkResult))}}catch(e){t({})}},fail:function(e){d("checkJsApi",e);t({})}})})});function m(t){return p().then(function(e){return!!(e[f[t]]||e[t])})}function v(i,r){if(r===void 0){r={}}return new Promise(function(t,n){m(i).then(function(e){if(!e){n(new Error("unsupported Api: "+i))}else{window.wx[i](a["__assign"]({},r,{success:function(e){if(r.success){r.success(e)}t(e)},fail:function(e){if(r.fail){r.fail(e)}n(d(i,e))}}))}})})}function h(i,r){if(r===void 0){r={}}return new Promise(function(t,n){m(i).then(function(e){if(!e){n(new Error("unsupported Api: "+i))}else{window.wx[i](a["__assign"]({},r));t(true)}})})}function g(e){return h("onMenuShareAppMessage",e)}function b(e){return h("onMenuShareTimeline",e)}function k(e){return h("onMenuShareTimeline",e)}function y(e){return h("onMenuShareTimeline",e)}function S(e){return h("onMenuShareTimeline",e)}function E(e){return v("updateAppMessageShareData",e)}function C(e){return v("updateTimelineShareData",e)}var _="/wechat/jssdk/";var w=function(){var t="";var n=null;return function(){var e=window.location.href;if(e===t&&n){return Promise.resolve(n)}t=e;return Object(o["a"])(_,{method:"GET"}).then(function(e){var t=e.data;n=t;return t}).catch(function(e){d("getSignature",e);return null})}}();function x(){return a["__awaiter"](this,void 0,void 0,function(){var t;return a["__generator"](this,function(e){switch(e.label){case 0:return[4,w()];case 1:t=e.sent();if(t){window.wx.config(a["__assign"]({debug:"production"!=="production",appId:"wx8895d677f6fa453f",jsApiList:l},t))}return[2]}})})}function N(){return new Promise(function(e,t){var n=document.createElement("script");n.type="text/javascript";n.src="//res.wx.qq.com/open/js/jweixin-1.4.0.js";n.async=true;n.onload=function(){e()};n.onerror=t;document.head.appendChild(n)})}function O(){var e=document.querySelector('meta[name="description"]');return e?e.content:"备战技术面试？力扣提供海量技术面试资源，帮助你高效提升编程技能，轻松拿下世界 IT 名企 Dream Offer。"}var I=r()(function(){return new Promise(function(e){if(s["b"]){N().then(function(){window.wx.ready(function(){R({},true).then(function(){return e(true)})});x()}).catch(function(){return e(false)})}else{e(false)}})});function R(e,t){if(e===void 0){e={}}if(t===void 0){t=false}var n=Object.assign({title:document.title,desc:O(),link:window.location.href,imgUrl:"https://assets.leetcode-cn.com/aliyun-lc-upload/uploaded_files/2019/02/cd609dea-1aa6-48ac-865a-c4e5b998a162/14-1.png"},e);var i=function(){return Promise.all([g(n),b(n),k(n),y(n),S(n)]).then(function(){return true}).catch(function(){return true})};return t?i():I().then(function(e){return e?i():Promise.resolve(true)})}var D=n("ERkP");var P=n.n(D);var j=n("7nmT");var F=n.n(j);var T=n("LJ7e");var M=n("rJKo");var L=n("SwI/");var A=n("xvRP");var U=n.n(A);var B=T["default"].div({position:"fixed",top:"0px",left:"0px",right:"0px",bottom:"0px",zIndex:5,background:Object(M["a"])(L["a"].black).setAlpha(.7).toString()},function(e){var t=e.isShow;return{transition:"opacity 0.3s",opacity:t?1:0,pointerEvents:t?"auto":"none"}},"label:Container;");var V=T["default"].img({display:"block",margin:"17px 15px 0 auto"},"label:TipsImage;");var q=r()(function(){var e=document.createElement("div");e.classList.add("wechat-share-mask");document.body.appendChild(e);return e});var $=function(e){a["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.show=function(){F.a.render(P.a.createElement(t,{isShow:true}),q())};t.hide=function(){F.a.render(P.a.createElement(t,{isShow:false}),q())};t.prototype.render=function(){return F.a.createPortal(P.a.createElement(B,a["__assign"]({},this.props,{onClick:t.hide}),P.a.createElement(V,{src:U.a})),document.body)};return t}(P.a.PureComponent);function z(e){if(e===void 0){e={}}var t=e.success,n=a["__rest"](e,["success"]);return R(a["__assign"]({},n,{success:function(e){if(typeof t==="function"){t(e)}$.hide()}})).then($.show)}n.d(t,"onMenuShareAppMessage",function(){return g});n.d(t,"onMenuShareTimeline",function(){return b});n.d(t,"onMenuShareQQ",function(){return k});n.d(t,"onMenuShareQZone",function(){return y});n.d(t,"onMenuShareWeibo",function(){return S});n.d(t,"__updateAppMessageShareData",function(){return E});n.d(t,"__updateTimelineShareData",function(){return C});n.d(t,"showShareMask",function(){return z});n.d(t,"updateSignature",function(){return x});n.d(t,"loadJsSDK",function(){return N});n.d(t,"initialWechatSDK",function(){return I});n.d(t,"updateShareInfo",function(){return R});I()},BMks:function(e,t,n){"use strict";var i=n("OOFc");if(n.o(i,"CONFIRM_PASSWORD"))n.d(t,"CONFIRM_PASSWORD",function(){return i["CONFIRM_PASSWORD"]});if(n.o(i,"EMAIL"))n.d(t,"EMAIL",function(){return i["EMAIL"]});if(n.o(i,"Form"))n.d(t,"Form",function(){return i["Form"]});if(n.o(i,"Input"))n.d(t,"Input",function(){return i["Input"]});if(n.o(i,"NEW_NICKNAME"))n.d(t,"NEW_NICKNAME",function(){return i["NEW_NICKNAME"]});if(n.o(i,"NEW_PASSWORD"))n.d(t,"NEW_PASSWORD",function(){return i["NEW_PASSWORD"]});if(n.o(i,"PASSWORD"))n.d(t,"PASSWORD",function(){return i["PASSWORD"]});if(n.o(i,"PHONE_CODE"))n.d(t,"PHONE_CODE",function(){return i["PHONE_CODE"]});if(n.o(i,"PHONE_NUMBER"))n.d(t,"PHONE_NUMBER",function(){return i["PHONE_NUMBER"]});if(n.o(i,"USERNAME"))n.d(t,"USERNAME",function(){return i["USERNAME"]})},Bamy:function(e,t,n){"use strict";var i=n("ERkP");var a=n.n(i);var o=n("D57K");var r=n("SZui");var s=n("jaZD");var l=n("v31z");var u=n("BMks");var c=n("8jAb");var d;(function(e){e[e["SignIn"]=0]="SignIn";e[e["SignUpByEmail"]=1]="SignUpByEmail";e[e["SignUpByMobileInStep1"]=2]="SignUpByMobileInStep1";e[e["SignUpByMobileInStep2"]=3]="SignUpByMobileInStep2"})(d||(d={}));var f={currentStep:d.SignIn,goStep:function(){return function(){}},isCurrentStep:function(e){return e===this.currentStep}};var p=a.a.createContext(f),m=p.Provider,v=p.Consumer;var h=n("LJ7e");var g=n("6h7y");var b=Object(h["default"])("p",{target:"e5i1odf0"})({color:g["redA4"],fontSize:"12px",lineHeight:"18px",margin:"-10px 0 20px 0"},"label:ErrorMessagePara;");var k=Object(h["default"])("div",{target:"e5i1odf1"})({display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"20px",color:g["dark6"],"a, span":{color:g["dblue6"],fontSize:"14px",lineHeight:"20px",cursor:"pointer"}},"label:Actions;");var y=function(e){o["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.state={error:"",isSubmitting:false};t.formRef=a.a.createRef();t.onClickSignIn=function(){t.updateSubmitError();t.submit()};t.onSubmit=function(e){if(e.location){window.location.href=e.location}else{t.afterSubmit(e)}};t.beforeSubmit=function(){t.setState({isSubmitting:true})};t.afterSubmit=function(e){t.setState({isSubmitting:false});if(e.form){t.updateSubmitError(e.form.errors[0])}};return t}t.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u["Form"],{ref:this.formRef,beforeSubmit:this.beforeSubmit,onSubmit:this.onSubmit,onKeyDownEnter:this.onClickSignIn},a.a.createElement(u["Input"],o["__assign"]({},u["USERNAME"],{placeholder:"手机或邮箱"})),a.a.createElement(u["Input"],o["__assign"]({},u["PASSWORD"],{placeholder:"密码"}))),this.renderCommonError(),a.a.createElement(l["a"],{type:"primary",onClick:this.onClickSignIn,disabled:this.state.isSubmitting},"登录"),a.a.createElement(k,null,a.a.createElement("a",{href:window.location.origin+"/accounts/password/reset/"},"忘记密码?"),a.a.createElement(v,null,function(e){var t=e.goStep;return a.a.createElement("span",{onClick:t(d.SignUpByMobileInStep1)},"注册")})),a.a.createElement(c["a"],null))};t.prototype.submit=function(){if(!this.state.isSubmitting&&this.formRef.current){this.formRef.current.submit({url:"/accounts/login/",extraFormValue:{next:this.props.next||"/"}})}};t.prototype.updateSubmitError=function(e){if(e===void 0){e=""}this.setState({error:e})};t.prototype.renderCommonError=function(){return this.state.error&&a.a.createElement(b,null,this.state.error)};return t}(a.a.PureComponent);var S=Object(s["c"])(y);var E=Object(h["default"])("div",{target:"e5i1odf0"})({display:"flex",marginBottom:"25px",'&[data-is-hide="true"]':{display:"none"}},"label:Switch;");var C=Object(h["default"])("span",{target:"e5i1odf1"})({flex:1,color:g["dark6"],fontSize:"14px",lineHeight:"40px",textAlign:"center",borderBottom:"1px solid",cursor:"pointer",'&[data-is-selected="true"]':{color:g["dblue9"]}},"label:Item;");var _=function(){return a.a.createElement(v,null,function(e){var t=e.goStep,n=e.isCurrentStep;return a.a.createElement(E,{"data-is-hide":n(d.SignUpByMobileInStep2)},a.a.createElement(C,{"data-is-selected":n(d.SignUpByMobileInStep1),onClick:t(d.SignUpByMobileInStep1)},"手机注册"),a.a.createElement(C,{"data-is-selected":n(d.SignUpByEmail),onClick:t(d.SignUpByEmail)},"邮箱注册"))})};var w=n("9EA8");var x=Object(h["default"])("div",{target:"e5i1odf0"})({fontSize:"12px",lineHeight:"45px",textAlign:"center",borderTop:"1px solid "+g["dark8"],marginTop:"20px",color:g["dark4"],a:{color:g["dblue6"]}},"label:Agreement;");var N=function(){return a.a.createElement(x,null,"点击 “注册”，即代表您同意",a.a.createElement("a",{href:"/terms/"},"《力扣服务协议》"))};var O=Object(h["default"])("div",{target:"e5i1odf0"})({textAlign:"center",marginTop:"20px",color:g["dark6"],span:{color:g["dblue6"],fontSize:"14px",lineHeight:"20px",cursor:"pointer",marginLeft:"0.5em"}},"label:GoSignIn;");var I=function(e){o["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.state={isSubmitting:false};t.formRef=a.a.createRef();t.onSubmit=function(e){if(e.location){t.savePasswordToBrowser().then(function(){window.location.href=e.location})}else{t.afterSubmit(e)}};t.beforeSubmit=function(){t.setState({isSubmitting:true})};t.afterSubmit=function(e){t.setState({isSubmitting:false});t.showSubmitErrors(e)};t.onClickSignUp=function(){if(!t.state.isSubmitting&&t.formRef.current){t.formRef.current.submit({url:"/accounts/signup/",extraFormValue:{phone_email_select:"email",next:t.props.next||"/",username:"placeholder"}})}};t.onConfirmPasswordFieldBlur=function(){if(t.formRef.current){t.formRef.current.validateInputs("onBlur")}};return t}t.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u["Form"],{ref:this.formRef,beforeSubmit:this.beforeSubmit,onSubmit:this.onSubmit,onKeyDownEnter:this.onClickSignUp},a.a.createElement(u["Input"],o["__assign"]({},u["EMAIL"],{placeholder:"邮箱"})),a.a.createElement(u["Input"],o["__assign"]({},u["NEW_NICKNAME"],{placeholder:"昵称"})),a.a.createElement(u["Input"],o["__assign"]({},u["NEW_PASSWORD"],{placeholder:"密码"})),a.a.createElement(u["Input"],o["__assign"]({},u["CONFIRM_PASSWORD"],{onBlur:this.onConfirmPasswordFieldBlur,placeholder:"再次确认密码"}))),a.a.createElement(l["a"],{type:"primary",onClick:this.onClickSignUp,disabled:this.state.isSubmitting},"注册"),a.a.createElement(v,null,function(e){var t=e.goStep;return a.a.createElement(O,null,"已有账号? ",a.a.createElement("span",{onClick:t(d.SignIn)},"登录"))}),a.a.createElement(c["a"],null),a.a.createElement(N,null))};t.prototype.savePasswordToBrowser=function(){return o["__awaiter"](this,void 0,Promise,function(){return o["__generator"](this,function(e){switch(e.label){case 0:if(!this.formRef.current)return[3,2];return[4,this.formRef.current.getFormValues().then(function(e){return{id:e[u["EMAIL"].name],password:e[u["NEW_PASSWORD"].name]}}).then(w["a"])];case 1:e.sent();e.label=2;case 2:return[2]}})})};t.prototype.showSubmitErrors=function(e){var n=this;var i=e.form.fields;Object.keys(i).forEach(function(e){var t=i[e].errors[0];if(t&&n.formRef.current){n.formRef.current.showError(e,t)}})};return t}(a.a.PureComponent);var R=Object(s["c"])(I);var D=n("LR82");var P=n("fQLH");var j=n("JpoA");var F=n("iJR/");var T=n("vKrG");var M=n("AouM");var L=n("U3QC");var A=n("rzNM");var U=n("z5yO");var B=n("12aA");var V=n("IMYO");var q=n("Jg5f");var $=n("G0kv");var z=n("uZih");var W=n.n(z);var H=n("qagx");var K=n("0cIN");var Q=n("G2Mx");function G(t){return Object(K["a"])(0,1e3).pipe(Object(Q["a"])(t+1),Object(q["a"])(function(e){return t-e}),Object(q["a"])(function(e){return e>0?e:null}))}var J=n("H5qd");var Z=n.n(J);var Y=n("Y7lc");var X=Z()(te||(te=o["__makeTemplateObject"](["\n  mutation sendVerificationSms($smsInput: SendVerificationInput!) {\n    sendVerificationSms(smsInput: $smsInput) {\n      ok\n      error\n    }\n  }\n"],["\n  mutation sendVerificationSms($smsInput: SendVerificationInput!) {\n    sendVerificationSms(smsInput: $smsInput) {\n      ok\n      error\n    }\n  }\n"])));function ee(e){return Object(Y["a"])({mutation:X,variables:{smsInput:e}}).pipe(Object(q["a"])(function(e){var t=e.data,n=e.errors;if(t){return t.sendVerificationSms}else{throw JSON.stringify(n)}}))}var te;var ne=n("qzvP");var ie="40px";var re=Object(h["default"])("div",{target:"e5i1odf0"})({position:"relative",width:"100%"},"label:Container;");var ae=Object(ne["a"])({width:"100%",input:{height:ie,boxSizing:"border-box",paddingRight:"50%"}},"label:input;");var oe=Object(h["default"])("span",{target:"e5i1odf1"})(function(e){var t=e.isDisabled;return t?{pointerEvents:"none",opacity:.6}:null},{position:"absolute",top:0,right:"13px",fontSize:"14px",lineHeight:ie,cursor:"pointer",maxWidth:"50%",color:g["dblue6"],opacity:.9,transition:"opacity 0.3s","&:hover":{opacity:1}},"label:Action;");var se=Object(h["default"])("div",{target:"e5i1odf2"})({position:"absolute",top:0,left:0,right:0,bottom:0,"> div":{width:"100%",height:ie,background:"white"}},"label:AliSlideAuthContainer;");var le=60;var ue=function(e){o["__extends"](t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;i.state={sentCount:0,countdown:null,isShowAliSlideAuth:false};i.aliSlideAuthSuccess$=new P["a"];i.subscription=new D["a"];i.sendCode=function(){var e=new P["a"];var t=e.pipe(Object(U["a"])(function(){return!i.isActionDisabled}),Object(M["a"])(i.props.getPhoneNumber),Object(L["a"])(function(){i.setState({isShowAliSlideAuth:true})}));var n=Object($["b"])(t,i.aliSlideAuthSuccess$).pipe(Object(M["a"])(function(e){var t=o["__read"](e,2),n=t[0],i=t[1];return ee({phoneNum:n,templateId:"SMS_119915003",sig:i.sig,token:i.token,scene:i.scene,csessionid:i.csessionid})}),Object(L["a"])(function(e){var t=e.error;i.props.onSendCodeError(t);i.setState({isShowAliSlideAuth:false})}),Object(U["a"])(function(e){var t=e.ok;return t}),Object(L["a"])(function(){i.setState(function(e){var t=e.sentCount;return{sentCount:t+1}})}),Object(M["a"])(function(){return G(le)}),Object(L["a"])(function(e){i.setState({countdown:e})}),Object(V["a"])(function(e){var t=e instanceof Error?e.message:String(e);i.props.onSendCodeError(t);i.setState({isShowAliSlideAuth:false});return Object(j["a"])(e)}));i.subscription.add(n.subscribe());return function(){e.next()}}();i.onAliSlideAuthSuccess=function(e){i.aliSlideAuthSuccess$.next(e)};return i}Object.defineProperty(t.prototype,"inputProps",{get:function(){return W()(this.props,"getPhoneNumber","onSendCodeError")},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"actionName",{get:function(){var e=this.state.sentCount>0?"重新发送验证码":"获取短信验证码";return this.state.countdown===null?e:this.state.countdown+" 秒"},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"isActionDisabled",{get:function(){return this.state.countdown!==null},enumerable:true,configurable:true});t.prototype.componentDidMount=function(){H["a"].prepare()};t.prototype.componentWillUnmount=function(){this.subscription.unsubscribe();this.aliSlideAuthSuccess$.complete()};t.prototype.render=function(){return a.a.createElement(re,null,a.a.createElement(u["Input"],o["__assign"]({className:ae},this.inputProps)),this.renderAction(),this.renderAliSlideAuth())};t.prototype.renderAction=function(){return a.a.createElement(oe,{onClick:this.sendCode,isDisabled:this.isActionDisabled},this.actionName)};t.prototype.renderAliSlideAuth=function(){return this.state.isShowAliSlideAuth&&a.a.createElement(se,null,a.a.createElement(H["a"],{onSuccess:this.onAliSlideAuthSuccess}))};return t}(a.a.PureComponent);var ce=ue;var de=Z()(pe||(pe=o["__makeTemplateObject"](["\n  mutation validatePhoneCode($phoneNum: String!, $phoneCode: String!) {\n    validatePhoneCode(phoneNum: $phoneNum, phoneCode: $phoneCode) {\n      ok\n      error\n    }\n  }\n"],["\n  mutation validatePhoneCode($phoneNum: String!, $phoneCode: String!) {\n    validatePhoneCode(phoneNum: $phoneNum, phoneCode: $phoneCode) {\n      ok\n      error\n    }\n  }\n"])));function fe(e){return Object(Y["a"])({mutation:de,variables:e}).pipe(Object(q["a"])(function(e){var t=e.data,n=e.errors;if(t){return t.validatePhoneCode}else{throw JSON.stringify(n)}}))}var pe;function me(e){return e[u["PHONE_NUMBER"].name]||""}var ve=function(e){o["__extends"](t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;n.state={isValidating:false};n.formRef=a.a.createRef();n.subscription=new D["a"];n.verifyCode$=new P["a"];n.process$=n.verifyCode$.pipe(Object(M["a"])(function(){return n.validateInputs("onSubmit")}),Object(L["a"])(function(){n.setState({isValidating:true})}),Object(A["a"])(function(e){return fe({phoneNum:e[u["PHONE_NUMBER"].name],phoneCode:e[u["PHONE_CODE"].name]}).pipe(Object(L["a"])(function(e){var t=e.error;n.setState({isValidating:false});n.showSMSInputError(t)}),Object(U["a"])(function(e){var t=e.ok;return t}),Object(B["a"])(e))}),Object(L["a"])(n.props.goNextStep),Object(V["a"])(function(e){var t=e instanceof Error?e.message:String(e);n.showSMSInputError(t);return Object(j["a"])(e)}));n.getPhoneNumber=function(){return Object(F["a"])(n.validateInputs("onSendCode")).pipe(Object(q["a"])(me))};n.onClickNextStepButton=function(){n.verifyCode$.next()};n.showSMSInputError=function(e){if(n.formRef.current){n.formRef.current.showError(u["PHONE_CODE"].name,e)}};return n}t.prototype.componentDidMount=function(){this.subscription.add(this.process$.subscribe())};t.prototype.componentWillUnmount=function(){this.verifyCode$.complete();this.subscription.unsubscribe()};t.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u["Form"],{ref:this.formRef,onKeyDownEnter:this.onClickNextStepButton},a.a.createElement(u["Input"],o["__assign"]({},u["PHONE_NUMBER"],{placeholder:"中国大陆手机号码"})),a.a.createElement(ce,o["__assign"]({},u["PHONE_CODE"],{onSendCodeError:this.showSMSInputError,getPhoneNumber:this.getPhoneNumber,placeholder:"短信验证码"}))),a.a.createElement(l["a"],{type:"primary",onClick:this.onClickNextStepButton,disabled:this.state.isValidating},"下一步"))};t.prototype.validateInputs=function(e){return this.formRef.current?this.formRef.current.validateInputs(e):T["a"]};return t}(a.a.PureComponent);var he=ve;var ge=Object(ne["a"])({opacity:0,pointerEvents:"none",position:"absolute"},"label:hide;");var be=function(e){o["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.state={isSubmitting:false};t.formRef=a.a.createRef();t.onSubmit=function(e){if(e.location){t.savePasswordToBrowser().then(function(){window.location.href=e.location})}else{t.afterSubmit(e)}};t.beforeSubmit=function(){t.setState({isSubmitting:true})};t.afterSubmit=function(e){t.setState({isSubmitting:false});t.showSubmitErrors(e)};t.onClickSignUp=function(){if(!t.state.isSubmitting&&t.formRef.current){t.formRef.current.submit({url:"/accounts/signup/",extraFormValue:o["__assign"]({},t.props.step1Form,{phone_email_select:"phone",next:t.props.next||"/",username:"placeholder"})})}};t.onConfirmPasswordFieldBlur=function(){if(t.formRef.current){t.formRef.current.validateInputs("onBlur")}};return t}t.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u["Form"],{ref:this.formRef,beforeSubmit:this.beforeSubmit,onSubmit:this.onSubmit,onKeyDownEnter:this.onClickSignUp},a.a.createElement(u["Input"],o["__assign"]({},u["NEW_NICKNAME"],{placeholder:"昵称"})),a.a.createElement("input",{disabled:true,name:u["PHONE_NUMBER"].name,className:ge,autoComplete:u["PHONE_NUMBER"].autoComplete,value:this.props.step1Form[u["PHONE_NUMBER"].name]}),a.a.createElement(u["Input"],o["__assign"]({},u["NEW_PASSWORD"],{placeholder:"密码"})),a.a.createElement(u["Input"],o["__assign"]({},u["CONFIRM_PASSWORD"],{onBlur:this.onConfirmPasswordFieldBlur,placeholder:"再次确认密码"}))),a.a.createElement(l["a"],{type:"primary",onClick:this.onClickSignUp,disabled:this.state.isSubmitting},"注册"))};t.prototype.savePasswordToBrowser=function(){return o["__awaiter"](this,void 0,Promise,function(){var t=this;return o["__generator"](this,function(e){switch(e.label){case 0:if(!this.formRef.current)return[3,2];return[4,this.formRef.current.getFormValues().then(function(e){return{id:t.props.step1Form[u["PHONE_NUMBER"].name],password:e[u["NEW_PASSWORD"].name]}}).then(w["a"])];case 1:e.sent();e.label=2;case 2:return[2]}})})};t.prototype.showSubmitErrors=function(e){if(this.formRef.current){var n=e.form.fields;var i=this.formRef.current;Object.keys(n).forEach(function(e){var t=n[e].errors[0];if(t){i.showError(e,t)}})}};return t}(a.a.PureComponent);var ke=Object(s["c"])(be);var ye=Object(h["default"])("span",{target:"e5i1odf0"})({display:"inline-block",margin:"20px auto",fontSize:"14px",color:g["dblue6"],cursor:"pointer"},"label:GoPrevStep;");var Se=Object(h["default"])("div",{target:"e5i1odf1"})({textAlign:"center",marginTop:"20px",color:g["dark6"],span:{color:g["dblue6"],fontSize:"14px",lineHeight:"20px",cursor:"pointer",marginLeft:"0.5em"}},"label:GoSignIn;");var Ee=function(e){o["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.state={step1Form:{}};t.onGoingToStep2=function(e){t.setState({step1Form:e},t.props.goStep2)};return t}t.prototype.render=function(){return this.props.currentStepIsStep1?this.renderStep1():this.renderStep2()};t.prototype.renderStep1=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(he,{goNextStep:this.onGoingToStep2}),a.a.createElement(Se,null,"已有账号? ",a.a.createElement("span",{onClick:this.props.goSignIn},"登录")),a.a.createElement(c["a"],null))};t.prototype.renderStep2=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ke,{step1Form:this.state.step1Form}),a.a.createElement(ye,{onClick:this.props.goStep1},"上一步"),a.a.createElement(N,null))};return t}(a.a.PureComponent);var Ce=a.a.forwardRef(function(i,r){return a.a.createElement(v,null,function(e){var t=e.goStep,n=e.isCurrentStep;return a.a.createElement(Ee,o["__assign"]({},i,{ref:r,goStep1:t(d.SignUpByMobileInStep1),goStep2:t(d.SignUpByMobileInStep2),goSignIn:t(d.SignIn),currentStepIsStep1:n(d.SignUpByMobileInStep1)}))})});var _e=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(_,null),a.a.createElement(v,null,function(e){var t=e.isCurrentStep;return t(d.SignUpByEmail)?a.a.createElement(R,null):a.a.createElement(Ce,null)}))};var we=n("1ZoV");var xe=n.n(we);var Ne=Object(h["default"])("div",{target:"e5i1odf0"})({display:"flex",flexDirection:"column",alignItems:"stretch"},"label:Container;");var Oe=Object(h["default"])("img",{target:"e5i1odf1"})({height:"39px",marginBottom:"31px"},"label:Logo;");var Ie=function(e){o["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.state={currentStep:t.props.defaultShowSignUp?d.SignUpByMobileInStep1:d.SignIn};t.updateCurrentStep=function(e){t.setState({currentStep:e})};t.isCurrentStep=function(e){return t.state.currentStep===e};t.goStep=function(e){return function(){t.updateCurrentStep(e)}};return t}Object.defineProperty(t.prototype,"stepProviderValue",{get:function(){return{goStep:this.goStep,isCurrentStep:this.isCurrentStep,currentStep:this.state.currentStep}},enumerable:true,configurable:true});t.prototype.render=function(){return a.a.createElement(Ne,null,!r["a"]&&a.a.createElement(Oe,{alt:"LeetCode",src:xe.a}),a.a.createElement(m,{value:this.stepProviderValue},this.isCurrentStep(d.SignIn)?a.a.createElement(S,null):a.a.createElement(_e,null)))};return t}(a.a.PureComponent);var Re=Object(s["c"])(Ie);var De=Object(h["default"])("div",{target:"e5i1odf0"})({maxWidth:"340px",margin:"0 auto"},"label:SignInContainer;");var Pe=t["a"]=function(e){return a.a.createElement(s["b"],{value:e},a.a.createElement(De,null,a.a.createElement(Re,null)))}},CbLq:function(e,t,n){"use strict";var s=n("D57K");var r=n("ERkP");var i=n.n(r);var a=n("7nmT");var o=n.n(a);var l=n("lXyA");var u=n.n(l);var c=n("O94r");var d=n.n(c);var f=n("H5qd");var p=n.n(f);var m=n("gd5h");var v=n("aWzz");var h=n.n(v);var g=n("//nZ");var b=n.n(g);var k=n("JFCy");var y=n("v31z");var S=n("5ZzG");var E=n("z/Ec");var C=n("3I8i");var _=n("H8sf");var w=n.n(_);var x=n("FiEK");var N=n.n(x);function O(e){if(!e){return{top:0,left:0,width:0,height:0}}var t=document.body.getBoundingClientRect();var n=e.getBoundingClientRect();return{top:n.top-t.top,left:n.left-t.left,width:n.width,height:n.height}}function I(e){var t=window.innerHeight;var n=document.body.scrollHeight-t;var i=Math.round(e.top-t/2+e.height/2);if(i<0){return 0}if(i>n){return n}return i}function R(e,t){if(N()(e)){return e}return parseInt(t,10)||0}function D(e){switch(true){case typeof e==="string":return O(document.querySelector(e));case e instanceof HTMLElement:return O(e);case e&&typeof e==="object":return b()(e,["top","left","width","height"]);default:return null}}function P(e,t){if(t===void 0){t=0}var n=e.top-t;var i=e.left-t;var r=e.width+t*2;var a=e.height+t*2;return{top:N()(n)?n:undefined,left:N()(i)?i:undefined,width:N()(r)?r:undefined,height:N()(a)?a:undefined}}function j(e,t){if(Object.values(e).every(function(e){return N()(e)})){return e}if(t instanceof HTMLElement){var n=t.style,i=n.left,r=n.top,a=n.width,o=n.height;return{top:R(e.top,r),left:R(e.left,i),width:R(e.width,a),height:R(e.height,o)}}return w()({top:0,left:0,width:0,height:0},e)}function F(r){if(r===void 0){r=window}var a=null;function o(){if(a){a.pause();a=null}}return function e(t){var n={top:window.scrollY};var i=I(t);if(n.top!==i){o();a=Object(C["a"])({targets:n,top:i,duration:600,easing:"easeInOutCubic",update:function(){r.scrollTo(n)}})}}}function T(e){var t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.body.scrollWidth,document.body.offsetWidth)+"px";return{boxShadow:"0 0 0 "+t+" "+e}}function M(e){var t=(e===void 0?{}:e).transparent;return"rgba(33, 33, 33, "+(t?0:.7)+")"}var L=n("I7au");var A=n.n(L);var U=function(t){s["__extends"](e,t);function e(e){var i=t.call(this,e)||this;i.beforeUpdateSpotlight=function(t){var n=i.spotlightContainerRef.current;if(n){n.dataset.isUpdatingSpotlight=true;if(t){Object.keys(t).forEach(function(e){n.style[e]=t[e]+"px"})}}};i.afterUpdatedSpotlight=function(){var e=i.spotlightContainerRef.current;if(e){e.dataset.isUpdatingSpotlight=false}i.props.afterUpdated()};i.spotlightAnime=null;i.fillAnime=null;i.processOfUpdate=[];i.spotlightStyleRef=r["createRef"]();i.spotlightContainerRef=r["createRef"]();i.scrollRectIntoView=F();return i}e.prototype.componentDidMount=function(){this.updateSpotlightIfNeed()};e.prototype.componentDidUpdate=function(e){this.updateSpotlightIfNeed(e)};e.prototype.updateSpotlightIfNeed=function(e){var t=this;if(e===void 0){e={}}if(this.props.isShow){var n=u()(this.beforeUpdateSpotlight);var i=[];if(this.props.target){var r=D(this.props.target);var a=P(r,this.props.padding);var o=j(a,this.spotlightStyleRef.current);var s={duration:e.isShow?300:0};n(o);i.push(this.updateSpotlightRect(o,s))}if(this.props.isFill!==e.isFill){n();i.push(this.updateFillStyle())}this.processOfUpdate=i;Promise.all(i).then(function(){if(t.processOfUpdate===i){t.afterUpdatedSpotlight()}})}};e.prototype.updateSpotlightRect=function(e,t){if(this.spotlightStyleRef.current){this.scrollRectIntoView(e);if(this.spotlightAnime){this.spotlightAnime.pause();this.spotlightAnime=null}this.spotlightAnime=Object(C["a"])(s["__assign"]({},e,{targets:this.spotlightStyleRef.current,easing:"easeInOutQuad",duration:300},t));return this.spotlightAnime.finished}return Promise.resolve()};e.prototype.updateFillStyle=function(){if(this.spotlightStyleRef.current){if(this.fillAnime){this.fillAnime.pause();this.fillAnime=null}this.fillAnime=Object(C["a"])({backgroundColor:M({transparent:!this.props.isFill}),targets:this.spotlightStyleRef.current,easing:"easeOutQuad",duration:300});return this.fillAnime.finished}return Promise.resolve()};e.prototype.render=function(){return r["createElement"](r["Fragment"],null,r["createElement"]("div",{ref:this.spotlightStyleRef,"data-is-show":this.props.isShow,"data-is-fill":this.props.isFill,className:A.a.background,style:T(M())}),r["createElement"]("div",{ref:this.spotlightContainerRef,"data-is-show":this.props.isShow,className:A.a.spotlight},this.props.children))};e.propTypes={padding:h.a.number,target:h.a.oneOfType([h.a.string,h.a.instanceOf(Element),h.a.shape({top:h.a.number,left:h.a.number,width:h.a.number,height:h.a.number})]),isShow:h.a.bool.isRequired,isFill:h.a.bool,afterUpdated:h.a.func};e.defaultProps={padding:0,target:null,isFill:false,afterUpdated:function(){}};return e}(r["PureComponent"]);var B=U;var V=n("zcDW");var q=n.n(V);var $={SHOW:"show",HIDE:"hide",WAITING:"waiting spotlight update"};var z=function(e,t,n){if(window.ga&&e)ga("send","event","feature-guide-"+e,t,"step-"+n)};var W=function(e){s["__extends"](t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;r.state={popoverStatus:$.HIDE};r.onNext=function(){z(r.props.name,"next",r.props.index);r.beforeUpdateStep().then(r.props.onNext)};r.onBack=function(){z(r.props.name,"back",r.props.index);r.beforeUpdateStep().then(r.props.onBack)};r.onSkip=function(){z(r.props.name,"skip",r.props.index);r.beforeUpdateStep().then(r.props.onSkip)};r.onFinish=function(){z(r.props.name,"finish",r.props.index);r.beforeUpdateStep().then(r.props.onFinish)};r.updatePopoverStatusIfNeed=function(e){var t=(e===void 0?{}:e).isSpotlightUpdated;var n=r.state.popoverStatus===$.HIDE||!!t;var i=typeof r.currentStep==="object"&&r.props.isShow;if(i){if(n){r.setState({popoverStatus:$.SHOW},function(){r.forceUpdate()})}}else if(r.state.popoverStatus===$.SHOW){r.setState({popoverStatus:$.HIDE})}};r.afterSpotlightUpdated=function(){r.updatePopoverStatusIfNeed({isSpotlightUpdated:true})};return r}t.prototype.componentDidMount=function(){this.updatePopoverStatusIfNeed()};t.prototype.componentDidUpdate=function(){this.updatePopoverStatusIfNeed()};Object.defineProperty(t.prototype,"currentStep",{get:function(){return this.props.steps[this.props.index]||{}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"spotlightProps",{get:function(){var e=["target","padding","isFill"];if(typeof this.currentStep==="function"){var t=this.currentStep;var n=t({onNext:this.onNext,onBack:this.onBack,onFinish:this.onFinish});return b()(n,s["__spread"](["children"],e))}if(this.currentStep.target){return b()(this.currentStep,e)}return null},enumerable:true,configurable:true});t.prototype.beforeUpdateStep=function(){var t=this;return new Promise(function(e){t.setState(function(){return{popoverStatus:$.WAITING}},e)})};t.prototype.renderSkipButton=function(){return i.a.createElement(y["a"],{size:k["e"],onClick:this.onSkip},"跳过")};t.prototype.renderBackButton=function(e){var t=e.disabled;return i.a.createElement(y["a"],{size:k["e"],onClick:this.onBack,disabled:t},i.a.createElement(S["a"],{type:"angle-left"}),"上一步")};t.prototype.renderNextButton=function(){return i.a.createElement(y["a"],{size:k["e"],type:"primary",onClick:this.onNext},"下一步",i.a.createElement(S["a"],{type:"angle-right"}))};t.prototype.renderFinishButton=function(){return i.a.createElement(y["a"],{size:k["e"],type:"primary",onClick:this.onFinish},"完成")};t.prototype.renderPopoverContent=function(){var e=this.props.index===0;var t=this.props.index===this.props.steps.length-1;var n=this.currentStep.canSkip!==false&&!t;return i.a.createElement("div",{className:q.a.popover},i.a.createElement("div",{className:q.a.message},this.currentStep.message),i.a.createElement("div",{className:q.a.controlArea},i.a.createElement("div",{className:q.a.left},n&&this.renderSkipButton()),i.a.createElement("div",{className:q.a.right},this.renderBackButton({disabled:e}),t?this.renderFinishButton():this.renderNextButton())))};t.prototype.render=function(){return i.a.createElement(E["a"],{visible:this.state.popoverStatus===$.SHOW,placement:this.currentStep.placement,align:this.currentStep.align,content:this.renderPopoverContent()},i.a.createElement(B,s["__assign"]({},this.spotlightProps,{isShow:this.props.isShow,afterUpdated:this.afterSpotlightUpdated})))};t.propTypes={index:h.a.number.isRequired,steps:h.a.arrayOf(h.a.oneOfType([h.a.func,h.a.shape({padding:h.a.number,target:h.a.oneOfType([h.a.string,h.a.instanceOf(Element),h.a.shape({top:h.a.number,left:h.a.number,width:h.a.number,height:h.a.number})]).isRequired,message:h.a.node.isRequired,placement:h.a.oneOf(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]),align:h.a.shape({points:h.a.arrayOf(h.a.oneOf(["t","b","c","tl","tr","bl","br"])),offset:h.a.arrayOf(h.a.number)}),canSkip:h.a.bool})])).isRequired,onNext:h.a.func.isRequired,onBack:h.a.func.isRequired,onSkip:h.a.func.isRequired,onFinish:h.a.func.isRequired,isShow:h.a.bool.isRequired,className:h.a.string,name:h.a.string};t.defaultProps={className:undefined,name:undefined};return t}(i.a.PureComponent);var H=W;var K=n("HWda");var Q=n.n(K);var G=p()(X||(X=s["__makeTemplateObject"](["\n  mutation completeFeatureGuide($guideType: FeatureGuideType!) {\n    completeFeatureGuide(guideType: $guideType) {\n      ok\n      error\n    }\n    markFeatureGuideFinished(guideType: $guideType) @client\n  }\n"],["\n  mutation completeFeatureGuide($guideType: FeatureGuideType!) {\n    completeFeatureGuide(guideType: $guideType) {\n      ok\n      error\n    }\n    markFeatureGuideFinished(guideType: $guideType) @client\n  }\n"])));var J=function(){};var Z=function(e){s["__extends"](t,e);function t(){var f=e!==null&&e.apply(this,arguments)||this;f.state={index:0,steps:[],isShow:false,onFinish:J,className:"",name:null,onUpdate:J};f.onNext=function(){f.setState(function(e){var t=e.index,n=e.steps;var i=Math.min(t+1,n.length-1);return{index:i}})};f.onBack=function(){f.setState(function(e){var t=e.index;var n=Math.max(t-1,0);return{index:n>0?n:0}})};f.onFinish=function(){f.hide();m["a"].mutate({mutation:G,variables:{guideType:f.state.name}});f.state.onFinish(f.state.index)};f.show=function(e){var t=e.index,n=t===void 0?0:t,i=e.steps,r=i===void 0?[]:i,a=e.className,o=e.onFinish,s=o===void 0?J:o,l=e.name,u=l===void 0?null:l,c=e.onUpdate,d=c===void 0?J:c;f.setState({index:n,steps:r,className:a,onFinish:s,isShow:true,name:u,onUpdate:d})};f.hide=function(){f.setState({isShow:false})};return f}t.prototype.componentDidUpdate=function(e,t){if(t.index!==this.state.index){this.state.onUpdate(this.state.steps[t.index],this.state.steps[this.state.index])}};t.prototype.render=function(){return r["createElement"](H,{className:d()(Q.a.featureGuider,this.state.className),isShow:this.state.isShow,index:this.state.index,steps:this.state.steps,onNext:this.onNext,onBack:this.onBack,onSkip:this.onFinish,onFinish:this.onFinish,name:this.state.name})};return t}(r["PureComponent"]);var Y=Z;var X;n.d(t,"a",function(){return ne});var ee=r["createRef"]();var te=u()(function(){return new Promise(function(e){var t=document.createElement("div");t.setAttribute("class","feature-guider-container");document.body.appendChild(t);o.a.render(r["createElement"](Y,{ref:ee}),t,function(){e(ee)})})});var ne={prepare:te,show:function(e){var t=e.index,n=e.steps,i=e.onFinish,r=e.className,a=e.name,o=e.onUpdate;return s["__awaiter"](this,void 0,void 0,function(){return s["__generator"](this,function(e){switch(e.label){case 0:return[4,te()];case 1:e.sent();if(ee.current){ee.current.show({index:t,steps:n,onFinish:i,className:r,name:a,onUpdate:o})}return[2]}})})},hide:function(){if(ee.current){ee.current.hide()}}}},ClFv:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createCnComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topicId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mentionedUserSlugs"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentCommentId"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createCnComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"topicId"},value:{kind:"Variable",name:{kind:"Name",value:"topicId"}}},{kind:"Argument",name:{kind:"Name",value:"mentionedUserSlugs"},value:{kind:"Variable",name:{kind:"Name",value:"mentionedUserSlugs"}}},{kind:"Argument",name:{kind:"Name",value:"parentCommentId"},value:{kind:"Variable",name:{kind:"Name",value:"parentCommentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"commentFields"},directives:[]}]}}]}}]}}],loc:{start:0,end:383}};i.loc.source={body:'#import "../../fragments/comment.graphql"\n\nmutation createCnComment(\n  $topicId: Int!\n  $content: String!\n  $mentionedUserSlugs: [String]\n  $parentCommentId: Int\n) {\n  createCnComment(\n    content: $content\n    topicId: $topicId\n    mentionedUserSlugs: $mentionedUserSlugs\n    parentCommentId: $parentCommentId\n  ) {\n    ok\n    error\n    comment {\n      ...commentFields\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(r[t]){return false}else{r[t]=true;return true}})}i.definitions=i.definitions.concat(a(n("KaeL").definitions));function o(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){o(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){o(e,t)})}if(e.definitions){e.definitions.forEach(function(e){o(e,t)})}}var s={};(function e(){i.definitions.forEach(function(e){if(e.name){var t=new Set;o(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function u(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=i;e.exports["createCnComment"]=u(i,"createCnComment")},Ctp7:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchAllLeetcodeTemplates"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allLeetcodePlaygroundTemplates"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"templateId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nameSlug"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:111}};n.loc.source={body:"query fetchAllLeetcodeTemplates {\n  allLeetcodePlaygroundTemplates {\n    templateId\n    name\n    nameSlug\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["fetchAllLeetcodeTemplates"]=o(n,"fetchAllLeetcodeTemplates")},ERUK:function(e,t,n){e.exports={setting:"setting__wAXR","setting-text":"setting-text__37UL",settingText:"setting-text__37UL","setting-select-container":"setting-select-container__Rzdt",settingSelectContainer:"setting-select-container__Rzdt","setting-select":"setting-select__3GpW",settingSelect:"setting-select__3GpW","setting-title":"setting-title__29mm",settingTitle:"setting-title__29mm","setting-description":"setting-description__25sA",settingDescription:"setting-description__25sA"}},FRvc:function(e,t,n){"use strict";var o=n("D57K");var i=n("ERkP");var S=n.n(i);var r=n("aWzz");var a=n.n(r);var E=n("r4SS");var l=n("kFJ8");var s=n("7nmT");var c=n.n(s);var d=n("z/Ec");var f=n("5ZzG");var u=n("mXJT");var p=n("nPqx");var m=n("qR8Y");var v=n("o44P");var h=n.n(v);var g=n("JFCy");var b=n("9xBf");var k=n("v31z");var y=n("XFkh");var C=n.n(y);var _=h.a.bind(C.a);var w=function(e){o["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props,t=e.icon,n=e.tooltipProps,i=e.disabled,r=o["__rest"](e,["icon","tooltipProps","disabled"]);return S.a.createElement(b["a"],o["__assign"]({},n),S.a.createElement("div",{className:_("tool-item",{disabled:i})},S.a.createElement(k["a"],o["__assign"]({type:"transparent",className:_("tool-button"),icon:t,disabled:i,size:g["c"]},r))))};return t}(i["PureComponent"]);var x=w;var N=n("g9F7");var O=n.n(N);var I=n("J7eU");var R=n.n(I);var D=n("ERUK");var P=n.n(D);var j={textmate:{value:"textmate",label:"textmate",dark:false},github:{value:"github",label:"github",dark:false},xcode:{value:"xcode",label:"xcode",dark:false},eclipse:{value:"eclipse",label:"eclipse",dark:false},monokai:{value:"monokai",label:"monokai",dark:true},blackboard:{value:"blackboard",label:"blackboard",dark:true},"solarized light":{value:"solarized light",label:"solarized light",dark:false},"solarized dark":{value:"solarized dark",label:"solarized dark",dark:true},"tomorrow-night-bright":{value:"tomorrow-night-bright",label:"tomorrow night",dark:true}};var F=function(){return[{key:"fontSize",storageKey:"global_font_size",title:"字体设置",description:"调整适合你的字体大小。",options:[12,13,14,15,16].map(function(e){return{value:e+"px",label:e+"px"}})},{key:"theme",storageKey:"global_theme",title:"主题设置",description:"切换不同的代码编辑器主题，选择适合你的语法高亮。",options:Object.values(j)},{key:"keyMap",storageKey:"global_key_map",title:"键位绑定",description:"想要练习使用 Vim 或者 Emacs？你可以在这里切换这些预设的键位绑定。",options:[{value:"sublime",label:"Standard"},{value:"vim",label:"Vim"},{value:"emacs",label:"Emacs"}]},{key:"tabSize",storageKey:"global_tab_size",title:"Tab 长度",description:"选择你想要的 Tab 长度，默认设置为4个空格。",options:[{value:2,label:2+"个空格"},{value:4,label:4+"个空格"},{value:8,label:8+"个空格"}]}]};var T=function(t){o["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.state={modalVisible:false};e.handleShowModal=function(){e.setState({modalVisible:true})};e.handleCloseModal=function(){e.setState({modalVisible:false})};return e}e.prototype.renderSelect=function(t,e,n,i){return S.a.createElement(u["a"],{wrapperCls:P.a.settingSelect,value:e,onChange:function(e){n({variables:{settingKey:t.key,settingValue:e}});i.set(t.storageKey,e)}},t.options.map(function(e){return S.a.createElement(u["a"].Option,{value:e.value,key:e.value},e.label)}))};e.prototype.renderSettingSelect=function(o){var s=this;return S.a.createElement(l["c"],{query:O.a},function(e){var a=e.data;return S.a.createElement(l["b"],{mutation:R.a,key:o.key},function(r){return S.a.createElement(m["a"],{keys:[o.storageKey]},function(e){var t=e.data,n=e.storage;var i=t&&t[o.storageKey]?t[o.storageKey]:a.codeEditor[o.key];return s.renderSelect(o,i,r,n)})})})};e.prototype.render=function(){var t=this;return S.a.createElement(S.a.Fragment,null,S.a.createElement(x,o["__assign"]({icon:"settings",tooltipProps:{title:"代码编辑器设置"},onClick:this.handleShowModal},this.props)),S.a.createElement(p["a"],{visible:this.state.modalVisible,onClose:this.handleCloseModal,onOk:this.handleCloseModal,title:"代码编辑器设置",width:600},S.a.createElement("div",null,F().map(function(e){return S.a.createElement("div",{key:e.key,className:P.a.setting},S.a.createElement("div",{className:P.a.settingText},S.a.createElement("div",{className:P.a.settingTitle},e.title),S.a.createElement("div",{className:P.a.settingDescription},e.description)),S.a.createElement("div",{className:P.a.settingSelectContainer},t.renderSettingSelect(e)))}))))};return e}(i["PureComponent"]);var M=T;var L=n("OSAl");var A=n.n(L);function U(u){var r;return r=function(e){o["__extends"](l,e);function l(){return e!==null&&e.apply(this,arguments)||this}l.addErrorHighlight=function(e,t){var n=u.codemirror;if(!n)return;var i=n.getDoc();if(!i)return;var r=l.matchErrorToLine(e),a=r.lineNum,o=r.lineText;u.errorLineHandle=i.getLineHandle(a);if(!u.errorLineHandle)return;t=t||n.getOption("theme");var s=t?j[t]&&j[t].dark:false;i.addLineClass(u.errorLineHandle,"background",s?A.a.errorLineHighlightDark:A.a.errorLineHighlightLight);i.addLineClass(u.errorLineHandle,"text",s?A.a.errorLineTextDark:A.a.errorLineTextLight);i.setGutterMarker(u.errorLineHandle,"CodeMirror-linenumbers",l.renderErrorIconWrapper(o,s))};l.removeErrorHighlight=function(){var e=u.codemirror;if(!e||!u.errorLineHandle)return;var t=e.getDoc();if(!t)return;t.setGutterMarker(u.errorLineHandle,"CodeMirror-linenumbers",null);t.removeLineClass(u.errorLineHandle,"background",A.a.errorLineHighlightDark);t.removeLineClass(u.errorLineHandle,"background",A.a.errorLineHighlightLight);t.removeLineClass(u.errorLineHandle,"text",A.a.errorLineTextDark);t.removeLineClass(u.errorLineHandle,"text",A.a.errorLineTextLight);u.errorLineHandle=null};l.prototype.render=function(){return S.a.createElement(u,o["__assign"]({},this.props))};return l}(u),r.renderErrorIconWrapper=function(e,t){if(t===void 0){t=false}var n=document.createElement("div");n.className=A.a.errorLineGutter;c.a.render(r.getErrorIconWithMessage(e,t),n);return n},r.getErrorIconWithMessage=function(e,t){if(t===void 0){t=false}return S.a.createElement(d["a"],{trigger:"hover",align:{offset:[-9,0]},overlayClassName:t?A.a.errorLineTooltipOverlayDark:A.a.errorLineTooltipOverlayLight,content:S.a.createElement("div",{className:t?A.a.errorLineTooltipContentDark:A.a.errorLineTooltipContentLight},e),placement:"bottomLeft"},S.a.createElement(f["a"],{type:"exclamation",className:A.a.errorLineIcon}))},r.matchErrorToLine=function(e){var t=e.toLowerCase().match(/^line\s\d+:?\s?/);var n=t?r.matchLineToLineNum(t[0]):null;var i=t?e.substring(t[0].length):e;return{lineText:i,lineNum:n}},r.matchLineToLineNum=function(e){return e.match(/\d+/)-1},r.renderErrorIcon=function(){return S.a.createElement("span",{className:A.a.errorLineIcon},"!")},r}var B=n("o7m2");var V=n("T5wd");var q=h.a.bind(A.a);var $=function(t){o["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.initialCode=e.props.defaultCode;return e}e.prototype.componentDidUpdate=function(e){var t=this.props,n=t.theme,i=t.onThemeChange;if(n&&n!==e.theme){i&&i(n)}};e.prototype.render=function(){var e;var t=this.props,n=t.disabled,i=t.lang,r=t.handleCodeChange,a=t.onEditorMount,o=t.onEditorWillUnmount,s=t.codeEditor;var l=q(A.a.container,(e={},e[A.a.disabled]=n,e));return S.a.createElement("div",{className:l,style:{fontSize:s.fontSize}},S.a.createElement(B["UnControlled"],{value:this.initialCode,options:{mode:Object(V["a"])(i),tabSize:s.tabSize,indentUnit:s.tabSize,theme:s.theme,keyMap:s.keyMap,autoCloseBrackets:true,styleActiveLine:true,foldGutter:true,lineNumbers:true,lineWrapping:true,indentWithTabs:false,highlightSelectionMatches:{style:"matchhighlight",wordsOnly:true},matchBrackets:true,lineSeparator:"\n"},editorDidMount:a,editorWillUnmount:o,onChange:r}))};return e}(S.a.PureComponent);var z=$;var W=function(e){o["__extends"](a,e);function a(){var i=e!==null&&e.apply(this,arguments)||this;i.handleCodeChange=function(e,t,n){i.props.onChange(n)};return i}a.getCodeMirror=function(){return a.codemirror};a.setCode=function(e){var t=a.codemirror;if(!t)return false;t.getDoc().setValue(e);return true};a.getCode=function(){var e=a.codemirror;if(!e)return"";return e.getValue()};a.setCursor=function(e,t){var n=a.codemirror;if(!n)return false;n.setCursor(e,t);return true};a.prototype.render=function(){var n=this;var e=this.props,i=e.onEditorMount,r=e.onEditorWillUnmount;return S.a.createElement(l["c"],{query:O.a},function(e){var t=e.data.codeEditor;return S.a.createElement(z,o["__assign"]({},n.props,{codeEditor:t,theme:t.theme,handleCodeChange:n.handleCodeChange,onEditorMount:function(e){a.codemirror=e;i()},onEditorWillUnmount:function(){a.codemirror=null;r()}}))})};return a}(S.a.PureComponent);var H=U(W);var K=n("1szP");var Q=n("8d7B");var G=n("xdqw");var J=n("AnWY");var Z=n("jRGA");var Y=n("ildc");var X=n("WG7P");var ee=n.n(X);var te=Y["a"]?"&#8984;":"CTRL";var ne=600;var ie=function(){return[{name:"执行代码",shortcuts:[[te,"'"]]},{name:"提交解答",shortcuts:[[te,"Enter"]]},{name:"增加一层缩进",shortcuts:[["TAB"],[te,"["]]},{name:"取消一层缩进",shortcuts:[["SHIFT","TAB"],[te,"]"]]},{name:"上下移动整行",shortcuts:[[te,"^","Up/Down"]]},{name:"剪切整行到剪切板",shortcuts:[[te,"X"]]},{name:"将选中区域改成批注或者取消批注",shortcuts:[[te,"/"]]},{name:"撤销",shortcuts:[[te,"Z"]]},{name:"重做",shortcuts:[[te,"SHIFT","Z"]]}]};var re=function(t){o["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.state={modalVisible:false};e.handleShowModal=function(){e.setState({modalVisible:true})};e.handleCloseModal=function(){e.setState({modalVisible:false})};return e}e.prototype.renderShortcutsList=function(){return ie().map(function(e){return S.a.createElement("div",{className:ee.a.shortcut,key:e.name},S.a.createElement("div",{className:ee.a.shortcutDescription},e.name),S.a.createElement("div",{className:ee.a.shortcutKeystrokes,dangerouslySetInnerHTML:{__html:e.shortcuts.map(function(e){return e.join(" + ")}).join(" or ")}}))})};e.prototype.render=function(){return S.a.createElement(i["Fragment"],null,S.a.createElement(x,o["__assign"]({icon:"information",tooltipProps:{title:"显示全部编辑器快捷键"},onClick:this.handleShowModal},this.props)),S.a.createElement(p["a"],{visible:this.state.modalVisible,onClose:this.handleCloseModal,onOk:this.handleCloseModal,title:"编辑器快捷键",width:ne},S.a.createElement("div",null,this.renderShortcutsList())))};return e}(i["PureComponent"]);var ae=re;var oe=n("ShE0");var se=n.n(oe);var le=function(t){o["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.state={modalVisible:false};e.handleConfirm=function(){e.props.onConfirm();e.hideModal()};e.showModal=function(){e.props.onToolButtonClicked();e.setState({modalVisible:true})};e.hideModal=function(){e.setState({modalVisible:false})};return e}e.prototype.renderConfirmFooter=function(){return S.a.createElement(S.a.Fragment,null,S.a.createElement(k["a"],{type:"default",onClick:this.hideModal},"取消"),S.a.createElement(k["a"],{type:"primary",onClick:this.handleConfirm,className:se.a.confirmBtn},"确定"))};e.prototype.render=function(){return S.a.createElement(S.a.Fragment,null,S.a.createElement(x,o["__assign"]({},this.props.toolButtonProps,{onClick:this.showModal})),S.a.createElement(p["a"],{visible:this.state.modalVisible,title:"确定?",onOk:this.handleConfirm,onClose:this.hideModal},this.props.children))};e.propTypes={onToolButtonClicked:a.a.func};e.defaultProps={onToolButtonClicked:function(){}};return e}(i["PureComponent"]);var ue=le;var ce=n("AIW4");var de=function(e){o["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props,t=e.show,n=e.disabled;if(!t)return null;var i=n?"Playground 无法使用":"使用 Playground 来调试";var r=this.props.playgroundFormData,a=r.lang,o=r.code,s=r.testcase,l=r.questionId;return S.a.createElement("div",null,S.a.createElement(ce["a"],{code:o,lang:a,testcase:s,questionId:l},function(e){return S.a.createElement(x,{icon:"debug",tooltipProps:{title:i},onClick:e,disabled:n})}))};t.propTypes={show:a.a.bool.isRequired,disabled:a.a.bool.isRequired,playgroundFormData:a.a.shape({lang:a.a.string,code:a.a.string.isRequired,testcase:a.a.string.isRequired,questionId:a.a.string.isRequired})};return t}(S.a.PureComponent);var fe=de;var pe=n("Mez9");var me=n.n(pe);var ve=function(){return Q["global"].siteRegion==="CN"};var he=h.a.bind(me.a);var ge=u["a"].Option;var be=350;var ke=900;var ye="seen-full-screen-tip";function Se(e){if(e<=be){return g["c"]}return g["a"]}var Ee=function(e){o["__extends"](t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;i.state={isLangInfoVisible:false,fullScreenTipVisible:false};i.storage=Object(G["a"])(J["b"]);i.dismissFullScreenTip=function(){i.storage.set(ye,true);i.setState({fullScreenTipVisible:false})};i.onFullScreenClick=function(){var e=i.props.toggleFullScreen;var t=i.state.fullScreenTipVisible;e();if(t){i.dismissFullScreenTip()}};i.onIconClick=function(){if(!i.props.disabled){i.setState({isLangInfoVisible:true,modalTitle:i.props.envInfo[i.props.lang][0],modalContent:i.props.envInfo[i.props.lang][1]})}};i.hideLangInfoModal=function(){i.setState({isLangInfoVisible:false})};i.onLastSubmittedClicked=function(){};i.onResetDefaultClicked=function(){};i.handleCloseModal=function(){return i.setState({isLangInfoVisible:false})};i.updateDataset=function(e){var t=e.width;return{size:Se(t)}};i.shouldShowPlaygroundBtn=function(){var e=i.props,t=e.langToValidPlayground,n=e.lang;if(!t)return false;return Z["a"].includes(n)};return i}t.prototype.componentDidMount=function(){var e=this.storage.get(ye,false);if(!e&&window.screen.availHeight<ke){this.setState({fullScreenTipVisible:true})}};t.prototype.renderConfirmFooter=function(){return S.a.createElement(k["a"],{type:"primary",theme:"light",onClick:this.handleCloseModal},"OK")};t.prototype.renderLangSelector=function(){var e;var t=this.props.langOptions.map(function(e){return S.a.createElement(ge,{key:e.slug,value:e.slug},e.lang)});return S.a.createElement(u["a"],{id:"lang-select",disabled:this.props.disabled,wrapperCls:he("select",(e={},e[me.a.langSelectorSticky]=this.props.isLangSelectorSticky,e)),value:this.props.lang,iconType:"information",iconMessage:"了解语言环境",size:g["e"],onChange:this.props.onLangChange,onIconClick:this.onIconClick},t)};t.prototype.renderFullScreenTip=function(){return S.a.createElement("div",{className:me.a.fullScreenTip},"当前浏览器显示区域较小，切换全屏模式效果更佳",S.a.createElement(k["a"],{type:"primary",size:g["c"],className:me.a.fullScreenTipBtn,onClick:this.dismissFullScreenTip},"知道了"))};t.prototype.renderFullScreenButton=function(){var e=this.props,t=e.disabled,n=e.toggleFullScreen,i=e.fullScreen;var r=this.state.fullScreenTipVisible;if(typeof n!=="function"){return null}var a=ve()&&!i?"top":"topRight";return S.a.createElement(d["a"],{content:this.renderFullScreenTip(),visible:r,align:{points:["tr","br"],offset:[12,-2]}},S.a.createElement("div",null,S.a.createElement(x,{disabled:t,icon:"fullscreen",tooltipProps:{title:i?"退出全屏":"全屏",placement:a,arrowPointAtCenter:true},onClick:this.onFullScreenClick,key:i})))};t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.getRecentSubmission,i=e.handleResetToDefaultClick,r=e.playgroundFormData,a=e.langToValidPlayground,o=e.lang;return S.a.createElement(S.a.Fragment,null,S.a.createElement(K["ResizeProvider"],null,S.a.createElement(K["ResizeConsumer"],{className:me.a.container,updateDatasetBySize:this.updateDataset},this.renderLangSelector(),S.a.createElement("div",{className:me.a.btns},S.a.createElement(ae,{disabled:t}),S.a.createElement(ue,{onToolButtonClicked:this.onLastSubmittedClicked,onConfirm:n,toolButtonProps:{disabled:t,icon:"code",tooltipProps:{title:"获取最近一次提交的代码"}}},"您将放弃所有更改并将当前代码替换为上次提交的代码!"),S.a.createElement(ue,{onToolButtonClicked:this.onResetDefaultClicked,onConfirm:i,toolButtonProps:{disabled:t,icon:"return",tooltipProps:{title:"还原到默认的代码模版"}}},"您将放弃所有更改并初始化代码！"),S.a.createElement(fe,{show:this.shouldShowPlaygroundBtn(),disabled:t||a&&!a[o],playgroundFormData:r}),S.a.createElement(M,{disabled:t}),this.renderFullScreenButton()))),S.a.createElement(p["a"],{visible:this.state.isLangInfoVisible,type:"info",title:this.state.modalTitle,onOk:this.hideLangInfoModal,onClose:this.hideLangInfoModal},S.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.modalContent}})))};t.propTypes={disabled:a.a.bool,lang:a.a.string,envInfo:a.a.object,langOptions:a.a.array,onLangChange:a.a.func,toggleFullScreen:a.a.func,handleResetToDefaultClick:a.a.func,getRecentSubmission:a.a.func,fullScreen:a.a.bool,playgroundFormData:a.a.object,langToValidPlayground:a.a.object,isLangSelectorSticky:a.a.bool};t.defaultProps={disabled:false,lang:"",envInfo:{},langOptions:[],onLangChange:function(){},toggleFullScreen:function(){},handleResetToDefaultClick:function(){},getRecentSubmission:function(){},fullScreen:false,playgroundFormData:{},langToValidPlayground:{},isLangSelectorSticky:false};return t}(S.a.PureComponent);var Ce=Ee;n.d(t,"a",function(){return _e});var _e=function(e){o["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props,t=e.className,n=e.disabled,i=e.lang,r=e.envInfo,a=e.defaultCode,o=e.langOptions,s=e.onCodeChange,l=e.onThemeChange,u=e.onLangChange,c=e.getRecentSubmission,d=e.handleResetToDefaultClick,f=e.toggleFullScreen,p=e.fullScreen,m=e.fetchingCode,v=e.onEditorMount,h=e.onEditorWillUnmount,g=e.langToValidPlayground,b=e.playgroundFormData,k=e.isLangSelectorSticky;var y=C.a.wrapper+" "+t;return S.a.createElement("div",{className:y},S.a.createElement(Ce,{disabled:n,lang:i,envInfo:r,langOptions:o,onLangChange:u,getRecentSubmission:c,handleResetToDefaultClick:d,toggleFullScreen:f,fullScreen:p,playgroundFormData:b,langToValidPlayground:g,isLangSelectorSticky:k}),m?S.a.createElement("div",{className:C.a.loaderContainer},S.a.createElement(E["a"],{width:580,height:200,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#fdfdfd",style:{width:580,height:200}},S.a.createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"100%",height:"20"}),S.a.createElement("rect",{x:"20",y:"60",rx:"3",ry:"3",width:"60%",height:"20"}),S.a.createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"60%",height:"20"}),S.a.createElement("rect",{x:"20",y:"140",rx:"3",ry:"3",width:"40%",height:"20"}),S.a.createElement("rect",{x:"20",y:"180",rx:"3",ry:"3",width:"40%",height:"20"}))):S.a.createElement(H,{disabled:n,defaultCode:a,onChange:s,onThemeChange:l,lang:i,onEditorMount:v,onEditorWillUnmount:h}))};t.propTypes={className:a.a.string,disabled:a.a.bool,lang:a.a.string,defaultCode:a.a.string,envInfo:a.a.object,langOptions:a.a.array,onCodeChange:a.a.func,onLangChange:a.a.func,toggleFullScreen:a.a.func,handleResetToDefaultClick:a.a.func,fetchingCode:a.a.bool,fullScreen:a.a.bool,playgroundFormData:a.a.object,onEditorMount:a.a.func,onEditorWillUnmount:a.a.func,isLangSelectorSticky:a.a.bool};t.defaultProps={className:"",disabled:false,defaultCode:"",lang:"",envInfo:{},langOptions:[],onCodeChange:function(){},onLangChange:function(){},toggleFullScreen:function(){},handleResetToDefaultClick:function(){},fetchingCode:false,fullScreen:false,playgroundFormData:{},onEditorMount:function(){},onEditorWillUnmount:function(){},isLangSelectorSticky:false};t.getCodeMirror=H.getCodeMirror;t.setCode=H.setCode;t.getCode=H.getCode;t.setCursor=H.setCursor;t.addErrorHighlight=H.addErrorHighlight;t.removeErrorHighlight=H.removeErrorHighlight;return t}(S.a.PureComponent)},HWda:function(e,t,n){e.exports={"feature-guider":"feature-guider__1X5U",featureGuider:"feature-guider__1X5U"}},HjlZ:function(e,t,n){"use strict";var i=n("D57K");var r=n("Jf4p");function a(e,t){return e?null:t}var o=function(){function e(e){if(e===void 0){e={}}this.config=e;this.currentContent=""}e.prototype.validate=function(e,t,n){this.currentContent=t;this.currentFormValue=n;if(this[e]){return this[e]()}else{return null}};e.prototype.noEmpty=function(){return a(this.currentContent.length>0,this.config.noEmptyErrorMessage||"此项为必填项")};e.prototype.minLength=function(e){if(e===void 0){e=-1}if(e>0){return a(this.currentContent.length>=e,this.config.minLengthErrorMessage||"长度需不小于 "+e+" 位")}else{return null}};e.prototype.minUtf8Bytes=function(e){if(e===void 0){e=-1}if(e>0){return a(Object(r["b"])(this.currentContent)>=e,this.config.minUtf8BytesErrorMessage||"内容过短")}else{return null}};e.prototype.maxUtf8Bytes=function(e){if(e===void 0){e=-1}if(e>0){return a(Object(r["b"])(this.currentContent)<=e,this.config.maxUtf8BytesErrorMessage||"内容过长")}else{return null}};return e}();var s=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.onBlur=function(){return null};t.prototype.onSubmit=function(){return this.noEmpty()};t.prototype.onChange=function(){return null};return t}(o);var l=s;var u=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.isValidFormat=function(){var e=/^[\dA-z_]*$/g.test(this.currentContent);return a(e,this.config.invalidFormatErrorMessage||"The username must contain only letters, numbers, "+"hyphens and underscores.")};t.prototype.onBlur=function(){return this.currentContent?this.onSubmit():null};t.prototype.onSubmit=function(){return this.noEmpty()||this.maxUtf8Bytes(this.config.maxUtf8Bytes)||this.minUtf8Bytes(this.config.minUtf8Bytes)||this.isValidFormat()};t.prototype.onChange=function(){return null};return t}(o);var c=u;var d=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.isValidFormat=function(){var e=!/\s{2}/.test(this.currentContent);return a(e,"昵称不合法")};t.prototype.onBlur=function(){return this.currentContent?this.onSubmit():null};t.prototype.onSubmit=function(){return this.noEmpty()||this.maxUtf8Bytes(this.config.maxUtf8Bytes)||this.minUtf8Bytes(this.config.minUtf8Bytes)||this.isValidFormat()};t.prototype.onChange=function(){return null};return t}(o);var f=d;var p=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.isValidFormat=function(){var e=/^[\x20-\x7E]{8,}$/g.test(this.currentContent);var t=/[a-z]+/i.test(this.currentContent)&&/\d+/i.test(this.currentContent);return a(e&&t,"密码须为不小于8位的数字及字母组合")};t.prototype.onBlur=function(){return this.currentContent?this.onSubmit():null};t.prototype.onSubmit=function(){return this.noEmpty()||this.isValidFormat()};t.prototype.onChange=function(){return null};return t}(o);var m=p;var v=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.onBlur=function(){return this.currentContent?this.onSubmit():null};t.prototype.onSubmit=function(){return this.noEmpty()||this.isSamePassword()};t.prototype.onChange=function(){return null};t.prototype.isSamePassword=function(){if(this.currentFormValue){var e=this.currentFormValue[this.config.passwordFieldName];return a(this.currentContent===e,this.config.notEqualErrorMessage||"The passwords you entered do not match.")}else{return null}};return t}(o);var h=v;var g=n("3PBV");var b=n.n(g);var k=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.isValidFormat=function(){var e=this.currentContent;var t=!b()({content:e},{content:{email:true}});return a(t,this.config.invalidErrorMessage||"Invalid email address")};t.prototype.onBlur=function(){if(!this.currentContent)return null;return this.isValidFormat()};t.prototype.onSubmit=function(){return this.noEmpty()||this.isValidFormat()};t.prototype.onChange=function(){return null};return t}(o);var y=k;var S=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.isValidFormat=function(){var e=!!Number(this.currentContent)&&this.currentContent.length===11;return a(e,this.config.invalidFormatErrorMessage||"错误的手机号码")};t.prototype.onBlur=function(){return this.currentContent?this.onSubmit():null};t.prototype.onSubmit=function(){return this.isValidFormat()};t.prototype.onChange=function(){return null};t.prototype.onSendCode=function(){return this.onSubmit()};return t}(o);var E=S;n.d(t,"h",function(){return _});n.d(t,"c",function(){return x});n.d(t,"e",function(){return N});n.d(t,"d",function(){return O});n.d(t,"a",function(){return I});n.d(t,"b",function(){return R});n.d(t,"g",function(){return D});n.d(t,"f",function(){return P});var C={spellCheck:false,autoCorrect:"off",autoCapitalize:"off"};var _=i["__assign"]({},C,{name:"login",autoComplete:"username",validation:new l({get noEmptyErrorMessage(){return"请输入手机号或邮箱"}})});var w=i["__assign"]({},C,{name:"username",autoComplete:"username",maxUtf8Bytes:30,validation:new c({minUtf8Bytes:3,get invalidFormatErrorMessage(){return"用户名只能包含字母，数字，下划线或者连词符"}})});var x=i["__assign"]({},w,{name:"nickname",autoComplete:"nickname",maxUtf8Bytes:30,validation:new f({minUtf8Bytes:3,get minLengthErrorMessage(){return"昵称过短"},get noEmptyErrorMessage(){return"请输入昵称"}})});var N=i["__assign"]({},C,{type:"password",name:"password",autoComplete:"password",validation:new l({get noEmptyErrorMessage(){return"请输入密码"}})});var O=i["__assign"]({},C,{type:"password",name:"password1",autoComplete:"new-password",validation:new m({get noEmptyErrorMessage(){return"请输入密码"}})});var I=i["__assign"]({},O,{name:"password2",validation:new h({passwordFieldName:O.name,get noEmptyErrorMessage(){return"请再次输入密码"},get notEqualErrorMessage(){return"两次输入的密码不一致"}})});var R=i["__assign"]({},C,{type:"email",name:"email",autoComplete:"username email",validation:new y({get noEmptyErrorMessage(){return"请输入邮箱"},get invalidErrorMessage(){return"请输入正确的邮箱"}})});var D=i["__assign"]({},C,{name:"phone",autoComplete:"username tel-national",validation:new E({get noEmptyErrorMessage(){return"请输入手机号"},get invalidFormatErrorMessage(){return"请输入正确的手机号"}})});var P=i["__assign"]({},C,{name:"phone_code",autoComplete:"off",validation:new l({get noEmptyErrorMessage(){return"请输入短信验证码"}})})},I7au:function(e,t,n){e.exports={background:"background__pOdT",spotlight:"spotlight__3l3e"}},Iver:function(e,t,n){"use strict";var f=n("D57K");var i=n("ERkP");var r=n.n(i);var a=n("H5qd");var o=n.n(a);var s=n("fQLH");var p=n("pN2L");var m=n("U3QC");var v=n("IMYO");var h=n("G2Mx");var g=n("mhnT");var l=n("gd5h");var b=n("4xXt");var k=n("d1/Z");var y=n("x4OZ");var u=o()(d||(d=f["__makeTemplateObject"](["\n  mutation setInterpretResult($interpretResult: InterpretResult) {\n    setInterpretResult(interpretResult: $interpretResult) @client\n  }\n"],["\n  mutation setInterpretResult($interpretResult: InterpretResult) {\n    setInterpretResult(interpretResult: $interpretResult) @client\n  }\n"])));var c=function(e){f["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.destroy$=new s["a"];t.setResult=function(e){l["a"].mutate({mutation:u,variables:{interpretResult:e}})};t.cleanInterpretResult=function(){t.destroy$.next();l["a"].mutate({mutation:u,variables:{interpretResult:{}}})};t.interpret=function(e){var i=e.questionSlug,r=e.questionId,a=e.code,o=e.lang,s=e.testcase,l=e.isTestMode,u=e.judgeType,c=e.updateStatus,d=e.disableDebug;return f["__awaiter"](t,void 0,void 0,function(){var t;var n=this;return f["__generator"](this,function(e){this.setResult({status:y["a"].PD});t={question_id:r,data_input:s,lang:o,typed_code:a,test_mode:l,judge_type:u};return[2,Object(b["a"])(i,t,c).pipe(Object(m["a"])(function(e){if("error"in e){n.setResult({error:e.error})}else{n.setResult(f["__assign"]({},e,{status:e.status,questionId:r,code:a,testcase:s,langKey:o,disableDebug:d}))}}),Object(v["a"])(function(e){n.setResult({error:Object(k["a"])(e)});return Object(p["a"])({networkErrorStatus:e})}),Object(h["a"])(1),Object(g["a"])(this.destroy$)).toPromise()]})})};return t}t.prototype.componentWillUnmount=function(){this.destroy$.complete()};t.prototype.render=function(){var e=this.props,t=e.children,n=f["__rest"](e,["children"]);return t(f["__assign"]({interpret:this.interpret,setInterpretResult:this.setResult,cleanInterpretResult:this.cleanInterpretResult},n))};return t}(r.a.PureComponent);t["a"]=c;var d},J1Z0:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"topicCommentCount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topicId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topic"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"topicId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commentCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:96}};n.loc.source={body:"query topicCommentCount($topicId: Int!) {\n  topic(id: $topicId) {\n    id\n    commentCount\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["topicCommentCount"]=o(n,"topicCommentCount")},J7eU:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"editSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"settingKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"settingValue"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"editSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"settingKey"},value:{kind:"Variable",name:{kind:"Name",value:"settingKey"}}},{kind:"Argument",name:{kind:"Name",value:"settingValue"},value:{kind:"Variable",name:{kind:"Name",value:"settingValue"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:147}};n.loc.source={body:"mutation editSetting($settingKey: String!, $settingValue: String!) {\n  editSetting(settingKey: $settingKey, settingValue: $settingValue) @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["editSetting"]=o(n,"editSetting")},KQty:function(e,t,n){"use strict";var i=n("ERkP");var r=n.n(i);var a=n("SZui");var o=n("D57K");var s=n("LJ7e");var l=n("5ZzG");var u=n("SwI/");var c=s["default"].div({padding:"0 0 15px",svg:{display:"block",margin:"0 auto",width:"190px"}},"label:WeChatModalBody;");var d=Object(s["default"])("ul",{target:"e5i1odf0"})({display:"flex",li:{marginRight:"15px",a:{color:u["a"].dark4}}},"label:CnLicensingWrapper;");var f=Object(s["default"])("ul",{target:"e5i1odf1"})({display:"flex",alignItems:"center","li:not(:first-of-type)":{marginLeft:"10px"},svg:{fontSize:"22px",cursor:"pointer",transition:"color .2s ease"}},"label:SocialMediaWrapper;");var p=Object(s["default"])(function(e){return r.a.createElement(l["a"],o["__assign"]({type:"zhihu_outline"},e))},{target:"e5i1odf2"})({"&:hover":{color:"#3082e1"}},"label:ZhiHuIcon;");var m=Object(s["default"])(function(e){return r.a.createElement(l["a"],o["__assign"]({type:"weixin_outline",role:"button"},e))},{target:"e5i1odf3"})({cursor:"pointer","&:hover":{color:"#6abb11"}},"label:WeChatIcon;");var v=Object(s["default"])(function(e){return r.a.createElement(l["a"],o["__assign"]({type:"toutiao_outline"},e))},{target:"e5i1odf4"})({"&:hover":{color:"#e53935"}},"label:TouTiaoIcon;");var h=Object(s["default"])("div",{target:"e5i1odf5"})({color:u["a"].dark4,marginRight:"15px"},"label:CopyrightWrapper;");var g=Object(s["default"])("ul",{target:"e5i1odf6"})({padding:0,margin:0,display:"flex",a:{color:u["a"].dark2,margin:"0 10px"},li:{alignItems:"center",display:"flex","&:not(:nth-last-child(1))::after":{borderRight:"1px solid "+u["a"].dark7,content:'" "',height:"10px"}}},"label:FooterNavWrapper;");var b=function(){return r.a.createElement(h,null,"© "+(new Date).getFullYear()+" 领扣网络（上海）有限公司版权所有")};var k=function(e){o["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props.navItems;var t=e.map(function(e){var t=e.text;var n=typeof e.route==="string"?e.route:e.route();return r.a.createElement("li",{key:e.key},r.a.createElement("a",{href:n},t))});return r.a.createElement("nav",null,r.a.createElement(g,null,t))};return t}(i["PureComponent"]);var y=n("sYqU");var S=[{key:"help-center",text:"帮助中心",route:y["a"].support},{key:"join-us",text:"加入我们",route:y["a"].joinUs},{key:"tos",text:"使用条款",route:y["a"].tos},{key:"privacy",text:"隐私政策",route:y["a"].privacyPolicy},{key:"region",text:"切换地区",route:y["a"].region}];var E=n("+1CV");var C=n("nPqx");var _=function(t){o["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.state={visible:false};e.handleWeChatClicked=function(){return e.setState({visible:true})};e.handleWeChatClosed=function(){return e.setState({visible:false})};return e}e.prototype.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.zhihu.com/org/ling-kou-leetcode/activities"},r.a.createElement(p,null))),r.a.createElement("li",null,r.a.createElement(m,{onClick:this.handleWeChatClicked})),r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.toutiao.com/c/user/77230624128/#mid=1585093539556366"},r.a.createElement(v,null)))),this.renderWeChatModal())};e.prototype.renderWeChatModal=function(){return r.a.createElement(C["a"],{visible:this.state.visible,onClose:this.handleWeChatClosed,maskClosable:true,hasFooter:false,title:"力扣官方微信公众号"},r.a.createElement(c,null,r.a.createElement(E["QRCode"],{value:"http://weixin.qq.com/r/ZDj4-PXE6D2UKbGfb23g",level:"Q"})))};return e}(i["PureComponent"]);var w=[{label:"沪ICP备17051546号",link:"http://www.miitbeian.gov.cn"},{label:"沪公网安备31011502007040号",link:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011502007040"},{label:"上海市互联网违法和不良信息举报中心",link:"http://www.shjbzx.cn/"},{label:"中国互联网违法和不良信息举报中心",link:"http://report.12377.cn:13225/toreportinputNormal_anis.do"}];var x=function(){return r.a.createElement("div",null,r.a.createElement(d,null,w.map(function(e){return r.a.createElement("li",{key:e.label},r.a.createElement("a",{href:e.link},e.label))})))};var N=n("IDXw");var O;var I=Object(s["default"])("footer",{target:"e5i1odf0"})((O={margin:"0 auto",maxWidth:N["a"],minWidth:N["b"],width:"100%"},O["@media (max-width: "+N["a"]+")"]={padding:"0 20px"},O["a:hover"]={textDecoration:"underline"},O.ul={listStyle:"none",padding:"0",marginBottom:"0"},O),"label:Footer;");var R=Object(s["default"])("div",{target:"e5i1odf1"})({fontSize:"12px",padding:"15px 20px",width:"100%"},"label:Wrapper;");var D=Object(s["default"])("div",{target:"e5i1odf2"})({display:"flex",justifyContent:"space-between",marginBottom:"10px"},"label:Main;");var P=Object(s["default"])("div",{target:"e5i1odf3"})({},"label:License;");var j=Object(s["default"])("div",{target:"e5i1odf4"})({display:"flex"},"label:Items;");n.d(t,"a",function(){return F});var F=function(e){var t=e.id;if(a["a"]){return null}else{return r.a.createElement(I,{id:t},r.a.createElement(R,null,r.a.createElement(D,null,r.a.createElement(j,null,r.a.createElement(b,null),r.a.createElement(k,{navItems:S})),r.a.createElement(_,null)),r.a.createElement(P,null,r.a.createElement(x,null))))}}},KaeL:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"commentFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommentRelayNode"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numChildren"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEdited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"post"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"voteUpCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creationDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updationDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"voteStatus"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDiscussAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userAvatar"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"realName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reputation"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"mentionedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nickName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:418}};n.loc.source={body:"fragment commentFields on CommentRelayNode {\n  id\n  numChildren\n  isEdited\n  post {\n    id\n    content\n    voteUpCount\n    creationDate\n    updationDate\n    status\n    voteStatus\n    author {\n      username\n      isDiscussAdmin\n      profile {\n        userSlug\n        userAvatar\n        realName\n        reputation\n      }\n    }\n    mentionedUsers {\n      key\n      username\n      userSlug\n      nickName\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}e.exports=n},LNyY:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchNotifications"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notifications"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notificationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creationDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actioned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notificationData"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:379}};n.loc.source={body:"query fetchNotifications($first: Int!, $after: String) {\n  notifications(first: $first, after: $after) {\n    edges {\n      node {\n        id\n        notificationId\n        creationDate\n        actioned\n        notificationData {\n          id\n          content\n          type\n          metadata\n        }\n      }\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["fetchNotifications"]=o(n,"fetchNotifications")},Mez9:function(e,t,n){e.exports={wrapper:"wrapper__3ojV","tool-item":"tool-item__2shS",toolItem:"tool-item__2shS","tool-button":"tool-button__1ql_",toolButton:"tool-button__1ql_","loader-container":"loader-container__18Qm",loaderContainer:"loader-container__18Qm",disabled:"disabled__27jf",container:"container__1tuS",select:"select__14Q2",btns:"btns__2jdQ","lang-selector-sticky":"lang-selector-sticky__26A1",langSelectorSticky:"lang-selector-sticky__26A1","lang-info-modal-footer":"lang-info-modal-footer__35G9",langInfoModalFooter:"lang-info-modal-footer__35G9","full-screen-tip":"full-screen-tip__1NYT",fullScreenTip:"full-screen-tip__1NYT","full-screen-tip-btn":"full-screen-tip-btn__3w3D",fullScreenTipBtn:"full-screen-tip-btn__3w3D"}},OOFc:function(e,t,n){"use strict";var i=n("++M8");var r=n.n(i);if(n.o(i,"CONFIRM_PASSWORD"))n.d(t,"CONFIRM_PASSWORD",function(){return i["CONFIRM_PASSWORD"]});if(n.o(i,"EMAIL"))n.d(t,"EMAIL",function(){return i["EMAIL"]});if(n.o(i,"Input"))n.d(t,"Input",function(){return i["Input"]});if(n.o(i,"NEW_NICKNAME"))n.d(t,"NEW_NICKNAME",function(){return i["NEW_NICKNAME"]});if(n.o(i,"NEW_PASSWORD"))n.d(t,"NEW_PASSWORD",function(){return i["NEW_PASSWORD"]});if(n.o(i,"PASSWORD"))n.d(t,"PASSWORD",function(){return i["PASSWORD"]});if(n.o(i,"PHONE_CODE"))n.d(t,"PHONE_CODE",function(){return i["PHONE_CODE"]});if(n.o(i,"PHONE_NUMBER"))n.d(t,"PHONE_NUMBER",function(){return i["PHONE_NUMBER"]});if(n.o(i,"USERNAME"))n.d(t,"USERNAME",function(){return i["USERNAME"]});var a=n("HjlZ");n.d(t,"CONFIRM_PASSWORD",function(){return a["a"]});n.d(t,"EMAIL",function(){return a["b"]});n.d(t,"NEW_NICKNAME",function(){return a["c"]});n.d(t,"NEW_PASSWORD",function(){return a["d"]});n.d(t,"PASSWORD",function(){return a["e"]});n.d(t,"PHONE_CODE",function(){return a["f"]});n.d(t,"PHONE_NUMBER",function(){return a["g"]});n.d(t,"USERNAME",function(){return a["h"]});var o=n("V5/1");n.d(t,"Input",function(){return o["a"]});var s=n("RANX");n.d(t,"Form",function(){return s["a"]})},OSAl:function(e,t,n){e.exports={container:"container__1XfD",disabled:"disabled__14Hj","light-theme":"light-theme__2bJy",lightTheme:"light-theme__2bJy","CodeMirror-code":"CodeMirror-code__3eF2",codeMirrorCode:"CodeMirror-code__3eF2","cm-matchhighlight":"cm-matchhighlight__x-Yg",cmMatchhighlight:"cm-matchhighlight__x-Yg","dark-theme":"dark-theme__2Lnd",darkTheme:"dark-theme__2Lnd","error-line-highlight-dark":"error-line-highlight-dark__2Jm-",errorLineHighlightDark:"error-line-highlight-dark__2Jm-","error-line-text-dark":"error-line-text-dark__A4P4",errorLineTextDark:"error-line-text-dark__A4P4","error-line-highlight-light":"error-line-highlight-light__2gnc",errorLineHighlightLight:"error-line-highlight-light__2gnc","error-line-text-light":"error-line-text-light__1Ug8",errorLineTextLight:"error-line-text-light__1Ug8","error-line-gutter":"error-line-gutter__3UVz",errorLineGutter:"error-line-gutter__3UVz","error-line-icon":"error-line-icon__1Bl8",errorLineIcon:"error-line-icon__1Bl8","error-line-tooltip-content-light":"error-line-tooltip-content-light__1H__",errorLineTooltipContentLight:"error-line-tooltip-content-light__1H__","error-line-tooltip-content-dark":"error-line-tooltip-content-dark__3yL7",errorLineTooltipContentDark:"error-line-tooltip-content-dark__3yL7","error-line-tooltip-overlay-light":"error-line-tooltip-overlay-light__3ud_",errorLineTooltipOverlayLight:"error-line-tooltip-overlay-light__3ud_","error-line-tooltip-overlay-dark":"error-line-tooltip-overlay-dark__3wjQ",errorLineTooltipOverlayDark:"error-line-tooltip-overlay-dark__3wjQ"}},R12U:function(e,t,n){"use strict";var i=n("SZui");var u=n("D57K");var r=n("ERkP");var c=n.n(r);var a=n("zCf4");var o=n("9xBf");var s=n("DoiJ");var l=n("5oqr");var d=n("b69p");var f=n("fQLH");var p=n("U3QC");var m=n("mhnT");var v=n("Klpt");var h=n("phD9");var g=n("nsfC");var b=n("8d7B");var k=n("Y7lc");var y=n("2srY");var S=n.n(y);var E=n("uZih");var C=n.n(E);var _=n("xdqw");var w=n("PBca");var x=n("kFJ8");var N=n("qrFu");var O=function(){return{"discuss.new_comment":{title:"新评论",icon:"chat"},"discuss.question_comment_upvoted":{title:"点赞",icon:"chat"},"discuss.delete_post":{title:"评论已被删除",icon:"exclamation"},"discuss.request_update_post":{title:"需要更改评论",icon:"exclamation"},"announcements.contest":{title:"竞赛",icon:"trophy"},"non_configurable.contribution_award":{title:"贡献奖励",icon:"leetcoin"},"updates.global_ranking":{title:"排名",icon:"trending"},"kf5.webhook_notification":{title:"支持中心",icon:"mic"},"jobs.notification":{title:"企业握手邀请 🎉",icon:"handshake"},"columns.article_upvoted":{title:"文章点赞",icon:"chat"},"columns.comment_upvoted":{title:"评论点赞",icon:"chat"},"columns.article_commented_on":{title:"新评论",icon:"chat"},"columns.mentioned":{title:"提到了你",icon:"chat"},"score.leetcoin_awarded":{title:"力扣积分奖励",icon:"leetcoin"}}};var I=10;var R=n("LNyY");var D=n.n(R);var P=n("DuHN");var j=n("IJu9");var F=n("T1n1");var T=n.n(F);var M=n("e2SA");var L=n.n(M);function A(e,t){return e({variables:t,updateQuery:function(e,t){var n=t.fetchMoreResult;return u["__assign"]({},e,{notifications:u["__assign"]({},n.notifications,{edges:u["__spread"](e.notifications.edges,n.notifications.edges)})})}})}function U(){return Object(k["a"])({mutation:T.a}).pipe(Object(p["a"])(function(e){var t=e.data;if(t&&t.openNotifications&&!t.openNotifications.ok){P["a"].error(t.openNotifications.error)}})).toPromise()}var B=function(e){return Object(k["a"])({mutation:L.a,variables:e}).pipe(Object(p["a"])(function(e){var t=e.data;if(t&&t.performNotificationAction&&!t.performNotificationAction.ok){P["a"].error(t.performNotificationAction.error)}})).toPromise()};var V=n("5ZzG");var q=n("r4SS");var $=n("LJ7e");var z=n("SwI/");var W="74px";var H=Object($["default"])(function(e){var t=e.className;return c.a.createElement("div",{className:t},c.a.createElement(q["a"],{height:74,width:460,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#fdfdfd"},c.a.createElement("rect",{x:"0",y:"15",rx:"3",ry:"3",width:"180",height:"15"}),c.a.createElement("rect",{x:"0",y:"44",rx:"3",ry:"3",width:"430",height:"15"})))},{target:"e5i1odf0"})({padding:"0 25px",width:"100%",height:W,pointerEvents:"none"},"label:NotificationItemSkeleton;");var K=$["default"].a({position:"absolute",top:"0",left:"0",right:"0",bottom:"0",margin:"0 !important",padding:"0 !important"},function(e){var t=e.isReaded;return{boxShadow:t?undefined:"inset 1px 0 0 0 "+z["a"].yellow7}},"label:NotificationItemLink;");var Q=$["default"].div({display:"block",transition:"box-shadow 0.18s ease-in-out",color:z["a"].dark2,padding:"0 20px",pointerEvents:"none",a:{pointerEvents:"auto"}},"label:NotificationItemContainerWrapper;");var G=$["default"].div({minHeight:W,padding:"16px 0 12px 0",position:"relative","a, a:visited, a:focus":{color:z["a"].dblue6,"&:hover, &:active":{textDecoration:"underline"}}},"label:NotificationItemContainer;");var J=$["default"].div({display:"flex",justifyContent:"space-between",lineHeight:"18px",height:"18px",marginBottom:"7px"},"label:NotificationHeader;");var Z=$["default"].div({color:z["a"].dark6},"label:NotificationTitle;");var Y=$["default"].div({fontSize:"12px",color:z["a"].dark5},"label:NotificationDate;");var X=Object($["default"])(function(e){return c.a.createElement(V["a"],u["__assign"]({},e))},{target:"e5i1odf1"})({color:z["a"].yellow4,fontSize:"18px",marginRight:"8px"},"label:NotificationIcon;");var ee=$["default"].div({lineHeight:"20px"},"label:NotificationContent;");var te=n("sYqU");var ne=n("60w7");var ie=function(e){u["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props,t=e.isReaded,n=e.notification;return c.a.createElement(c.a.Fragment,null,c.a.createElement(K,{isReaded:t,href:n.notificationData.metadata.link||te["a"].notifications}),c.a.createElement(Q,null,c.a.createElement(G,null,c.a.createElement(J,null,this.renderTitle(),this.renderDate()),this.renderContent())))};t.prototype.renderTitle=function(){var e=this.props.notification.notificationData;var t=O()[e.type];return c.a.createElement(Z,null,c.a.createElement(X,{type:t.icon}),t.title)};t.prototype.renderDate=function(){var e=this.props.notification.creationDate;var t=b["global"].siteRegion==="CN"?"zh-cn":"en";return c.a.createElement(Y,null,e&&Object(ne["c"])(e,t))};t.prototype.renderContent=function(){var e=this.props.notification;return c.a.createElement(ee,{dangerouslySetInnerHTML:{__html:e.notificationData.content}})};return t}(r["Component"]);var re=n("fsDi");var ae=$["default"].div({position:"absolute",top:"-6px",left:"410px",borderWidth:"0 8px 6px",borderColor:"transparent",borderBottomColor:"white",borderStyle:"solid"},"label:NotificationMenuArrow;");var oe=$["default"].div({maxHeight:"330px",overflowX:"hidden",overflowY:"auto",overscrollBehavior:"contain"},function(e){var t=e.isLoading;return t?{height:"100px",display:"flex",alignItems:"center",justifyContent:"center"}:undefined},"label:NotificationScrollContainer;");var se=$["default"].div({background:"white",width:"500px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:"4px",overflow:"hidden",WebkitFontSmoothing:"antialiased"},"label:NotificationMenuContainer;");var le=$["default"].div({height:"50px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",borderTop:"1px solid "+z["a"].dark9},"label:NotificationMenuBar;");var ue=$["default"].a({fontSize:"20px",color:z["a"].dblue2,transition:"color 0.18s ease-in-out","&:active, &:focus, &:hover, &:visited":{textDecoration:"none"},"&:hover":{color:z["a"].dblue6}},"label:NotificationSettingsLink;");var ce=$["default"].a({color:z["a"].dblue4,"&:active, &:focus, &:hover, &:visited":{textDecoration:"none"},"&:hover":{color:z["a"].dblue6}},"label:NotificationListLink;");var de=Object($["default"])(function(e){return c.a.createElement("div",u["__assign"]({},e),c.a.createElement(re["a"],null))},{target:"e5i1odf0"})({background:"white"},"label:NotificationMenuLoading;");var fe=Object($["default"])(v["a"].Menu,{target:"e5i1odf1"})({padding:"0 !important",overflow:"hidden",borderBottomLeftRadius:"0",borderBottomRightRadius:"0","& > .ant-dropdown-menu-item":{height:"auto",background:"white",padding:"0 !important","&.ant-dropdown-menu-item-active":{background:"linear-gradient(180deg, white, "+z["a"].dark10+")"}},"& > li":{display:"block",padding:"0 20px",position:"relative"}},"label:StyledDropdownMenu;");var pe=Object($["default"])(v["a"].Menu.Item,{target:"e5i1odf2"})({"&:not(:last-of-type)":{borderBottom:"1px solid "+z["a"].dark8}},"label:StyledDropdownMenuItem;");var me=Object($["default"])(function(e){return c.a.createElement("div",u["__assign"]({},e),"暂无通知")},{target:"e5i1odf3"})({height:W,display:"flex",justifyContent:"center",alignItems:"center"},"label:NoNotificationsPlaceholder;");var ve=100;var he=function(e){u["__extends"](t,e);function t(){var s=e!==null&&e.apply(this,arguments)||this;s.menuContainer=c.a.createRef();s.lastFetchedEndCursor=null;s.handleItemClicked=function(e){var t=e.key;return B({id:Number(t)})};s.handleScroll=function(e){var t=e.currentTarget;var n=t.scrollTop,i=t.scrollHeight,r=t.clientHeight;var a=i-r;var o=a-ve;if(n>o&&s.canFetchMore){s.lastFetchedEndCursor=s.props.pageInfo.endCursor;A(s.props.fetchMore,{first:I,after:s.props.pageInfo.endCursor})}};return s}Object.defineProperty(t.prototype,"canFetchMore",{get:function(){var e=this.props.pageInfo,t=e.endCursor,n=e.hasNextPage;return this.lastFetchedEndCursor!==t&&n},enumerable:true,configurable:true});t.prototype.render=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ae,null),c.a.createElement(se,{ref:this.menuContainer},this.renderNotificationMenu(),c.a.createElement(le,null,c.a.createElement(ue,{href:"/profile/notifications/"},c.a.createElement(V["a"],{type:"settings"})),c.a.createElement(ce,{href:"/notifications/"},"查看全部"))))};t.prototype.renderNotificationMenu=function(){var e=this.props,t=e.isLoading,n=e.pageInfo;var i=C()(this.props,["isLoading","pageInfo","fetchMore","numUnread","notifications"]);return c.a.createElement(oe,{isLoading:t,onScroll:this.handleScroll},t?c.a.createElement(de,null):c.a.createElement(fe,u["__assign"]({},i,{onClick:this.handleItemClicked}),this.renderNotifications(),n.hasNextPage&&c.a.createElement(pe,null,c.a.createElement(H,null))))};t.prototype.renderNotifications=function(){var e=this.props,t=e.notifications,n=e.numUnread;if(t.length>0){return t.map(function(e,t){return c.a.createElement(pe,{key:e.notificationId},c.a.createElement(ie,{notification:e,isReaded:t>=n}))})}else{return c.a.createElement(me,null)}};return t}(c.a.PureComponent);var ge=function(e){u["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.state={numUnreadBeforeShowing:0};t.afterShowNotificationMenu=function(){return u["__awaiter"](t,void 0,void 0,function(){return u["__generator"](this,function(e){switch(e.label){case 0:if(!this.state.numUnreadBeforeShowing)return[3,4];if(!this.props.isDataInvalid)return[3,2];return[4,this.props.refetch()];case 1:e.sent();e.label=2;case 2:return[4,U()];case 3:e.sent();this.props.handleReadNotifications();e.label=4;case 4:return[2]}})})};t.handleVisibilityChange=function(e){if(e===void 0){e=false}if(e){t.setState({numUnreadBeforeShowing:t.props.numUnread},t.afterShowNotificationMenu)}else{t.setState({numUnreadBeforeShowing:0})}};return t}t.prototype.render=function(){return c.a.createElement(v["a"],{trigger:["click"],align:{points:["tr","br"],offset:[71,12]},overlay:this.renderNotificationMenu(),onVisibleChange:this.handleVisibilityChange},this.props.children)};t.prototype.renderNotificationMenu=function(){return c.a.createElement(he,{isLoading:this.props.isLoading,notifications:this.props.notifications,numUnread:this.state.numUnreadBeforeShowing,pageInfo:this.props.pageInfo,fetchMore:this.props.fetchMore})};return t}(c.a.PureComponent);function be(e){return e===N["c"].loading||e===N["c"].refetch}function ke(e){if(e&&e.notifications){var t=e.notifications,n=t.edges,i=t.pageInfo;var r=n.map(function(e){return u["__assign"]({},e.node,{notificationData:u["__assign"]({},e.node.notificationData,{metadata:JSON.parse(e.node.notificationData.metadata)})})});return{pageInfo:i,notifications:r}}else{return{notifications:[],pageInfo:{endCursor:null,hasNextPage:false}}}}var ye=function(l){return c.a.createElement(x["c"],{query:D.a,notifyOnNetworkStatusChange:true,variables:{first:I}},function(e){var t=e.networkStatus,n=e.data,i=e.refetch,r=e.fetchMore;var a=ke(n),o=a.notifications,s=a.pageInfo;return c.a.createElement(ge,u["__assign"]({isLoading:be(t),notifications:o,pageInfo:s,refetch:i,fetchMore:r},l))})};var Se=n("VF98");var Ee=n("w1US");var Ce=$["default"].div({position:"relative"},"label:Container;");var _e=$["default"].div({position:"absolute",left:"12px",top:"-3px",background:z["a"].red4,border:"2px solid "+z["a"].white,borderRadius:"8px",color:z["a"].white,display:"inline-block",fontFamily:"FetteMittelschrift, sans-serif",fontSize:"12px",lineHeight:"12px",padding:"0 4px",textAlign:"center",pointerEvents:"none"},function(e){var t=e.isShow;return{opacity:t?1:0,transition:"opacity 0.18s ease-in-out"}},"label:Counter;");var we=function(e){u["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.componentDidMount=function(){Object(Ee["c"])(this.props.numUnread)};t.prototype.componentDidUpdate=function(e){if(e.numUnread!==this.props.numUnread){Object(Ee["c"])(this.props.numUnread)}};t.prototype.render=function(){var e=this.props,t=e.numUnread,n=u["__rest"](e,["numUnread"]);return c.a.createElement(Ce,null,c.a.createElement(Se["Helmet"],{defer:false},c.a.createElement("link",{rel:"icon",type:"image/png",href:"/favicon"+(t?"-notification":"")+"-16x16.png",sizes:"16x16"}),c.a.createElement("link",{rel:"icon",type:"image/png",href:"/favicon"+(t?"-notification":"")+"-32x32.png",sizes:"32x32"}),c.a.createElement("link",{rel:"icon",type:"image/png",href:"/favicon"+(t?"-notification":"")+"-96x96.png",sizes:"96x96"}),c.a.createElement("link",{rel:"icon",type:"image/png",href:"/favicon"+(t?"-notification":"")+"-160x160.png",sizes:"160x160"}),c.a.createElement("link",{rel:"icon",type:"image/png",href:"/favicon"+(t?"-notification":"")+"-192x192.png",sizes:"192x192"})),c.a.createElement(V["a"],u["__assign"]({type:"notification"},n)),c.a.createElement(_e,{isShow:t>0},Object(Ee["a"])(t)))};return t}(c.a.PureComponent);var xe=function(e){u["__extends"](t,e);function t(){var s=e!==null&&e.apply(this,arguments)||this;s.state={isDataInvalid:false,numUnread:S()(b["global"],"userStatus.notificationStatus.numUnread")||0,lastModified:S()(b["global"],"userStatus.notificationStatus.lastModified")||null,lastFetched:Date.now(),mouseEntered:false};s.storage=Object(_["a"])("notification-status");s.storageStateKeys=["numUnread","lastModified","lastFetched"];s.realtimeMessages=null;s.mapStateToStorage=function(){var e=s.state.lastFetched;var t=s.storage.get("lastFetched");if(t&&e<=t){return}s.storageStateKeys.forEach(function(e){var t=s.state[e];var n=s.storage.get(e);if(n!==t){s.storage.set(e,t)}})};s.mapStorageToState=function(e){var t=e.key,n=e.newValue;var i;var r=s.state.lastFetched;var a=s.storage.get("lastFetched");if(a&&r>a){return}if(s.storageStateKeys.includes(t)){var o=(i={},i[t]=n,i);s.setState(o)}};s.handleReadNotifications=function(){s.setState({numUnread:0,lastFetched:Date.now()})};s.handleMouseEnter=function(){s.setState({mouseEntered:true})};return s}t.prototype.componentDidMount=function(){this.storage.attach(this.mapStorageToState);this.mapStateToStorage();this.initRealtimeMessagesIfNeed()};t.prototype.componentDidUpdate=function(){this.mapStateToStorage();this.initRealtimeMessagesIfNeed()};t.prototype.componentWillUnmount=function(){this.storage.detach(this.mapStorageToState);if(this.realtimeMessages!==null){this.realtimeMessages.disconnect()}};t.prototype.initRealtimeMessagesIfNeed=function(){var i=this;if(this.realtimeMessages!==null){return}var e=b["global"].websocketUrl;if(!e){return}this.realtimeMessages=new w["a"](e,function(e){if(S()(e,"type")==="notification"){var t=S()(e,"num_unread_notifications")||0;var n=S()(e,"last_modified")||0;i.setState({numUnread:t,lastModified:n,lastFetched:Date.now(),isDataInvalid:true})}})};t.prototype.renderBtn=function(){var e=this.state.numUnread;var t=C()(this.props,"dropdownClassName");return c.a.createElement(we,u["__assign"]({numUnread:e,onMouseEnter:this.handleMouseEnter},t))};t.prototype.renderBtnWithDropdown=function(){var e=this.state,t=e.numUnread,n=e.isDataInvalid;var i=this.props,r=i.dropdownClassName,a=u["__rest"](i,["dropdownClassName"]);return c.a.createElement(ye,{overlayClassName:r,numUnread:t,isDataInvalid:n,handleReadNotifications:this.handleReadNotifications},c.a.createElement(we,u["__assign"]({numUnread:t},a)))};t.prototype.render=function(){return this.state.mouseEntered?this.renderBtnWithDropdown():this.renderBtn()};return t}(c.a.PureComponent);var Ne=n("UqMZ");var Oe=n("8CDz");var Ie=n.n(Oe);var Re=n("Ctp7");var De=n.n(Re);var Pe=n("nsO7");var je=n.n(Pe);var Fe=n("lSUb");var Te=n("nPqx");var Me={width:"150px",height:"100px",borderRadius:"3px",transition:"0.18s border-color ease-in-out",img:{width:"100%",height:"100%",borderRadius:"3px"}};var Le=Object($["default"])("div",{target:"e5i1odf0"})(u["__assign"]({},Me,{border:"1px dashed "+z["a"].dblue2,backgroundColor:z["a"].grey0,color:z["a"].dblue3,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"24px",transition:"0.18s color ease-in-out",cursor:"pointer","&:hover":{color:z["a"].dblue6,borderColor:z["a"].dblue6}}),"label:NewCard;");var Ae=Object($["default"])("div",{target:"e5i1odf1"})(u["__assign"]({},Me),"label:TypeCard;");var Ue=Object($["default"])("div",{target:"e5i1odf2"})({lineHeight:"40px",textAlign:"center"},"label:CardName;");var Be=Object($["default"])("a",{target:"e5i1odf3"})({color:z["a"].dark1,flex:"0 0 100px",marginTop:"20px","&:visited, &:hover, &:active, &:focus":{color:z["a"].dark1,textDecoration:"none"}},"label:Wrapper;");var Ve=n("wJz1");var qe=n.n(Ve);var $e=n("cuV4");var ze=n.n($e);var We=n("aDWd");var He=n.n(We);var Ke=n("bcHh");var Qe=n.n(Ke);var Ge=n("ypvL");var Je=n.n(Ge);var Ze={empty:ze.a,ml:Qe.a,react:Je.a,"linked-list":He.a,"binary-tree":qe.a};var Ye=function(e){var t=function(){return e.onClick(e.type.nameSlug)};return c.a.createElement(Be,{href:te["a"].newPlayground(e.type.nameSlug),target:"_blank",onClick:t,key:e.type.nameSlug},e.type.isNew?c.a.createElement(Le,null,"+"):c.a.createElement(Ae,null,c.a.createElement("img",{src:Ze[e.type.nameSlug],alt:e.type.name})),c.a.createElement(Ue,null,e.type.name))};var Xe=Object($["default"])("div",{target:"e5i1odf0"})({display:"flex",flexDirection:"column",margin:"10px 0 30px 0",padding:"20px"},"label:CategoryWrapper;");var et=Object($["default"])("div",{target:"e5i1odf1"})({fontSize:"16px",color:z["a"].dark4},"label:CategoryName;");var tt=Object($["default"])("div",{target:"e5i1odf2"})({display:"flex",justifyContent:"space-between",flexWrap:"wrap"},"label:CategoryTypes;");var nt=Object($["default"])("div",{target:"e5i1odf3"})({padding:"0 20px",display:"flex",alignItems:"center",borderBottom:"1px solid "+z["a"].dark8,color:z["a"].dblue6,cursor:"pointer",transition:"0.18s color ease-in-out","&:hover":{color:z["a"].dblue9}},"label:PlaygroundLinkInnerWrapper;");var it=Object($["default"])("div",{target:"e5i1odf4"})({flex:"1 1 auto",fontSize:"16px",lineHeight:"56px"},"label:PlaygroundLink;");var rt=Object(Fe["a"])(function(e,t){return[{slug:"console-application",name:"控制台程序",types:u["__spread"]([{name:"空白 Playground",nameSlug:"empty",isNew:true}],t)},{slug:"frontend",name:"前端程序",types:[{name:"React",nameSlug:"react",usePng:true}]},{slug:"machine-learning",name:"机器学习",types:[{name:"机器学习",nameSlug:"ml",usePng:true}],displayCondition:e}]},je.a.isEqual);var at=function(t){u["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.handlePlaygroundSelected=function(){return e.props.onClose()};return e}Object.defineProperty(e.prototype,"playgroundCategories",{get:function(){var e=b["global"].userStatus.isAdmin;return rt(!!e,this.props.additionalTemplates)},enumerable:true,configurable:true});e.prototype.render=function(){return c.a.createElement(Te["a"],{visible:this.props.visible,onClose:this.props.onClose,title:"Playground",width:570,hasFooter:false},c.a.createElement("a",{href:"/playground/",target:"_blank",onClick:this.props.onClose},c.a.createElement(nt,null,c.a.createElement(it,null,"我的 Playgrounds"),c.a.createElement(V["a"],{type:"angle-right"}))),this.renderPlaygroundCategories())};e.prototype.renderPlaygroundTypes=function(e){var t=this;return e.map(function(e){return c.a.createElement(Ye,{key:e.nameSlug,type:e,onClick:t.handlePlaygroundSelected})})};e.prototype.renderPlaygroundCategories=function(){var t=this;if(this.props.loading){return c.a.createElement(re["a"],{size:"md"})}return this.playgroundCategories.filter(function(e){return e.displayCondition!==false}).map(function(e){return c.a.createElement(Xe,{key:"category-"+e.name},c.a.createElement(et,null,e.name),c.a.createElement(tt,null,t.renderPlaygroundTypes(e.types)))})};return e}(r["PureComponent"]);var ot=n("S0yW");var st=n("DjZ7");var lt=n("WqTL");var ut={favList:te["a"].myFavList,playground:te["a"].myPlayground,notes:te["a"].myNotes,submissions:te["a"].mySubmissions,sessions:te["a"].mySessions,articles:te["a"].myArticles,progress:te["a"].myProgress,points:te["a"].myPoints,signOut:te["a"].signOut};var ct;var dt={display:"flex",alignItems:"center",width:"100%",height:"100%"};var ft={transition:"color 0.18s ease-in-out",display:"flex",color:z["a"].dblue6,alignItems:"center",flex:"1 1 auto",fontSize:"14px"};var pt=Object($["default"])("div",{target:"e5i1odf0"})({background:"transparent",position:"absolute",top:"-6px",left:"227px",borderTopLeftRadius:"4px",borderWidth:"0 8px 6px",borderBottomColor:z["a"].white,borderStyle:"solid",color:"transparent",zIndex:1},"label:UserMenuArrow;");var mt=Object($["default"])(ot["a"],{target:"e5i1odf1"})({width:"270px",padding:"10px 0","& > .ant-dropdown-menu-item":{height:"46px"},"& > li":{position:"relative"}},"label:Menu;");var vt=Object($["default"])("a",{target:"e5i1odf2"})({padding:0,margin:0},"label:UserLink;");var ht=Object($["default"])("div",{target:"e5i1odf3"})(u["__assign"]({},dt,{boxShadow:"inset 0 -1px 0 0 @dark-8"}),"label:UserItem;");var gt=Object($["default"])("div",{target:"e5i1odf4"})({alignSelf:"stretch",flex:"1 1 auto",display:"flex",alignItems:"center",paddingLeft:"15px"},"label:UserNameContainer;");var bt=Object($["default"])("div",{target:"e5i1odf5"})(u["__assign"]({},ft,{justifyContent:"space-between"}),"label:UserItemContent;");var kt=Object($["default"])("div",{target:"e5i1odf6"})({color:z["a"].yellowA3},"label:PremiumUserName;");var yt=Object($["default"])("div",{target:"e5i1odf7"})({color:z["a"].dark1},"label:UserName;");var St=Object($["default"])(V["a"],{target:"e5i1odf8"})({fontSize:"24px",flex:"0 0 auto",marginLeft:"10px",color:z["a"].dblue1},"label:UserArrowIcon;");var Et=Object($["default"])("div",{target:"e5i1odf9"})(u["__assign"]({},dt),"label:MenuItemInnerWrapper;");var Ct=Object($["default"])(V["a"],{target:"e5i1odf10"})({transition:"color 0.18s ease-in-out",flex:"0 0 auto",color:z["a"].dblue3,fontSize:"24px",marginRight:"15px"},"label:MenuItemIcon;");var _t=Object($["default"])("div",{target:"e5i1odf11"})(u["__assign"]({},ft),"label:ItemContent;");var wt={"& > .ant-dropdown-menu-item":{height:"46px"},"&:hover":(ct={},ct[""+Ct]={color:z["a"].dblue7},ct[""+_t]={color:z["a"].dblue9},ct),"&:visited, &:active, &:focus":{textDecoration:"none",color:z["a"].dblue6}};var xt=Object($["default"])("a",{target:"e5i1odf12"})(u["__assign"]({},wt),"label:UserMenuLink;");var Nt=Object($["default"])("div",{target:"e5i1odf13"})(u["__assign"]({},wt),"label:UserMenuItem;");var Ot=ot["a"].Item;var It=function(e){u["__extends"](t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;n.onClickItem=function(e){var t=e.key;if(t==="switch"){Object(lt["a"])(true);window.location.href="/classic"+window.location.pathname}n.props.onClick&&n.props.onClick()};return n}t.prototype.render=function(){var t=this;var e=this.props,n=e.onClick,i=u["__rest"](e,["onClick"]);var r=b["global"].userStatus,a=r.isPremium,o=r.userSlug,s=r.realName;return c.a.createElement(c.a.Fragment,null,c.a.createElement(pt,null),c.a.createElement(mt,u["__assign"]({},i,{onClick:this.onClickItem}),c.a.createElement(Ot,{key:"profile"},c.a.createElement(vt,{href:te["a"].publicProfile(o),target:"_blank"},c.a.createElement(ht,null,c.a.createElement(gt,null,c.a.createElement(bt,null,a?c.a.createElement(kt,null,s):c.a.createElement(yt,null,s),c.a.createElement(St,{type:"angle-right"})))))),Rt.filter(function(e){return!e.displayCondition||e.displayCondition()}).map(function(e){return t.renderMenuItem(e)})))};t.prototype.renderMenuItem=function(e){var t=c.a.createElement(Et,null,c.a.createElement(Ct,{type:e.icon}),c.a.createElement(_t,null,e.display));return c.a.createElement(Ot,{key:e.key},e.nonLink?c.a.createElement(Nt,null,t):c.a.createElement(xt,{href:ut[e.key]},t))};return t}(r["PureComponent"]);var Rt=[{key:"switch",displayCondition:function(){return window.location.pathname.startsWith("/problems")},nonLink:true,icon:"switch",display:"切换到旧版本"},{key:"favList",icon:"favorite-o",display:"收藏列表"},{key:"playground",icon:"playground",display:"我的 Playground"},{key:"notes",icon:"note",display:"笔记本"},{key:"submissions",icon:"clock",display:"提交记录"},{key:"articles",displayCondition:b["isCnSolutionBetaMember"],icon:"article",display:"我的文章"},{key:"sessions",icon:"bar-chart",display:"选择进度"},{key:"progress",display:"进展分析",icon:"pie-chart-o"},{key:"points",display:"积分",icon:"points"},{key:"signOut",display:"登出",icon:"signout"}];var Dt=v["a"].Menu;var Pt=function(){var e=b["global"].userStatus,t=e.isTranslator,n=e.isSuperuser;var i=b["global"].feature.questionTranslation;return[{key:"library",linkProps:{href:te["a"].admin.library},display:"题库",displayCondition:!t},{key:"translation",linkProps:{href:te["a"].admin.translation},display:"翻译",displayCondition:i&&(t||n)},{key:"review",linkProps:{href:te["a"].admin.review},display:"内容审核",displayCondition:n},{key:"points",linkProps:{href:te["a"].admin.points},display:"点数",displayCondition:n},{key:"contribution",linkProps:{href:te["a"].admin.contribution},display:"贡献"},{key:"danger-zone",linkProps:{href:te["a"].admin.dangerZone,style:{color:z["a"].red5}},display:"危险区域",displayCondition:n},{key:"administration",linkProps:{href:te["a"].admin.administration},display:c.a.createElement(c.a.Fragment,null,c.a.createElement(V["a"],{style:{marginRight:"3px"},type:"settings"}),"后台管理"),displayCondition:n}]};var jt=function(e){return c.a.createElement(Dt,u["__assign"]({},e),Pt().filter(function(e){var t=e.displayCondition;return t!==false}).map(function(e){var t=e.display,n=e.key,i=e.linkProps;return c.a.createElement(Dt.Item,{key:n},c.a.createElement("a",u["__assign"]({},i),t))}))};var Ft=n("IDXw");var Tt=Object($["default"])(V["a"],{target:"e5i1odf0"})({fontSize:"20px",color:z["a"].dblue3,cursor:"pointer",transition:"0.18s color ease-in-out","&:hover":{color:z["a"].dblue6}},"label:NavbarIcon;");var Mt=Object($["default"])("div",{target:"e5i1odf1"})({width:"100%",height:"44px",borderBottom:"1px solid "+z["a"].grey2,display:"flex",alignItems:"stretch",justifyContent:"center",fontSize:"13px",background:z["a"].white,minWidth:Ft["b"]},"label:NavWrapper;");var Lt=Object($["default"])("div",{target:"e5i1odf2"})(function(e){var t=e.fluid;return{display:"flex",justifyContent:"space-between",minWidth:Ft["b"],maxWidth:t?"unset":Ft["a"],width:"100%",flexWrap:"nowrap",padding:"0 20px"}},"label:Container;");var At=Object($["default"])("div",{target:"e5i1odf3"})({display:"flex",flexWrap:"nowrap",heigth:"100%",alignItems:"center"},"label:NavbarMenu;");var Ut=Object($["default"])("div",{target:"e5i1odf4"})({height:"20px",lineHeight:"20px",marginRight:"20px",color:z["a"].dblue6,cursor:"pointer","&:hover":{color:z["a"].dblue9},a:{display:"block",height:"100%",width:"auto",lineHeight:"inherit"},img:{verticalAlign:"top",height:"20px"},svg:{fontSize:"18px",lineHeight:"inherit",verticalAlign:"top"}},"label:NavbarMenuItem;");var Bt=Object($["default"])("div",{target:"e5i1odf5"})({height:"22px",lineHeight:"22px",marginRight:"20px",color:z["a"].dblue3,cursor:"pointer","&:nth-last-child(1)":{marginRight:0},"&:hover":{color:z["a"].dblue6},a:{display:"block",height:"100%",width:"auto",lineHeight:"inherit",color:z["a"].dblue3,"&:hover":{color:z["a"].dblue6}},"svg, a svg":{fontSize:"20px",lineHeight:"inherit",verticalAlign:"top"},".ant-avatar":{display:"block"}},"label:NavbarMenuIconItem;");var Vt={color:z["a"].yellowA3,display:"flex",justifyContent:"space-between",alignItems:"center"};var qt=Object($["default"])("div",{target:"e5i1odf6"})({width:"1px",height:"20px",backgroundColor:z["a"].dark8},"label:NavItemDivider;");var $t=Object($["default"])("div",{target:"e5i1odf7"})({marginLeft:"20px",display:"flex","& > a":{color:z["a"].dblue4,transition:"0.18s color ease-in-out","&:hover":{color:z["a"].dblue9}}},"label:AuthLinks;");var zt=Object($["default"])("div",{target:"e5i1odf8"})({margin:"0 15px",color:z["a"].dark7},"label:AuthLinkDivider;");var Wt=n("ULPy");var Ht=n.n(Wt);var Kt=function(e){return[{key:"logo",display:c.a.createElement("a",{href:te["a"].home},c.a.createElement("img",{src:Ht.a,alt:"logo"}))},{key:"explore",display:c.a.createElement("a",{href:te["a"].explore},"探索")},{key:"problems",display:c.a.createElement("a",{href:te["a"].problems},"题库")},{key:"contest",display:c.a.createElement("a",{href:te["a"].contest},"竞赛"),displayCondition:e.feature.contest},{key:"articles",display:c.a.createElement("a",{href:te["a"].articles},"阅读")},{key:"discuss",display:c.a.createElement("a",{href:te["a"].discuss,target:"_blank"},"社区"),displayCondition:e.feature.discuss},{key:"jobs",display:c.a.createElement("a",{href:te["a"].jobs},"职位"),displayCondition:e.feature.cnJobs},{key:"redeem",display:c.a.createElement("a",{href:te["a"].redeem,style:Vt},c.a.createElement(V["a"],{type:"store"}),"商店"),displayCondition:e.feature.store&&!e.feature.subscription},{key:"admin-list",display:c.a.createElement(v["a"],{overlay:c.a.createElement(jt,null)},"管理员",c.a.createElement(V["a"],{style:{width:"14px",hegith:"14px"},type:"caret-down"})),displayCondition:e.userStatus.isAdmin}]};var Qt=function(t){u["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.state={fetchTplLoading:true,modalVisible:false,additionalTemplates:[]};e.dispose$=new f["a"];e.renderModal=function(){return c.a.createElement(at,{loading:e.state.fetchTplLoading,visible:e.state.modalVisible,onClose:e.onClose,additionalTemplates:e.state.additionalTemplates})};e.showPlaygroundModal=function(){return e.setState({modalVisible:true})};e.onClose=function(){return e.setState({modalVisible:false})};e.renderSignedInItems=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Bt,null,c.a.createElement(xe,null)),c.a.createElement(Bt,{"data-tour-index":"6"},c.a.createElement(v["a"],{overlay:c.a.createElement(It,null),trigger:["click"],placement:"bottomRight",align:{points:["tr","br"],offset:[24,16]}},c.a.createElement(l["a"],{size:20,src:b["global"].userStatus.avatar}))))};e.renderAuthenticationItems=function(){return!e.isSignInPage&&c.a.createElement(c.a.Fragment,null,c.a.createElement(qt,null),c.a.createElement($t,null,c.a.createElement("a",{onClick:Ne["a"].signUp},"注册"),c.a.createElement(zt,null,"或"),c.a.createElement("a",{onClick:Ne["a"].signIn},"登录")))};return e}Object.defineProperty(e.prototype,"isSignInPage",{get:function(){return Object(a["j"])(window.location.pathname,{path:"/accounts/(login|signup)"})},enumerable:true,configurable:true});e.prototype.componentDidMount=function(){this.getTpls();this.performDailyCheck()};e.prototype.componentWillUnmount=function(){this.dispose$.next();this.dispose$.complete()};e.prototype.render=function(){return c.a.createElement(Mt,{id:this.props.id},c.a.createElement(Lt,{fluid:this.props.fluid},c.a.createElement(At,null,Kt(b["global"]).filter(function(e){return e.displayCondition!==false}).map(function(e){var t=e.display,n=e.key;return c.a.createElement(Ut,{key:n},t)})),c.a.createElement(At,null,c.a.createElement(Bt,null,c.a.createElement(o["a"],{title:"新建 Playground"},c.a.createElement(Tt,{type:"playground-new",onClick:this.showPlaygroundModal}))),b["global"].userStatus.isSignedIn?this.renderSignedInItems():this.renderAuthenticationItems())),this.renderModal())};e.prototype.performDailyCheck=function(){var e=b["global"].userStatus.checkedInToday;if(!e){Object(k["a"])({mutation:Ie.a}).pipe(Object(p["a"])(function(e){var t=e.data;if(t.checkin.checkedIn){h["a"].open({description:c.a.createElement("span",null,"+1 每日登录"),icon:c.a.createElement(g["a"],null)})}}),Object(m["a"])(this.dispose$)).subscribe()}};e.prototype.getTpls=function(){var n=this;Object(k["b"])({query:De.a}).pipe(Object(p["a"])(function(e){var t=e.data;if(t){n.setState({fetchTplLoading:false,additionalTemplates:t.allLeetcodePlaygroundTemplates})}}),Object(m["a"])(this.dispose$)).subscribe()};return e}(c.a.PureComponent);var Gt=n("7nmT");var Jt=n.n(Gt);var Zt=n("pu3o");var Yt=n.n(Zt);var Xt=n("CINk");var en=n("7RRJ");function tn(e){if(!b["global"].feature){return true}return b["global"].feature[e]===false}function nn(){if(b["global"].userStatus&&b["global"].userStatus.isSignedIn){var e={key:"switch_to_old_version",display:"切换到旧版本",icon:"switch",isShowLine:true,isHide:false,linkProps:{onClick:function(){var e=window.location.pathname;Object(lt["a"])(true);window.location.href="/classic"+e}}};var t=Rt.filter(function(e){var t=e.key;return!!ut[t]}).map(function(e){var t=e.key,n=e.icon,i=e.display,r=e.displayCondition;return{key:"user_"+t,icon:n,display:i,isHide:r?r():true,linkProps:{href:ut[t],"data-highlight":t==="sign-out"?"red":undefined}}});return[e].concat(t)}else{return[]}}function rn(){if(b["global"].userStatus&&b["global"].userStatus.isAdmin){return Pt().map(function(e,t){var n=e.key,i=e.display,r=e.displayCondition;return{key:"admin_"+n,display:i,isShowLine:t===0,isHide:r===false,linkProps:{href:te["a"].admin[n],"data-highlight":"red"}}})}else{return[]}}var an=function(){return u["__spread"]([{key:"explore",display:"Explore",isHide:false,linkProps:{href:te["a"].explore}},{key:"problems",display:"Problems",linkProps:{href:te["a"].problems}},{key:"contest",display:"Contest",isShowLine:true,isHide:tn("contest"),linkProps:{href:te["a"].contest}},{key:"articles",display:"Articles",linkProps:{href:te["a"].articles}},{key:"discuss",display:"Discuss",isHide:tn("discuss"),linkProps:{href:te["a"].discuss}},{key:"redeem",display:"Redeem",isShowLine:true,isHide:tn("store"),linkProps:{href:te["a"].redeem,"data-highlight":"yellow"}}],rn(),nn())};var on=n("joW0");var sn=n.n(on);var ln=function(t){u["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.menuRef=c.a.createRef();return e}e.prototype.componentDidMount=function(){en["a"].prepare();this.disableScrollIfNeed()};e.prototype.componentDidUpdate=function(){this.disableScrollIfNeed()};e.prototype.componentWillUnmount=function(){this.disableScrollIfNeed(false)};Object.defineProperty(e.prototype,"isSignedIn",{get:function(){return!!(b["global"].userStatus&&b["global"].userStatus.isSignedIn)},enumerable:true,configurable:true});e.prototype.disableScrollIfNeed=function(e){if(e===void 0){e=this.props.isShow}if(this.menuRef.current){if(e){Object(Xt["disableBodyScroll"])(this.menuRef.current)}else{Object(Xt["enableBodyScroll"])(this.menuRef.current)}}else{Object(Xt["clearAllBodyScrollLocks"])()}};e.prototype.renderSignIn=function(){var e=Yt.a.stringify({next:window.location.pathname+window.location.search});return c.a.createElement("div",{className:sn.a.signInArea},c.a.createElement("a",{href:te["a"].signIn+"?"+e,className:sn.a.link},"Sign in"),"or",c.a.createElement("a",{href:te["a"].signUp+"?"+e,className:sn.a.link},"Sign up"))};e.prototype.renderUserProfile=function(){return c.a.createElement("a",{className:sn.a.userProfileArea,href:te["a"].userProfile(b["global"].userStatus.userSlug)},c.a.createElement("img",{alt:b["global"].userStatus.username+"'s avatar",className:sn.a.avatar,src:b["global"].userStatus.avatar||""}),c.a.createElement("div",{className:sn.a.username,"data-is-premium":b["global"].userStatus.isPremium},c.a.createElement(V["a"],{type:"mark-star",className:sn.a.icon}),c.a.createElement("span",null,b["global"].userStatus.username)))};e.prototype.renderItems=function(){return c.a.createElement("div",{className:sn.a.itemsArea},an().map(function(e){var t=e.isHide,n=e.isShowLine,i=e.display,r=e.icon,a=e.key,o=e.linkProps;return c.a.createElement(c.a.Fragment,{key:a},n&&c.a.createElement("hr",null),!t&&c.a.createElement("a",u["__assign"]({},o,{className:sn.a.item}),r&&c.a.createElement(V["a"],{type:r,className:sn.a.icon}),c.a.createElement("span",null,i)))}))};e.prototype.render=function(){return Jt.a.createPortal(c.a.createElement("div",{className:sn.a.container,"data-is-show":this.props.isShow},c.a.createElement("div",{className:sn.a.mask,onClick:this.props.onClose}),c.a.createElement("div",{className:sn.a.menu,ref:this.menuRef},this.isSignedIn?this.renderUserProfile():this.renderSignIn(),this.renderItems())),window.document.body)};return e}(c.a.PureComponent);var un=ln;var cn=n("uSQ0");var dn=n.n(cn);var fn=function(t){u["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.state={isShowMenu:false};e.toggleMenu=function(){e.setState(function(e){var t=e.isShowMenu;return{isShowMenu:!t}})};return e}Object.defineProperty(e.prototype,"isSignedIn",{get:function(){return!!(b["global"].userStatus&&b["global"].userStatus.isSignedIn)},enumerable:true,configurable:true});e.prototype.render=function(){return c.a.createElement("div",{className:dn.a.navbar},c.a.createElement("div",{className:dn.a.navbarItem},c.a.createElement(V["a"],{type:"menu",className:dn.a.menu,onClick:this.toggleMenu}),c.a.createElement(un,{isShow:this.state.isShowMenu,onClose:this.toggleMenu})),c.a.createElement("div",{className:dn.a.navbarItem},c.a.createElement("img",{className:dn.a.logo,src:Ht.a,alt:"logo"})),c.a.createElement("a",{className:dn.a.navbarItem,href:te["a"].publicProfile(b["global"].userStatus.username),"data-is-hide":!b["global"].userStatus.isSignedIn},c.a.createElement(V["a"],{type:"account",className:dn.a.account})))};return e}(c.a.PureComponent);var pn=fn;n.d(t,"a",function(){return mn});var mn=i["a"]?pn:Qt},RANX:function(e,t,n){"use strict";var s=n("D57K");var i=n("ERkP");var r=n.n(i);var a=n("fQLH");var o=n("LR82");var l=n("pN2L");var u=n("d9YI");var c=n("iJR/");var d=n("vKrG");var f=n("U3QC");var p=n("AouM");var m=n("Jg5f");var v=n("rzNM");var h=n("IMYO");var g=n("G2Mx");var b=n("nBd1");var k=n("5CFZ");var y=n("l8fx");var S=n("RuI9");var E=n("yMer");var C=n("LJ7e");var _=n("z45D");var w=Object(C["default"])("form",{target:"e5i1odf0"})({display:"flex",flexDirection:"column",alignItems:"stretch"},"label:StyledForm;");var x=Object(C["default"])("p",{target:"e5i1odf1"})(s["__assign"]({},_["a"],{textAlign:"center"}),"label:ErrorMessagePara;");var N=function(e){s["__extends"](t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;i.state={errorMessage:""};i.action$=new a["a"];i.submit$=new a["a"];i.subscription=new o["a"];i.fields={};i.onSubmit$=i.submit$.pipe(Object(f["a"])(function(){i.clearErrorMessage()}),Object(p["a"])(function(e){var t=e.url,n=e.extraFormValue;return i.validateInputs("onSubmit").then(function(e){return{url:t,formValue:s["__assign"]({},e,n)}})}),Object(m["a"])(function(e){var t=e.url,n=e.formValue;return{url:t,options:{data:Object(E["a"])(n),headers:{"X-Requested-With":"XMLHttpRequest"}}}}),Object(v["a"])(function(e){var t=e.url,n=e.options;i.beforeSubmit();return y["a"].post(t,n).pipe(Object(h["a"])(function(e){if(e.response&&e.response.data){return Object(l["a"])(e.response.data)}else{var t=e instanceof Error?e.message:String(e);i.onError(t);return u["a"]}}))}));i.onSubmit=function(e){if(typeof i.props.onSubmit==="function"){i.props.onSubmit(e)}};i.onFieldMount=function(e,t){i.fields[e]=t};i.onFieldUnMount=function(e){delete i.fields[e]};i.onTriggerAction=function(e){if(e.type==="onKeyDown"){i.onFieldKeyDown(e.value.event)}};return i}Object.defineProperty(t.prototype,"formProviderValue",{get:function(){return{action$:this.action$,onFieldMount:this.onFieldMount,onFieldUnMount:this.onFieldUnMount}},enumerable:true,configurable:true});t.prototype.componentDidMount=function(){this.subscription.add(this.onSubmit$.subscribe(this.onSubmit));this.subscription.add(this.action$.subscribe(this.onTriggerAction))};t.prototype.componentWillUnmount=function(){this.submit$.complete();this.action$.complete();this.subscription.unsubscribe()};t.prototype.getFormValues=function(){var e=new a["a"];var t=Object.keys(this.fields);var n=e.pipe(Object(g["a"])(t.length),Object(b["a"])(function(e,t){return s["__assign"]({},e,t)})).toPromise();var i={type:"getFormValue",value:{addValue$:e}};this.action$.next(i);return n};t.prototype.validateInputs=function(o){return s["__awaiter"](this,void 0,Promise,function(){var r,t,n;var a=this;return s["__generator"](this,function(e){switch(e.label){case 0:return[4,this.getFormValues()];case 1:r=e.sent();t=Object(c["a"])(Object.keys(this.fields)).pipe(Object(m["a"])(function(e){var t=a.fields[e];var n=r[e];var i=t.validate(o,n,r);return{errorMessage:i,formValue:r,field:{name:e,validation:t}}}));t.subscribe(function(e){var t=e.field,n=e.errorMessage;a.showError(t.name,n)});n=t.pipe(Object(k["a"])(function(e){var t=e.errorMessage;return t===null}),Object(p["a"])(function(e){return e?Object(l["a"])(r):d["a"]}));return[2,n.toPromise()]}})})};t.prototype.submit=function(e){this.submit$.next(e)};t.prototype.showError=function(e,t){var n={type:"showError",value:{inputName:e,errorMessage:t}};this.action$.next(n)};t.prototype.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S["b"],{value:this.formProviderValue},r.a.createElement(w,null,this.props.children)),this.state.errorMessage&&r.a.createElement(x,null,this.state.errorMessage))};t.prototype.clearErrorMessage=function(){this.setState({errorMessage:""})};t.prototype.onError=function(e){if(typeof this.props.onError==="function"){this.props.onError(e)}this.setState({errorMessage:e})};t.prototype.beforeSubmit=function(){if(typeof this.props.beforeSubmit==="function"){this.props.beforeSubmit()}};t.prototype.onFieldKeyDown=function(e){if(e.key==="Enter"&&this.props.onKeyDownEnter){this.props.onKeyDownEnter()}};return t}(r.a.PureComponent);var O=t["a"]=N},RuI9:function(e,t,n){"use strict";n.d(t,"b",function(){return l});n.d(t,"a",function(){return u});var i=n("ERkP");var r=n.n(i);var a=n("fQLH");var o={action$:new a["a"],onFieldMount:function(){},onFieldUnMount:function(){}};var s=r.a.createContext(o),l=s.Provider,u=s.Consumer},ShE0:function(e,t,n){e.exports={"confirm-footer":"confirm-footer__1VlD",confirmFooter:"confirm-footer__1VlD","confirm-btn":"confirm-btn__2Gqa",confirmBtn:"confirm-btn__2Gqa"}},T1n1:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"openNotifications"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"openNotifications"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:74}};n.loc.source={body:"mutation openNotifications {\n  openNotifications {\n    ok\n    error\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["openNotifications"]=o(n,"openNotifications")},ULPy:function(e,t,n){e.exports=n.p+"f2ece5fe978d056f5a425ad3387216ee.svg"},UqMZ:function(e,t,n){"use strict";var o=n("D57K");var i=n("ERkP");var s=n.n(i);var r=n("7nmT");var l=n.n(r);var u=n("8d7B");var c=n("sYqU");var d=n("nPqx");var f=n("Bamy");var a=n("LJ7e");var p=n("6h7y");var m=n("5ZzG");var v=Object(a["default"])(m["a"],{target:"e5i1odf0"})({width:"20px",height:"20px",padding:"10px",boxSizing:"content-box",color:p["dblue1"],cursor:"pointer",position:"absolute",right:0,top:0,transition:"all 0.2s ease","&:hover":{color:p["dblue6"]}},"label:CloseIcon;");var h=function(e){return s.a.createElement(v,{type:"close",onClick:e})};var g=n("lXyA");var b=n.n(g);var k=b()(function(){var e=document.createElement("div");e.classList.add("sign-in-modal-container");document.body.appendChild(e);return e});n.d(t,"a",function(){return y});var y=function(t){o["__extends"](a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;e.titleStyle={position:"relative",padding:"20px",background:"linear-gradient(to top, #ffffff, #fafafa",borderRadius:"3px 3px 0 0",dispaly:"flex",alignItems:"center"};return e}a.hide=function(){l.a.render(s.a.createElement(a,{visible:false}),k())};a.signIn=function(e){if(e===void 0){e={}}var t=u["global"].userStatus&&u["global"].userStatus.isSignedIn;var n=e.afterSignIn,i=e.defaultShowSignUp,r=o["__rest"](e,["afterSignIn","defaultShowSignUp"]);if(t){if(typeof n==="function"){n()}}else{l.a.render(s.a.createElement(a,o["__assign"]({defaultShowSignUp:!!i,visible:true,onClose:a.hide},r)),k())}};a.signUp=function(e){if(e===void 0){e={}}a.signIn(o["__assign"]({},e,{defaultShowSignUp:true}))};a.ensureSignedIn=function(e,t){return function(){a.signIn(o["__assign"]({afterSignIn:e},t))}};a.prototype.render=function(){var e=this.props,t=e.visible,n=e.onClose,i=o["__rest"](e,["visible","onClose"]);var r=typeof i.next==="string"?i.next:c["a"].getCurrentRelativePath();return s.a.createElement(d["a"],{destroyOnClose:true,visible:t,onClose:n,width:400,contentPadding:"0 20px 20px",titleStyle:this.titleStyle,title:"",hasFooter:false,closeButton:h},s.a.createElement(f["a"],o["__assign"]({},i,{next:r})))};return a}(s.a.PureComponent)},"V5/1":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("D57K");var r=n("ERkP");var a=n.n(r);var o=n("jWsR");var s=n("yu9t");var l=function(e){return a.a.createElement(o["a"],i["__assign"]({},e,{kind:s["a"].Input}))}},WG7P:function(e,t,n){e.exports={shortcut:"shortcut__2Jt6","shortcut-description":"shortcut-description__176e",shortcutDescription:"shortcut-description__176e","shortcut-keystrokes":"shortcut-keystrokes__3zOJ",shortcutKeystrokes:"shortcut-keystrokes__3zOJ"}},XFkh:function(e,t,n){e.exports={wrapper:"wrapper__2rDv","tool-item":"tool-item__3vSq",toolItem:"tool-item__3vSq","tool-button":"tool-button__1keg",toolButton:"tool-button__1keg","loader-container":"loader-container__2SXD",loaderContainer:"loader-container__2SXD",disabled:"disabled__WvD1"}},"Y+c1":function(e,t,n){"use strict";n.d(t,"Discuss",function(){return a});var i=n("8d7B");var r=n("ZKYJ");var a=Object(i["ensureGlobal"])(r["a"])},YIQn:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"cnTopicComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topicId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orderBy"}},type:{kind:"NamedType",name:{kind:"Name",value:"CnCommentSortEnum"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"skip"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cnTopicComments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"topicId"},value:{kind:"Variable",name:{kind:"Name",value:"topicId"}}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"Variable",name:{kind:"Name",value:"orderBy"}}},{kind:"Argument",name:{kind:"Name",value:"skip"},value:{kind:"Variable",name:{kind:"Name",value:"skip"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"15"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalNum"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"commentFields"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:343}};i.loc.source={body:'#import "../../fragments/comment.graphql"\n\nquery cnTopicComments($topicId: Int!, $orderBy: CnCommentSortEnum, $skip: Int) {\n  cnTopicComments(\n    topicId: $topicId\n    orderBy: $orderBy\n    skip: $skip\n    first: 15\n  ) {\n    pageInfo {\n      endCursor\n    }\n    totalNum\n    edges {\n      node {\n        ...commentFields\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(r[t]){return false}else{r[t]=true;return true}})}i.definitions=i.definitions.concat(a(n("KaeL").definitions));function o(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){o(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){o(e,t)})}if(e.definitions){e.definitions.forEach(function(e){o(e,t)})}}var s={};(function e(){i.definitions.forEach(function(e){if(e.name){var t=new Set;o(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function u(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=i;e.exports["cnTopicComments"]=u(i,"cnTopicComments")},YVEV:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"flagSetContentStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReviewFlaggedObjectInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"flagSetContentStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"mutation flagSetContentStatus($data: ReviewFlaggedObjectInput!) {\n  flagSetContentStatus(data: $data) {\n    ok\n    error\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["flagSetContentStatus"]=o(n,"flagSetContentStatus")},YqSe:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"commentPageInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orderBy"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pageNum"},arguments:[{kind:"Argument",name:{kind:"Name",value:"numPerPage"},value:{kind:"IntValue",value:"15"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"Variable",name:{kind:"Name",value:"orderBy"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"parentId"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:141}};n.loc.source={body:"query commentPageInfo($id: Int!, $orderBy: String!) {\n  comment(id: $id) {\n    pageNum(numPerPage: 15, orderBy: $orderBy)\n    parentId\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["commentPageInfo"]=o(n,"commentPageInfo")},ZKYJ:function(e,t,n){"use strict";var a={};n.r(a);n.d(a,"createComment",function(){return H.a});n.d(a,"updateComment",function(){return Q.a});n.d(a,"deleteComment",function(){return J.a});n.d(a,"updateVote",function(){return Y.a});var o={};n.r(o);n.d(o,"commentReplies",function(){return ee.a});n.d(o,"getCommentPage",function(){return ne.a});n.d(o,"getTopicCommentCount",function(){return re.a});n.d(o,"getAllComments",function(){return oe.a});n.d(o,"getCommentsSelection",function(){return le.a});n.d(o,"getMatchedUsers",function(){return ce.a});var i={};n.r(i);n.d(i,"commentFragment",function(){return fe.a});var s=n("D57K");var l=n("ERkP");var d=n.n(l);var u=n("LR82");var c=n("LiEJ");var f=n("fQLH");var p=n("pN2L");var r=n("d9YI");var m=n("Jg5f");var v=n("IMYO");var h=n("lqvn");var g=n("z5yO");var b=n("AouM");var k=n("U3QC");var y=n("BUlm");var S=n("YnYl");var E=n("gd5h");var C=n("Y7lc");var _=n("60w7");var w=n("wgY5");var x=n.n(w);var N=n("kFJ8");var O=n("mhnT");var I=n("rzNM");var R=n("nnm9");var D=n.n(R);var P=n("DuHN");var j=n("IJu9");var F=n("9R3s");var T=n("sYqU");var M=n("+ik5");var L=n("e96/");var A=n("v5F5");var U=n("N1mo");var B=n("TkRQ");var V=n("nPqx");var q=n("v31z");var $=n("n7gG");var z=n("UqMZ");var W=n("ClFv");var H=n.n(W);var K=n("uc9o");var Q=n.n(K);var G=n("pkpq");var J=n.n(G);var Z=n("i5cE");var Y=n.n(Z);var X=n("1cOo");var ee=n.n(X);var te=n("YqSe");var ne=n.n(te);var ie=n("J1Z0");var re=n.n(ie);var ae=n("YIQn");var oe=n.n(ae);var se=n("5RBF");var le=n.n(se);var ue=n("kLg/");var ce=n.n(ue);var de=n("KaeL");var fe=n.n(de);var pe=n("LJ7e");var me=n("l1C2");var ve=n("1szP");var he=n("SwI/");var ge=n("JFCy");function be(e){var t=e.onClick||D.a;return d.a.createElement(q["a"],{className:e.className,icon:e.icon,type:"transparent",size:"xs",disabled:e.disabled,onClick:t},e.text)}var ke=Object(me["f"])(Me||(Me=s["__makeTemplateObject"](["\n  0% {\n    background-color: transparent;\n    box-shadow: none;\n  }\n  40% {\n    background-color: ",";\n    box-shadow: 0 0 0 5px ",";\n  }\n  60% {\n    background-color: ",";\n    box-shadow: 0 0 0 5px ",";\n  }\n  100% {\n    background-color: transparent;\n    box-shadow: none;\n  }\n"],["\n  0% {\n    background-color: transparent;\n    box-shadow: none;\n  }\n  40% {\n    background-color: ",";\n    box-shadow: 0 0 0 5px ",";\n  }\n  60% {\n    background-color: ",";\n    box-shadow: 0 0 0 5px ",";\n  }\n  100% {\n    background-color: transparent;\n    box-shadow: none;\n  }\n"])),he["a"].blue0,he["a"].blue0,he["a"].blue0,he["a"].blue0);var ye=Object(pe["default"])("div",{target:"e5i1odf0"})(function(e){var t=e.highlight;return t?{animation:ke+" 3s cubic-bezier(0.77, 0.01, 0.23, 1) 500ms"}:null},{flex:"0 0 auto",display:"flex",flexDirection:"column",padding:"10px 0",position:"relative"},"label:CommentBody;");var Se=Object(pe["default"])("div",{target:"e5i1odf1"})({display:"flex",width:"100%",justifyContent:"space-between",marginBottom:"10px"},"label:CommentHeader;");var Ee=Object(pe["default"])("div",{target:"e5i1odf2"})({display:"flex",alignItems:"center"},"label:CommentAvatarWrapper;");var Ce=Object(pe["default"])("img",{target:"e5i1odf3"})({width:"30px",height:"30px",borderRadius:"50%"},"label:CommentAvatar;");var _e=Object(pe["default"])("span",{target:"e5i1odf4"})({color:he["a"].dblue7,marginLeft:"8px"},"label:CommentUsername;");var we=Object(pe["default"])("span",{target:"e5i1odf5"})({fontSize:"14px",color:he["a"].dark5,lineHeight:"30px",'&[data-status="Deleted"]':{color:he["a"].red2},'&[data-status="Pending"]':{color:he["a"].dblue4}},"label:CommentTime;");var xe=Object(pe["default"])("div",{target:"e5i1odf6"})({borderLeft:"1px solid "+he["a"].dblue1,margin:"10px 0 0",padding:"0 0 0 19px",display:"flex",flexDirection:"column"},"label:ReplyCommentsWrapper;");var Ne=Object(pe["default"])(be,{target:"e5i1odf7"})(function(e){return{display:e.visible===false?"none":"block",color:e.isDanger?he["a"].red5:undefined,userSelect:"none"}},"label:ToolButton;");var Oe=Object(pe["default"])("div",{target:"e5i1odf8"})(function(e){return{display:e.visible?"flex":"none",margin:"5px 0 0"}},"label:Toolbar;");var Ie=Object(pe["default"])("div",{target:"e5i1odf9"})({position:"relative",width:"100%",height:"32px"},"label:BottomButtonsWrapper;");var Re=Object(pe["default"])("div",{target:"e5i1odf10"})({position:"absolute",left:0,top:0,height:16,width:1,background:he["a"].dblue1},"label:LeftStick;");var De=Object(pe["default"])("div",{target:"e5i1odf11"})({position:"absolute",left:0,top:"15px",height:1,width:22,background:he["a"].dblue1},"label:LeftStick2;");var Pe=Object(pe["default"])("div",{target:"e5i1odf12"})({position:"absolute",left:"20px",top:0,display:"flex",alignItems:"center"},"label:ButtonGroup;");var je=Object(pe["default"])("div",{target:"e5i1odf13"})({height:"14px",width:"1px",margin:"auto 5px",background:he["a"].dblue1},"label:SplitStick;");var Fe=Object(pe["default"])("a",{target:"e5i1odf14"})({textDecoration:"underline","&:hover":{textDecoration:"underline"}},"label:MessageLink;");var Te=Object(ve["renderWithSize"])(function(e){if(e&&e.width<=530){return{size:ge["d"].SM}}else{return{size:ge["d"].MD}}},function(e){var t=e.size,n=e.repliesCount;if(t===ge["d"].SM){return d.a.createElement("span",null,""+n)}else{return d.a.createElement("span",null,n>1?"查看所有"+n+"条回复":"查看1条回复")}});var Me;var Le=n("JpoA");var Ae=n("G2Mx");var Ue=n("HswR");var Be=n("12aA");var Ve=n("fa4O");var qe=n("2srY");var $e=n.n(qe);var ze=n("tXyN");var We=n("6h7y");var He=Object(pe["default"])("div",{target:"e5i1odf0"})({height:"70px",border:"1px solid "+We["grey2"],borderRadius:"3px",background:We["grey1"],display:"flex",justifyContent:"center",alignItems:"center","& > div":{color:We["grey6"]},button:{margin:"0 10px"}},"label:Placeholder;");var Ke;(function(e){e["TooShort"]="Your comment must be at least 3 characters long.";e["NotVerified"]="Not verified user"})(Ke||(Ke={}));var Qe=function(t){s["__extends"](i,t);function i(e){var r=t.call(this,e)||this;r.subscription=new u["a"];r.commentArgs$=new f["a"];r.signIn=function(){z["a"].signIn()};r.onSubmit=function(e,t){r.commentArgs$.next({content:e,mentionedUserSlugs:t&&Object.values(t.nameMap)});return r.commentSubmitted$.pipe(Object(Ae["a"])(1),Object(Ue["a"])(function(e){var t=e.data;var n=r.mode==="reply"?"createCnComment":"updateComment";var i=$e()(t,n);if(i.error){return Object(Le["a"])(i.error)}return Object(p["a"])(i.comment)}),Object(k["a"])(function(e){var t=r.props.onSubmitted;if(e&&t){t(e)}}),Object(Be["a"])(true),Object(v["a"])(function(e){var t;switch(e){case Ke.TooShort:t="您的评论过短";break;case Ke.NotVerified:t="请先验证您的电子邮箱或手机号";break;default:t="评论发送失败，请稍后再试";break}P["a"].error(t);return Object(p["a"])(false)}))};r.onSearchUsers=function(e){return Object(C["b"])({query:o.getMatchedUsers,variables:{namePrefix:e,topicId:r.props.topicId}}).pipe(Object(m["a"])(function(e){var t=e.data.matchedUsers;return t?t:[]}),Object(m["a"])(function(e){return e.filter(function(e){return e&&!!e.profile&&!!e.profile.realName})}),Object(v["a"])(function(e){console.error(e);return Object(p["a"])([])}))};r.commentSubmitted$=r.commentArgs$.pipe(Object(I["a"])(function(e){if(r.mode==="reply"){return Object(C["a"])({mutation:a.createComment,variables:{content:e.content,topicId:r.props.topicId,parentCommentId:r.props.parentId?parseInt(r.props.parentId,10):undefined,mentionedUserSlugs:e.mentionedUserSlugs}})}else{return Object(C["a"])({mutation:a.updateComment,variables:{id:parseInt(r.props.commentId,10),content:e.content,mentionedUserSlugs:e.mentionedUserSlugs}})}}),Object(Ve["a"])());return r}Object.defineProperty(i.prototype,"mode",{get:function(){return!!this.props.commentId?"update":"reply"},enumerable:true,configurable:true});i.prototype.componentDidMount=function(){this.subscription.add(this.commentSubmitted$.subscribe()).add(this.trackActions$.subscribe());var e=this.props.exclusiveSymbol;var t=i.exclusiveGroups;var n=t.get(e);if(n){n.close()}t.set(e,this)};i.prototype.componentWillUnmount=function(){this.subscription.unsubscribe();var e=this.props.exclusiveSymbol;var t=i.exclusiveGroups;var n=t.get(e);if(n&&n===this){t.delete(e)}};i.prototype.render=function(){if(!this.props.userStatus.isSignedIn){return d.a.createElement(He,null,d.a.createElement("div",null,"请先",d.a.createElement(q["a"],{type:"primary",size:"xs",onClick:this.signIn},"登录"),"后发表评论"))}return d.a.createElement(ze["a"],{maxRow:10,primaryBtnText:this.props.commentId&&"确定",autoFocus:this.props.autoFocus,closable:!!this.props.parentId||!!this.props.commentId,defaultMeta:this.props.defaultMeta,defaultValue:this.props.defaultValue,onClose:this.props.onCancel,onSubmit:this.onSubmit,onSearchUsers:this.onSearchUsers})};i.prototype.close=function(){var e=this.props.onCancel;e&&e()};Object.defineProperty(i.prototype,"trackActions$",{get:function(){var t=this;return this.commentSubmitted$.pipe(Object(g["a"])(function(){return t.mode==="reply"}),Object(Ae["a"])(1),Object(m["a"])(function(e){var t=e.data;if(t&&t.createCnComment){var n=t.createCnComment,i=n.ok,r=n.comment;return i?r.post.mentionedUsers:null}return null}),Object(v["a"])(function(){return Object(p["a"])(null)}),Object(k["a"])(function(e){if(e){t.props.tracker.submitComment("comment",e.map(function(e){return e.userSlug}))}}))},enumerable:true,configurable:true});i.exclusiveGroups=new Map;i.defaultProps={exclusiveSymbol:Symbol("CommentBoxDefaultSymbol")};return i}(d.a.PureComponent);var Ge=Object(me["f"])(rt||(rt=s["__makeTemplateObject"](["\n  0% {\n    bottom: 0;\n  }\n  100% {\n    bottom: -800%;\n  }\n"],["\n  0% {\n    bottom: 0;\n  }\n  100% {\n    bottom: -800%;\n  }\n"])));var Je=function(e){var t=e.type;var n=t==="white";return{backgroundColor:n?"white":We["grey2"],position:"relative",overflow:"hidden","&::before":{content:'""',borderRadius:"3px",position:"absolute",width:"100%",height:"900%",bottom:0,backgroundImage:"linear-gradient(5deg, #"+(n?"fcfcfc":"f3f3f3")+" 30%, "+(n?"white":We["grey0"])+" 50%, #"+(n?"fcfcfc":"f3f3f3")+" 70%)",animation:Ge+" 1.4s linear infinite"}}};var Ze=Object(pe["default"])("div",{target:"e5i1odf0"})({display:"flex",flexDirection:"column",margin:"20px 0 0",width:"100%","&:nth-last-child(1)":{marginBottom:"20px"}},"label:LoadingCard;");var Ye=Object(pe["default"])("div",{target:"e5i1odf1"})({display:"flex",alignItems:"center"},"label:HeadRow;");var Xe=Object(pe["default"])("div",{target:"e5i1odf2"})(Je,{width:"32px",height:"32px",borderRadius:"50%"},"label:LoadingcardImage;");var et={height:"15px"};var tt=Object(pe["default"])("div",{target:"e5i1odf3"})(Je,s["__assign"]({},et,{flex:"0 1 100px",margin:"0 0 0 10px"}),"label:Row1;");var nt=Object(pe["default"])("div",{target:"e5i1odf4"})(Je,s["__assign"]({},et,{width:"100%",margin:"10px 0 0"}),"label:Row2;");var it=Object(pe["default"])("div",{target:"e5i1odf5"})(Je,s["__assign"]({},et,{width:"100%",maxWidth:"200px",margin:"10px 0 0"}),"label:Row3;");var rt;var at=function(e){s["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.render=function(){return d.a.createElement(Ze,null,d.a.createElement(Ye,null,d.a.createElement(Xe,{type:this.props.type}),d.a.createElement(tt,{type:this.props.type})),d.a.createElement(nt,{type:this.props.type}),d.a.createElement(it,{type:this.props.type}))};t.defaultProps={type:"gray"};return t}(d.a.PureComponent);var ot=i.commentFragment;var st=function(e){s["__extends"](l,e);function l(){var c=e!==null&&e.apply(this,arguments)||this;c.state={shouldShowReplyBox:false,shouldShowMoreTools:false,shouldRenderReplies:!!c.props.shouldRenderReplies,shouldShowDeleteConfirm:false,shouldShowCommentEditor:false,repliesCount:c.props.comment.numChildren,lastCursor:null,hasNextPage:false,replies:[],newReplies:[],shouldShowFlagModal:false,shouldShowRepliesLoading:false};c.$container=d.a.createRef();c.inVoteMutate=false;c.isMyPost=c.props.userStatus.userSlug===c.props.comment.post.author.profile.userSlug;c.isAbleToMutate=c.isMyPost||!!c.props.userStatus.isSuperuser;c.fetchReplyComments$=new f["a"];c.delete$=new f["a"];c.subscription=new u["a"];c.replyComments$=c.fetchReplyComments$.pipe(Object(k["a"])(function(e){if(!e){c.setState({replies:[],lastCursor:null})}}),Object(g["a"])(function(e){return e}),Object(k["a"])(function(){c.setState(function(){return{shouldShowRepliesLoading:true}})}),Object(b["a"])(function(){return c.getCommentReplies().pipe(Object(O["a"])(c.fetchReplyComments$.pipe(Object(g["a"])(function(e){return!e}))))}),Object(m["a"])(function(e){return e.data.commentReplyConnection}),Object(k["a"])(function(e){var t=e.edges,n=e.pageInfo,i=e.totalNum;c.setState({repliesCount:i,hasNextPage:n.hasNextPage,replies:t,newReplies:[],shouldShowRepliesLoading:false,lastCursor:n.endCursor},function(){c.scrollToComment()})}));c.deleteComment$=c.delete$.pipe(Object(I["a"])(function(e){return Object(C["a"])({mutation:a.deleteComment,variables:e})}),Object(g["a"])(function(e){var t=e.data;return!!(t&&t.deleteComment&&t.deleteComment.ok)}),Object(k["a"])(function(){c.props.onDeleteComment(c.props.comment.id)}));c.toggleReplies=function(e){if(e===void 0){e=!c.state.shouldRenderReplies}c.setState({shouldRenderReplies:e},function(){c.fetchReplyComments$.next(c.state.shouldRenderReplies)})};c.onEnterComment=function(){return c.setState(function(){return{shouldShowMoreTools:true}})};c.onHideMoreTools=function(){return c.setState(function(){return{shouldShowMoreTools:false}})};c.onShowReplyBox=function(){c.setState({shouldShowReplyBox:true},function(){})};c.onHideReplyBox=function(){c.setState({shouldShowReplyBox:false});c.props.tracker.cancelComment()};c.onShowDeleteConfirm=function(){c.setState(function(){return{shouldShowDeleteConfirm:true}});c.props.tracker.deleteComment(c.props.parent&&c.props.parent.id)};c.onHideDeleteConfirm=function(){c.setState(function(){return{shouldShowDeleteConfirm:false}});c.props.tracker.cancelDeleteComment(c.props.parent&&c.props.parent.id)};c.onToggleReplies=function(){c.toggleReplies()};c.onBlinkAnimationEnd=function(){c.props.updateHighlightCommentId(null)};c.onCloseFLag=function(){return c.setState(function(){return{shouldShowFlagModal:false}})};c.onOpenFlag=function(){return c.setState(function(){return{shouldShowFlagModal:true}})};c.onShare=function(){var e=c.props.generateShareUrl(c.props.comment.id);L["a"].copy(e,function(){P["a"].success("已复制分享链接",1)})};c.onLoadMore=function(){c.fetchReplyComments$.next(true)};c.onSubmitted=function(e){c.props.updateHighlightCommentId(e.id);c.addCommentToCache(e);c.setState({shouldShowReplyBox:false});var t=c.props.parent||c;t.toggleReplies(true)};c.onUpdated=function(){c.setState({shouldShowCommentEditor:false})};c.onEditComment=function(){c.setState({shouldShowCommentEditor:true})};c.onCancelEditComment=function(){c.setState({shouldShowCommentEditor:false})};c.handleVoteResult=function(e){if(e.votePost&&e.votePost.error){P["a"].error(e.votePost.error)}};c.deleteReply=function(t){var e=c.props.parent||c;var n=Object(F["a"])(e.props.comment);if(!n)return;var i=E["a"].readFragment({id:n,fragment:ot});if(!i)return;E["a"].writeFragment({id:n,fragment:ot,data:s["__assign"]({},i,{numChildren:i.numChildren-1})});c.props.updateTotalNumCache(-1);var r=function(e){return!!e&&e.node.id!==t};e.setState(function(e){return{newReplies:e.newReplies.filter(r),replies:e.replies.filter(r),repliesCount:e.repliesCount-1}});c.props.tracker.confirmDeleteComment(c.props.parent&&c.props.parent.id)};c.showVerificationMessage=function(){var e=function(){window.open(T["a"].myAccount,"_blank");l.messageCloseFunc();l.messageCloseFunc=D.a};if(l.messageCloseFunc===D.a){l.messageCloseFunc=P["a"].error(d.a.createElement("span",null,"请验证手机或邮箱后继续操作，",d.a.createElement(Fe,{onClick:e},"前往验证")),0)}};c.renderCommentVote=function(u){return function(n){var e=c.props.comment.post,i=e.voteUpCount,t=e.voteStatus;var r=t===1;var a=t===-1;var o=function(){if(c.isMyPost||c.inVoteMutate){return}if(!c.props.userStatus.isVerified){c.showVerificationMessage();return}var e=u==="like"?r?0:1:a?0:-1;var t=i+(r?-1:u==="like"?1:0);n({variables:{postId:c.props.comment.post.id,voteStatus:e},optimisticResponse:{votePost:{__typename:"VotePost",ok:true,error:null,value:t,post:{__typename:"PostNode",id:c.props.comment.post.id,voteStatus:e,voteUpCount:t}}}}).then(function(){c.inVoteMutate=false}).catch(function(){c.inVoteMutate=false});c.inVoteMutate=true};var s=u==="like"?i>0?i:"赞":"踩";var l=u==="like"?r?"thumb-up":"thumb-up-o":a?"thumb-down":"thumb-down-o";return d.a.createElement(Ne,{icon:l,text:s,onClick:z["a"].ensureSignedIn(o),disabled:c.isMyPost})}};return c}Object.defineProperty(l.prototype,"id",{get:function(){return this.props.comment.id},enumerable:true,configurable:true});Object.defineProperty(l.prototype,"parentId",{get:function(){return this.props.parent?this.props.parent.id:this.id},enumerable:true,configurable:true});l.prototype.componentDidMount=function(){if(this.props.comment.id===this.props.highlightCommentId){this.scrollToComment()}var e=this.props.parent?D.a:this.replyComments$.subscribe();var t=this.deleteComment$.subscribe();this.subscription.add(e).add(t);if(this.state.shouldRenderReplies){this.fetchReplyComments$.next(true)}L["a"].prepare()};l.prototype.componentWillUnmount=function(){this.subscription.unsubscribe()};l.prototype.render=function(){var e=this.props.comment,t=e.id,n=e.post,i=e.isEdited;var r=n.author;return d.a.createElement(d.a.Fragment,null,this.renderConfirmDelete(),d.a.createElement($["a"],{visible:this.state.shouldShowFlagModal,postId:n.id,onClose:this.onCloseFLag}),d.a.createElement(ye,{onMouseEnter:this.onEnterComment,onMouseLeave:this.onHideMoreTools,onAnimationEnd:this.onBlinkAnimationEnd,ref:this.$container,highlight:t===this.props.highlightCommentId},d.a.createElement(Se,null,d.a.createElement(Ee,null,d.a.createElement("a",{href:T["a"].userProfile(r.profile.userSlug),target:"_blank"},d.a.createElement(Ce,{src:r.profile.userAvatar,alt:r.username}),d.a.createElement(_e,null,r.profile.realName))),d.a.createElement(we,{"data-status":n.status},n.status==="Deleted"&&"已删除",n.status==="Pending"&&"审核中",i&&"（已编辑）",["Deleted","Pending"].indexOf(n.status)<0&&x()(n.creationDate*1e3).fromNow())),this.renderContent(n),this.renderToolBars(),this.renderReplyBox(),this.renderReplyComments(),this.renderBottomButtons()))};l.prototype.scrollToComment=function(){var e=this;requestAnimationFrame(function(){e.$container.current&&e.$container.current.scrollIntoView({behavior:"smooth"})})};l.prototype.getCommentReplies=function(){var e={commentId:this.props.comment.id,first:10,after:this.state.lastCursor?this.state.lastCursor:undefined};return Object(C["c"])({query:o.commentReplies,variables:e,fetchPolicy:"network-only"})};l.prototype.addCommentToCache=function(t){var e=this.props.parent||this;var n=Object(F["a"])(e.props.comment);if(!n)return;var i=E["a"].readFragment({id:n,fragment:ot});if(!i)return;E["a"].writeFragment({id:n,fragment:ot,data:s["__assign"]({},i,{numChildren:i.numChildren+1})});e.setState(function(e){return{newReplies:e.newReplies.concat([{node:t}]),repliesCount:e.repliesCount+1,lastCursor:null}});this.props.updateTotalNumCache(1)};l.prototype.renderReplyComments=function(){var t=this;if(!this.state.shouldRenderReplies){return null}var e=this.state,n=e.replies,i=e.newReplies;var r=function(e){return d.a.createElement(l,{key:e.node.id,parent:t,topicId:t.props.topicId,comment:e.node,highlightCommentId:t.props.highlightCommentId,updateTotalNumCache:t.props.updateTotalNumCache,updateHighlightCommentId:t.props.updateHighlightCommentId,onDeleteComment:t.deleteReply,generateShareUrl:t.props.generateShareUrl,tracker:t.props.tracker,userStatus:t.props.userStatus})};var a=new Set(i.map(function(e){return e.node.id}));var o=n.filter(function(e){return!a.has(e.node.id)}).map(r);var s=i.map(r);return d.a.createElement(xe,null,[o,s,this.state.shouldShowRepliesLoading&&d.a.createElement(at,{type:"white",key:"loading"})])};l.prototype.renderContent=function(e){var t=e.mentionedUsers;var n={};if(t){t.forEach(function(e){if(e)n[e.nickName]=e.userSlug})}if(!this.state.shouldShowCommentEditor){Object(A["b"])(n);return d.a.createElement(U["a"],{dangerouslySetInnerHTML:{__html:Object(B["a"])().render(e.content)}})}return d.a.createElement(Qe,{autoFocus:true,exclusiveSymbol:l.editSymbol,topicId:this.props.topicId,commentId:this.props.comment.id,defaultValue:e.content,defaultMeta:{nameMap:n},tracker:this.props.tracker,onCancel:this.onCancelEditComment,onSubmitted:this.onUpdated,userStatus:this.props.userStatus})};l.prototype.renderReplyBox=function(){var e;if(!this.state.shouldShowReplyBox){return null}var t=this.props.comment.post.author.profile,n=t.userSlug,i=t.realName;var r={nameMap:(e={},e[i]=n,e)};return d.a.createElement(Qe,{autoFocus:true,exclusiveSymbol:l.replySymbol,topicId:this.props.topicId,defaultValue:"@"+i+" ",defaultMeta:r,tracker:this.props.tracker,parentId:this.parentId,onCancel:this.onHideReplyBox,onSubmitted:this.onSubmitted,userStatus:this.props.userStatus})};l.prototype.renderToolBars=function(){var e=this.state,t=e.shouldShowReplyBox,n=e.shouldShowMoreTools,i=e.shouldRenderReplies,r=e.repliesCount;return d.a.createElement(Oe,{visible:!t},d.a.createElement(N["b"],{mutation:a.updateVote,onCompleted:this.handleVoteResult},this.renderCommentVote("like")),d.a.createElement(N["b"],{mutation:a.updateVote,onCompleted:this.handleVoteResult},this.renderCommentVote("dislike")),d.a.createElement(Ne,{icon:"chat",text:d.a.createElement(Te,{repliesCount:r}),visible:!i&&r>=1,onClick:this.onToggleReplies}),d.a.createElement(Ne,{icon:"reply-o",text:"回复",onClick:z["a"].ensureSignedIn(this.onShowReplyBox)}),d.a.createElement(Ne,{icon:"share",text:"分享",visible:n,onClick:this.onShare}),d.a.createElement(Ne,{icon:"report",text:"举报",visible:n,onClick:z["a"].ensureSignedIn(this.onOpenFlag)}),this.isAbleToMutate&&d.a.createElement(Ne,{icon:"edit",text:"编辑",isDanger:!!this.props.userStatus.isSuperuser,visible:n,onClick:this.onEditComment}),this.isAbleToMutate&&d.a.createElement(Ne,{icon:"bin",text:"删除",isDanger:!!this.props.userStatus.isSuperuser,visible:n,onClick:this.onShowDeleteConfirm}))};l.prototype.renderConfirmDelete=function(){var e=this;if(!this.isAbleToMutate){return null}var t=this.props,n=t.parent,i=t.comment.numChildren;var r=function(){e.delete$.next({commentId:parseInt(e.props.comment.id,10)})};return d.a.createElement(V["a"],{visible:this.state.shouldShowDeleteConfirm,onClose:this.onHideDeleteConfirm,onOk:r},i?"此评论下的回复都会被删除，您确认要删除此评论吗？":"您确认要删除此"+(n?"回复":"评论")+"吗？")};l.prototype.renderBottomButtons=function(){if(!this.state.shouldRenderReplies){return null}return d.a.createElement(Ie,null,d.a.createElement(Re,null),d.a.createElement(De,null),d.a.createElement(Pe,null,d.a.createElement(q["a"],{type:"ghost",size:"sm",onClick:this.onToggleReplies},"隐藏回复"),this.state.hasNextPage&&d.a.createElement(d.a.Fragment,null,d.a.createElement(je,null),d.a.createElement(q["a"],{type:"ghost",size:"sm",onClick:this.onLoadMore},"显示更多回复"))))};l.replySymbol=Symbol("reply-comment");l.editSymbol=Symbol("edit-comment");l.messageCloseFunc=D.a;return l}(d.a.PureComponent);var lt=function(){var r=new M["a"];return function(n){var e=s["__read"](Object(l["useState"])(false),2),t=e[0],i=e[1];Object(l["useEffect"])(function(){var e=r.add(function(){Object(B["a"])().render(n.comment.post.content)});var t=r.add(function(){i(true)});return function(){e();t()}},[]);return t?d.a.createElement(st,s["__assign"]({},n)):null}}();var ut=n("5ZzG");var ct=Object(pe["default"])("div",{target:"e5i1odf0"})({display:"flex",flex:"0 0 auto"},"label:TopPart;");var dt=Object(pe["default"])("div",{target:"e5i1odf1"})({flex:"1 1 auto",display:"flex",height:"42px",alignItems:"center",fontSize:"13px",color:We["grey7"]},"label:CommentInfo;");var ft=Object(pe["default"])("div",{target:"e5i1odf2"})({marginRight:"5px",fontSize:"20px",fontFamily:"FetteMittelschrift, sans-serif"},"label:CommentNum;");var pt=Object(pe["default"])(ut["a"],{target:"e5i1odf3"})({width:"14px",height:"14px",marginLeft:"4px"},"label:Icon;");var mt=Object(pe["default"])("div",{target:"e5i1odf4"})({flex:"0 0 auto",display:"flex",alignItems:"center"},"label:SortOptions;");var vt=Object(pe["default"])("div",{target:"e5i1odf5"})(function(e){return{flex:"0 0 auto",color:e.isActive?We["grey7"]:We["grey4"],cursor:e.isActive?"default":"pointer","&:nth-last-child(1)":{paddingLeft:"15px"},"&:not(:nth-last-child(1))":{paddingRight:"15px",borderRight:"1px solid "+We["grey2"]}}},"label:SortOption;");var ht=Object(pe["default"])("div",{target:"e5i1odf6"})({padding:"0 0 20px"},"label:EditorWrapper;");var gt=function(e){s["__extends"](t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;n.onChangeOrderBy=function(e){var t=e.currentTarget.dataset.orderBy;if(t){n.props.onChangeOrderBy(t)}};return n}t.prototype.render=function(){var e=this.props,t=e.orderBy,n=e.commentNum;return d.a.createElement(d.a.Fragment,null,d.a.createElement(ct,null,d.a.createElement(dt,null,d.a.createElement(ft,null,n!==null?n:"-"),"条评论",d.a.createElement(pt,{type:"debug"})),d.a.createElement(mt,null,d.a.createElement(vt,{isActive:t===S["c"].NewToOld,"data-order-by":S["c"].NewToOld,onClick:this.onChangeOrderBy},"从新至旧"),d.a.createElement(vt,{isActive:t===S["c"].OldToNew,"data-order-by":S["c"].OldToNew,onClick:this.onChangeOrderBy},"从旧至新"))),this.props.isActive&&d.a.createElement(ht,null,d.a.createElement(Qe,{topicId:this.props.topicId,tracker:this.props.tracker,onSubmitted:this.props.onSubmitted,userStatus:this.props.userStatus})))};return t}(d.a.PureComponent);var bt=n("Q0jv");var kt=Object(pe["default"])("div",{target:"e5i1odf0"})({margin:"30px 0 0",textAlign:"center",fontSize:"20px",lineHeight:1.4,color:We["grey3"]},"label:EmptyPlaceHolder;");var yt=Object(pe["default"])("div",{target:"e5i1odf1"})({display:"flex",alignItems:"stretch",flexDirection:"column",overflow:"auto",minHeight:"100%",WebkitOverflowScrolling:"touch"},"label:DiscussWrapper;");var St=Object(pe["default"])("div",{target:"e5i1odf2"})({display:"flex",flex:"0 0 auto",flexDirection:"column"},"label:DiscussContent;");var Et=Object(pe["default"])(function(e){var t=e.className,n=s["__rest"](e,["className"]);return d.a.createElement("div",{className:t},d.a.createElement(bt["a"],s["__assign"]({},n)))},{target:"e5i1odf3"})({margin:"30px 0",display:"flex",justifyContent:"center"},"label:CommentPagination;");var Ct=Object(pe["default"])("div",{target:"e5i1odf4"})({position:"relative",margin:"10px 0",color:We["grey3"],textAlign:"center","&::before, &::after":{position:"absolute",top:"10px",content:'""',width:"calc(50% - 60px)",height:"1px",background:We["grey3"]},"&::before":{left:0},"&::after":{right:0}},"label:CommentsHead;");n.d(t,"a",function(){return _t});var _t=function(e){s["__extends"](t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;r.state={orderBy:S["c"].NewToOld,totalNum:null,topLevelNum:null,currentPage:1,comments:null,commentsSelection:null,parentId:null,loadingComments:true,deletedCommentIds:[],lastPostedComment:null,highlightCommentId:r.props.sharedCommentId};r.subscription=new u["a"];r.isActive$=new c["a"](r.props.isActive);r.topicId$=new c["a"](r.props.topicId);r.fetchAction$=new f["a"];r.onSubmitted=function(e){r.updateHighlightCommentId(e.id);r.setState({lastPostedComment:e},function(){r.updateTotalNumCache(1);r.onPageChange(r.state.orderBy===S["c"].NewToOld?1:Math.floor(r.state.topLevelNum/15)+1)})};r.onDeleteComment=function(i){r.setState(function(e){var t=new Set(e.deletedCommentIds);t.add(i);var n={deletedCommentIds:Array.from(t)};if(e.lastPostedComment&&i===e.lastPostedComment.id){n.lastPostedComment=null}return n},function(){var e=r.getEdges();r.updateTotalNumCache(-1);if(e.length===0){r.onPageChange(1)}})};r.onChangeOrderBy=function(e){r.setState({orderBy:e},function(){r.fetchAction$.next()})};r.onPageChange=function(e){if(e!==r.state.currentPage){r.setState({currentPage:e},function(){r.fetchAction$.next()})}};r.updateTotalNumCache=function(e){try{var t={query:o.getTopicCommentCount,variables:{topicId:r.props.topicId}};var n=E["a"].readQuery(s["__assign"]({},t));if(n&&n.topic){E["a"].writeQuery(s["__assign"]({},t,{data:{topic:s["__assign"]({},n.topic,{commentCount:n.topic.commentCount+e})}}))}}catch(e){console.warn("fail to update count cache",e)}};r.updateHighlightCommentId=function(e){r.setState({highlightCommentId:e})};return r}t.prototype.componentDidMount=function(){this.subscription.add(this.watchTotalCount).add(this.fetchCurrentPage).add(this.triggerFetchAfterActive);this.tick()};t.prototype.componentDidUpdate=function(){this.tick()};t.prototype.componentWillUnmount=function(){this.subscription.unsubscribe()};t.prototype.render=function(){return d.a.createElement(yt,null,d.a.createElement(gt,{isActive:this.props.isActive,topicId:this.props.topicId,commentNum:this.state.totalNum,orderBy:this.state.orderBy,tracker:this.props.tracker,onSubmitted:this.onSubmitted,onChangeOrderBy:this.onChangeOrderBy,userStatus:this.props.userStatus}),this.renderComments(),this.renderPagination())};Object.defineProperty(t.prototype,"commentPageInfo$",{get:function(){var n={pageNum:1,parentId:null};if(!this.props.sharedCommentId){return Object(p["a"])(n)}var e={id:parseInt(this.props.sharedCommentId,10),orderBy:this.state.orderBy===S["c"].NewToOld?"newest_to_oldest":"oldest_to_newest"};return Object(C["b"])({query:o.getCommentPage,variables:e}).pipe(Object(m["a"])(function(e){var t=e.data;if(t.comment){return{pageNum:t.comment.pageNum,parentId:t.comment.parentId}}else{return n}}),Object(v["a"])(function(){return Object(p["a"])(n)}))},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"triggerFetchAfterActive",{get:function(){var i=this;return this.isActive$.pipe(Object(h["a"])(),Object(g["a"])(function(e){return e}),Object(b["a"])(function(){return i.commentPageInfo$}),Object(k["a"])(function(e){var t=e.pageNum,n=e.parentId;i.setState({currentPage:t,parentId:n});i.fetchAction$.next()})).subscribe()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"watchTotalCount",{get:function(){var n=this;return this.isActive$.pipe(Object(h["a"])(),Object(b["a"])(function(e){return e?n.topicId$:r["a"]}),Object(b["a"])(function(e){return Object(C["c"])({query:o.getTopicCommentCount,variables:{topicId:e}})}),Object(k["a"])(function(e){var t=e.data;if(t.topic){n.setState({totalNum:t.topic.commentCount})}})).subscribe()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fetchCurrentPage",{get:function(){var r=this;return this.fetchAction$.pipe(Object(m["a"])(function(){var e=r.state,t=e.currentPage,n=e.orderBy;return{currentPage:t,orderBy:n}}),Object(k["a"])(function(){return r.setState({loadingComments:true})}),Object(b["a"])(function(e){var t=e.currentPage,n=e.orderBy;var i;if(r.state.orderBy===S["c"].NewToOld&&r.state.currentPage===1){i=r.getCommentsSelection$().pipe(Object(m["a"])(function(e){var t=e.data;return t&&t.commentsSelection}))}else{i=Object(p["a"])([])}return r.getAllComments$(t,n).pipe(Object(m["a"])(function(e){var t=e.data;return t&&t.cnTopicComments}),Object(y["a"])(i))}),Object(k["a"])(function(e){var t=s["__read"](e,2),n=t[0],i=t[1];if(n&&i){r.setState({loadingComments:false,comments:n,commentsSelection:i,topLevelNum:n.totalNum})}})).subscribe()},enumerable:true,configurable:true});t.prototype.getEdges=function(){var t=this;if(!this.state.comments){console.warn("no data");return[]}var e=this.state.comments.edges;e=e.filter(function(e){return t.state.deletedCommentIds.indexOf(e.node.id)<0});var n=this.state.lastPostedComment;if(n){var i=e.some(function(e){return e.node.id===n.id});if(!i){var r=[{cursor:"",node:n}];e=this.state.orderBy===S["c"].NewToOld?r.concat(e):e.concat(r)}else{requestAnimationFrame(function(){return t.setState({lastPostedComment:null})})}}return e};t.prototype.getAllComments$=function(e,t){var n={topicId:this.props.topicId,skip:(e-1)*15,orderBy:t};return Object(C["c"])({query:o.getAllComments,variables:n,fetchPolicy:"cache-and-network"})};t.prototype.getCommentsSelection$=function(){var e={topicId:String(this.props.topicId)};return Object(C["c"])({query:o.getCommentsSelection,variables:e})};t.prototype.tick=function(){this.isActive$.next(this.props.isActive);this.topicId$.next(this.props.topicId)};t.prototype.renderComments=function(){var t=this;if(this.state.loadingComments){return d.a.createElement(d.a.Fragment,null,d.a.createElement(at,null),d.a.createElement(at,null))}var e=this.getEdges();if(!e.length){return d.a.createElement(kt,null,"暂无评论")}var n=this.state.commentsSelection;var i=n&&n.length>0&&n.map(function(e){return t.renderComment(e)});var r=e.map(function(e){return e&&t.renderComment(e.node)});return d.a.createElement(St,null,!!i&&d.a.createElement(Ct,null,"精选评论(",n.length,")"),i,!!i&&d.a.createElement(Ct,null,"评论(",Object(_["b"])(this.state.totalNum||0),")"),r)};t.prototype.renderComment=function(e){if(!e)return null;return d.a.createElement(lt,{key:e.id,topicId:this.props.topicId,comment:e,shouldRenderReplies:e.id===this.state.parentId,highlightCommentId:this.state.highlightCommentId,updateTotalNumCache:this.updateTotalNumCache,updateHighlightCommentId:this.updateHighlightCommentId,onDeleteComment:this.onDeleteComment,generateShareUrl:this.props.generateShareUrl,tracker:this.props.tracker,userStatus:this.props.userStatus})};t.prototype.renderPagination=function(){if(this.state.loadingComments){return null}return d.a.createElement(Et,{current:this.state.currentPage,numPerPage:15,totalNum:this.state.topLevelNum,onChange:this.onPageChange})};return t}(d.a.PureComponent)},ZqiK:function(e,t,n){e.exports={root:"root__1wer",icon:"icon__3LUB"}},a4JM:function(e,t,n){"use strict";n.d(t,"a",function(){return m});n.d(t,"b",function(){return v});var i=n("D57K");var r=n("ERkP");var a=n.n(r);var o=n("nnm9");var s=n.n(o);var l=n("xdqw");var u=n("AnWY");var c=Object(l["a"])(u["f"]);var d=a.a.createContext({isSourceQuestion:false,toggleShowSourceQuestion:s.a}),f=d.Provider,p=d.Consumer;var m=function(t){return function(n){i["__extends"](e,n);function e(e){var t=n.call(this,e)||this;t.handleToggleShowSourceQuestion=function(){t.setState(function(e){var t=e.isSourceQuestion;return{isSourceQuestion:!t}},function(){c.set(u["a"],t.state.isSourceQuestion)})};t.state={isSourceQuestion:!!c.get(u["a"],false)};return t}e.prototype.render=function(){var e={isSourceQuestion:this.state.isSourceQuestion,toggleShowSourceQuestion:this.handleToggleShowSourceQuestion};return a.a.createElement(f,{value:e},a.a.createElement(t,i["__assign"]({},this.props)))};return e}(r["Component"])};var v=function(n){return function(t){return a.a.createElement(p,null,function(e){return a.a.createElement(n,i["__assign"]({},e,t))})}}},aDWd:function(e,t,n){e.exports=n.p+"7917192c073e5f349bad8cbee200c428.jpg"},bcHh:function(e,t,n){e.exports=n.p+"b57ccb2c31ad894cf5f431b637f524d3.png"},cuV4:function(e,t,n){e.exports=n.p+"785e0d3aad5988c6461146964f91f17a.jpg"},"d1/Z":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){switch(e){case 403:return"您必须登录后才能提交解答！";case 429:{return"你的提交过于频繁，请稍候重试"}case 503:return"此服务目前无法使用，请稍后重试";default:return"发生未知错误，请稍后重试，如果此错误仍然存在，请与我们联系"}}},dCET:function(e,t,n){"use strict";n.d(t,"c",function(){return i});n.d(t,"b",function(){return r});n.d(t,"a",function(){return o});var a=n("x4OZ");var i=function(e){var t="";var n=false;var i="";var r="";switch(e){case a["a"].PD:t="Pending";n=true;break;case a["a"].JG:t="Judging";n=true;break;case a["a"].TO:t="Timeout";i="Timeout means the server queue is busy and could not process your submission "+"for the time being. Please wait for about 10 seconds and submit again.";break;case a["a"].AC:t="Accepted";i="Accepted means your program passes all test cases, however it does not "+"necessarily mean your algorithm is optimal. If you believe your code has bugs, "+"please submit a 'missing test case' report in Discuss or sending an "+"email to admin.";break;case a["a"].FN:t="Finished";r="green";break;case a["a"].WA:t="Wrong Answer";break;case a["a"].MLE:t="Memory Limit Exceeded";break;case a["a"].OLE:t="Output Limit Exceeded";break;case a["a"].TLE:t="Time Limit Exceeded";i="TLE means all your outputs (may be empty) matches the expected output up "+"to the last executed test case. If the last executed test case is large, "+"your algorithm may be correct but not efficient enough. If you believe "+"your code should pass the judge, please raise this issue by posting in "+"Discuss or sending an email to admin.";break;case a["a"].RE:t="Runtime Error";break;case a["a"].IE:t="Internal Error";break;case a["a"].CE:t="Compile Error";break;case a["a"].UE:t="Unknown Error";break}return{statusText:t,running:n,toolTip:i,color:r}};var r=function(e){if(e===null)return null;return e in a["a"]?e:a["a"].UE};var o=function(e){return e!==a["a"].IE&&e!==a["a"].UE&&e!==a["a"].TO}},e2SA:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"performNotificationAction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"performNotificationAction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notification"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notificationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actioned"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:170}};n.loc.source={body:"mutation performNotificationAction($id: Int!) {\n  performNotificationAction(id: $id){\n    ok\n    error\n    notification {\n      notificationId\n      actioned\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["performNotificationAction"]=o(n,"performNotificationAction")},f9JR:function(e,t,n){"use strict";var r=n("D57K");var i=n("ERkP");var a=n.n(i);var o=n("H5qd");var s=n.n(o);var l=n("kFJ8");var u=s()(c||(c=r["__makeTemplateObject"](["\n  query fetchInterpretResult {\n    interpretResult @client {\n      status\n      input\n      output\n      expected\n      stdout\n      errorMsg\n      fullErrorMsg\n      statusMsg\n      runtime\n      lang\n      code\n      testcase\n      questionId\n      error\n      langKey\n      disableDebug\n    }\n  }\n"],["\n  query fetchInterpretResult {\n    interpretResult @client {\n      status\n      input\n      output\n      expected\n      stdout\n      errorMsg\n      fullErrorMsg\n      statusMsg\n      runtime\n      lang\n      code\n      testcase\n      questionId\n      error\n      langKey\n      disableDebug\n    }\n  }\n"])));t["a"]=function(i){return function(n){return a.a.createElement(l["c"],{query:u},function(e){var t=e.data.interpretResult;return a.a.createElement(i,r["__assign"]({interpretResult:t},n))})}};var c},fJHL:function(e,t,n){"use strict";var r=n("D57K");var i=n("ERkP");var a=n.n(i);var o=n("H5qd");var s=n.n(o);var l=n("kFJ8");var u=s()(c||(c=r["__makeTemplateObject"](["\n  query fetchSubmitResult {\n    submitResult @client {\n      status\n      input\n      output\n      expected\n      stdout\n      errorMsg\n      fullErrorMsg\n      statusMsg\n      runtime\n      runtimePercentile\n      lang\n      lastTestcase\n      questionTitle\n      submissionId\n      code\n      testcase\n      questionId\n      error\n      langKey\n      disableDebug\n      memory\n      memoryPercentile\n    }\n  }\n"],["\n  query fetchSubmitResult {\n    submitResult @client {\n      status\n      input\n      output\n      expected\n      stdout\n      errorMsg\n      fullErrorMsg\n      statusMsg\n      runtime\n      runtimePercentile\n      lang\n      lastTestcase\n      questionTitle\n      submissionId\n      code\n      testcase\n      questionId\n      error\n      langKey\n      disableDebug\n      memory\n      memoryPercentile\n    }\n  }\n"])));t["a"]=function(i){return function(n){return a.a.createElement(l["c"],{query:u},function(e){var t=e.data.submitResult;return a.a.createElement(i,r["__assign"]({submitResult:t},n))})}};var c},fisi:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("D57K");var r=n("ERkP");var a=n.n(r);var o=n("7Ej0");var s=n("6Ltx");var l=function(e){i["__extends"](t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.render=function(){return a.a.createElement(o["d"],{visible:this.props.visible},a.a.createElement(o["c"],null,a.a.createElement(o["e"],{href:Object(s["a"])()},"新建力扣账号"),a.a.createElement(o["b"],{href:Object(s["b"])()},"绑定已有力扣账号")))};return t}(a.a.PureComponent)},g9F7:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchEditorSettings"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"codeEditor"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fontSize"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"keyMap"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tabSize"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:103}};n.loc.source={body:"query fetchEditorSettings {\n  codeEditor @client {\n    fontSize\n    theme\n    keyMap\n    tabSize\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["fetchEditorSettings"]=o(n,"fetchEditorSettings")},hy2y:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"flagReasons"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"flagReasons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:57}};n.loc.source={body:"query flagReasons {\n  flagReasons {\n    id\n    name\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["flagReasons"]=o(n,"flagReasons")},i5cE:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"votePost"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"voteStatus"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"votePost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"value"},value:{kind:"Variable",name:{kind:"Name",value:"voteStatus"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"post"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"voteStatus"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"voteUpCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:198}};n.loc.source={body:"mutation votePost($postId: Int!, $voteStatus: Int!) {\n  votePost(postId: $postId, value: $voteStatus) {\n    ok\n    error\n    value\n    post {\n      id\n      voteStatus\n      voteUpCount\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["votePost"]=o(n,"votePost")},j4zt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"flagSomething"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FlagInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"flagSomething"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:97}};n.loc.source={body:"mutation flagSomething($data: FlagInput!) {\n  flagSomething(data: $data) {\n    ok\n    error\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["flagSomething"]=o(n,"flagSomething")},jWsR:function(e,t,n){"use strict";var i=n("D57K");var r=n("ERkP");var a=n.n(r);var o=n("LR82");var s=n("uZih");var l=n.n(s);var u=n("Jf4p");var c=n("RuI9");var d=n("LJ7e");var f=n("z45D");var p=Object(d["default"])("div",{target:"e5i1odf0"})(function(e){var t=e.isError;return!t?{opacity:0,pointerEvents:"none"}:null},{transition:"opacity 0.3s"},"label:ErrorMessageContainer;");var m=Object(d["default"])("p",{target:"e5i1odf1"})(i["__assign"]({},f["a"],{margin:"10px 0 20px 0"}),"label:ErrorMessagePara;");var v=n("yu9t");var h=function(e){i["__extends"](t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;a.state={value:a.props.defaultValue||"",isError:false,errorMessage:null};a.subscription=new o["a"];a.actionObserverListener=function(e){var t;if(e.type==="showError"){var n=e.value,i=n.errorMessage,r=n.inputName;if(a.props.name===r){a.updateErrorInfo(i)}}else if(e.type==="getFormValue"){e.value.addValue$.next((t={},t[a.props.name]=a.state.value,t))}};a.onBlur=function(e){if(typeof a.props.onBlur==="function"){a.props.onBlur(e)}a.validate("onBlur",a.state.value)};a.onChange=function(e){var t=e.target;var n=a.props.maxUtf8Bytes;var i=n?Object(u["a"])(t.value,n):t.value;a.setState({value:i},a.onValueChanged);a.validate("onChange",i)};a.onKeyDown=function(e){if(typeof a.props.onKeyDown==="function"){a.props.onKeyDown(e)}a.props.action$.next({type:"onKeyDown",value:{event:e}})};a.onValueChanged=function(){if(typeof a.props.onValueChanged==="function"){a.props.onValueChanged(a.state.value)}};return a}Object.defineProperty(t.prototype,"childProps",{get:function(){return i["__assign"]({},l()(this.props,"kind","value","validation","maxUtf8Bytes","onValueChanged","action$","onFieldMount","onFieldUnMount"),{value:this.state.value,onBlur:this.onBlur,onChange:this.onChange,onKeyDown:this.onKeyDown})},enumerable:true,configurable:true});t.prototype.componentDidMount=function(){this.subscription.add(this.props.action$.subscribe(this.actionObserverListener));this.props.onFieldMount(this.props.name,this.props.validation)};t.prototype.componentWillUnmount=function(){this.subscription.unsubscribe();this.props.onFieldUnMount(this.props.name)};t.prototype.render=function(){var e=Object(v["b"])(this.props.kind);return a.a.createElement(a.a.Fragment,null,a.a.createElement(e,i["__assign"]({},this.childProps)),this.renderErrorMessage())};t.prototype.validate=function(e,t){var n=!!this.props.validation[e];if(n){var i=this.props.validation.validate(e,t);this.updateErrorInfo(i)}};t.prototype.updateErrorInfo=function(e){this.setState({isError:!!e,errorMessage:e})};t.prototype.renderErrorMessage=function(){return a.a.createElement(p,{isError:this.state.isError},a.a.createElement(m,null,this.state.errorMessage))};return t}(a.a.PureComponent);var g=t["a"]=function(t){return a.a.createElement(c["a"],null,function(e){return a.a.createElement(h,i["__assign"]({},t,e))})}},jaZD:function(e,t,n){"use strict";n.d(t,"c",function(){return u});n.d(t,"b",function(){return s});n.d(t,"a",function(){return l});var i=n("D57K");var r=n("ERkP");var a=n.n(r);var o=a.a.createContext({}),s=o.Provider,l=o.Consumer;var u=function(n){return function(t){return a.a.createElement(l,null,function(e){return a.a.createElement(n,i["__assign"]({},e,t))})}}},joW0:function(e,t,n){e.exports={container:"container__2tj7",mask:"mask__2rjA",menu:"menu__1San","items-area":"items-area__1g7Y",itemsArea:"items-area__1g7Y","sign-in-area":"sign-in-area__1pdO",signInArea:"sign-in-area__1pdO","user-profile-area":"user-profile-area__1VWk",userProfileArea:"user-profile-area__1VWk",link:"link__34X7",avatar:"avatar__OUBM",username:"username__2gBZ",icon:"icon__3tuU",item:"item__YG_P"}},"kLg/":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"matchedUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"namePrefix"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topicId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"matchedUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"namePrefix"},value:{kind:"Variable",name:{kind:"Name",value:"namePrefix"}}},{kind:"Argument",name:{kind:"Name",value:"topicId"},value:{kind:"Variable",name:{kind:"Name",value:"topicId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"realName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userAvatar"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:206}};n.loc.source={body:"query matchedUsers($namePrefix: String!, $topicId: Int!) {\n  matchedUsers(namePrefix: $namePrefix, topicId: $topicId) {\n    username\n    profile {\n      realName\n      userSlug\n      userAvatar\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["matchedUsers"]=o(n,"matchedUsers")},n7gG:function(e,t,n){"use strict";var a=n("D57K");var i=n("ERkP");var r=n.n(i);var o=n("nPqx");var s=n("5ZzG");var l=n("H5qd");var u=n.n(l);var c=n("gd5h");var d=u()(p||(p=a["__makeTemplateObject"](["\n  mutation flagPost($postId: Int!, $flagType: ReportTypeEnum!, $content: String) {\n    flagPost(postId: $postId, flagType: $flagType, content: $content) {\n      ok\n      error\n    }\n  }\n"],["\n  mutation flagPost($postId: Int!, $flagType: ReportTypeEnum!, $content: String) {\n    flagPost(postId: $postId, flagType: $flagType, content: $content) {\n      ok\n      error\n    }\n  }\n"])));function f(i,r){return a["__awaiter"](this,void 0,Promise,function(){var t,n;return a["__generator"](this,function(e){switch(e.label){case 0:t={context:{fetchOptions:{signal:r}},mutation:d,variables:i};return[4,c["a"].mutate(t)];case 1:n=e.sent().data;return[2,n.flagPost]}})})}var p;var m=n("BlJA");var v=n.n(m);var h=function(){return{ADVERTISING:"骚扰广告",SEXUAL:"黄色内容",VIOLENT:"暴力内容",TERRORISM:"恐怖主义",POLITICS:"政治言论",FAKE:"造谣传谣",ILLEGAL:"违法内容",ABUSE:"辱骂他人",OTHER:"其他..."}};var g;(function(e){e[e["Success"]=0]="Success";e[e["Pending"]=1]="Pending";e[e["Failed"]=2]="Failed";e[e["Default"]=3]="Default"})(g||(g={}));function b(){var e=h();return v()(e)}function k(e){switch(e){case g.Success:return true;case g.Failed:return true;default:return false}}var y=n("LJ7e");var S=n("SwI/");var E=n("WfVQ");var C=n("v31z");var _={paddingTop:"0 !important"};var w=y["default"].div({display:"flex",justifyContent:"space-between",alignItems:"center",height:"44px",color:S["a"].dblue8,cursor:"pointer",svg:{width:"18px",height:"18px",opacity:0},":not(:last-of-type)":{borderBottom:"1px solid "+S["a"].dark8},'&[data-is-checked="true"]':{svg:{opacity:1}}},"label:ReportItem;");var x=Object(y["default"])(E["a"],{target:"e5i1odf0"})({width:"100%",margin:"5px 0 0",fontSize:"12px",lineHeight:"18px"},"label:StyledTextarea;");var N=y["default"].div({display:"flex",justifyContent:"flex-end"},"label:ModalFooter;");var O=Object(y["default"])(C["a"],{target:"e5i1odf1"})({minWidth:"80px",marginLeft:"20px"},"label:StyledButton;");n.d(t,"a",function(){return I});var I=function(e){a["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.state={reportType:null,reportStatus:g.Default,reportedMessage:"",reportContent:"",hasDisplayed:t.props.visible};t.flagPostController=null;t.onSelectItem=function(e){return function(){if(t.state.reportStatus!==g.Pending){t.setState({reportType:e})}}};t.onReportContentChange=function(e){t.setState({reportContent:e})};t.onPostFlag=function(){return a["__awaiter"](t,void 0,void 0,function(){var t,n,i;return a["__generator"](this,function(e){switch(e.label){case 0:if(!this.state.reportType)return[3,2];this.setState({reportStatus:g.Pending});this.abortFlagPost();this.flagPostController=new AbortController;return[4,f({postId:Number(this.props.postId),flagType:this.state.reportType,content:this.reportContent},this.flagPostController.signal)];case 1:t=e.sent(),n=t.ok,i=t.error;this.setState({reportStatus:n?g.Success:g.Failed,reportedMessage:i||"已向管理员举报"});e.label=2;case 2:return[2]}})})};t.onClose=function(){t.abortFlagPost();t.props.onClose(t.state.reportStatus)};t.afterModalClose=function(){t.setState({reportType:null,reportStatus:g.Default,reportedMessage:"",reportContent:""})};return t}t.getDerivedStateFromProps=function(e,t){return{hasDisplayed:t.hasDisplayed||e.visible}};Object.defineProperty(t.prototype,"reportContent",{get:function(){return this.state.reportType==="OTHER"?this.state.reportContent:null},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"isReported",{get:function(){return k(this.state.reportStatus)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"modalType",{get:function(){if(k(this.state.reportStatus)){var e=this.state.reportStatus===g.Failed;return e?"error":"success"}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"modalTitle",{get:function(){if(this.isReported){var e=this.state.reportStatus===g.Failed;return e?"失败":"成功"}return"举报该内容"},enumerable:true,configurable:true});t.prototype.render=function(){if(!this.state.hasDisplayed){return null}var e=this.state.reportStatus===g.Pending||this.state.reportType===null;var t=this.isReported?this.onClose:this.onPostFlag;return r.a.createElement(o["a"],{type:this.modalType,title:this.modalTitle,visible:this.props.visible,bodyClassName:this.isReported?undefined:_,onCancel:this.onClose,onClose:this.onClose,disableOk:e,onOk:t,afterClose:this.afterModalClose},this.renderModalContent())};t.prototype.abortFlagPost=function(){if(this.flagPostController){this.flagPostController.abort();this.flagPostController=null}};t.prototype.renderItems=function(){var n=this;return b().map(function(e){var t=n.state.reportType===e;return r.a.createElement(w,{key:e,onClick:n.onSelectItem(e),"data-is-checked":t},h()[e],r.a.createElement(s["a"],{type:"check"}))})};t.prototype.renderExtraInfo=function(){if(this.state.reportType!=="OTHER"){return null}return r.a.createElement(x,{placeholder:"输入举报理由",disabled:this.state.reportStatus===g.Pending,onChange:this.onReportContentChange})};t.prototype.renderModalContent=function(){if(k(this.state.reportStatus)){return this.state.reportedMessage}return r.a.createElement(r.a.Fragment,null,this.renderItems(),this.renderExtraInfo())};return t}(r.a.PureComponent)},o9r6:function(e,t,n){"use strict";var f=n("D57K");var i=n("ERkP");var r=n.n(i);var a=n("H5qd");var o=n.n(a);var s=n("fQLH");var p=n("pN2L");var m=n("U3QC");var v=n("IMYO");var h=n("G2Mx");var g=n("mhnT");var l=n("gd5h");var b=n("4xXt");var k=n("d1/Z");var y=n("x4OZ");var u=o()(S||(S=f["__makeTemplateObject"](["\n  mutation setSubmitResult($submitResult: SubmitResult) {\n    setSubmitResult(submitResult: $submitResult) @client\n  }\n"],["\n  mutation setSubmitResult($submitResult: SubmitResult) {\n    setSubmitResult(submitResult: $submitResult) @client\n  }\n"])));var c=o()(E||(E=f["__makeTemplateObject"](["\n  query getSubmissionList($questionSlug: String!) {\n    submissionList(questionSlug: $questionSlug) {\n      lastKey\n      hasNext\n      submissions {\n        id\n        statusDisplay\n        lang\n        runtime\n        timestamp\n        url\n        isPending\n        memory\n      }\n    }\n  }\n"],["\n  query getSubmissionList($questionSlug: String!) {\n    submissionList(questionSlug: $questionSlug) {\n      lastKey\n      hasNext\n      submissions {\n        id\n        statusDisplay\n        lang\n        runtime\n        timestamp\n        url\n        isPending\n        memory\n      }\n    }\n  }\n"])));var d=function(e){f["__extends"](t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.destroy$=new s["a"];t.setResult=function(e){l["a"].mutate({mutation:u,variables:{submitResult:e}})};t.cleanSubmitResult=function(){t.destroy$.next();l["a"].mutate({mutation:u,variables:{submitResult:{}}})};t.updateSubmissionList=function(e){var t=e.questionSlug,n=e.lang,i=e.submitResult;try{var r=l["a"].readQuery({query:c,variables:{questionSlug:t}});if(i.submissionId===undefined)return;var a={id:i.submissionId,isPending:"Not Pending",lang:n,runtime:i.runtime,memory:i.memory,statusDisplay:i.statusMsg,url:"/submissions/detail/"+i.submissionId+"/",timestamp:(new Date).getTime()/1e3,__typename:"SubmissionDumpNode"};var o=r.submissionList;var s=void 0;if(o.submissions.length&&o.submissions[0].id===a.id){s=f["__spread"](o.submissions);s[0]=a}else{s=f["__spread"]([a],o.submissions)}l["a"].writeQuery({query:c,variables:{questionSlug:t},data:{submissionList:f["__assign"]({},o,{submissions:s})}})}catch(e){}};t.submit=function(e){var i=e.questionSlug,r=e.questionId,a=e.questionTitle,o=e.code,s=e.lang,l=e.testcase,u=e.isTestMode,c=e.updateStatus,d=e.disableDebug;return f["__awaiter"](t,void 0,void 0,function(){var t;var n=this;return f["__generator"](this,function(e){this.setResult({status:y["a"].PD});t={question_id:r,lang:s,typed_code:o,test_mode:u};return[2,Object(b["b"])(i,a,t,c).pipe(Object(m["a"])(function(e){if("error"in e){n.setResult({error:e.error})}else{n.setResult(f["__assign"]({},e,{status:e.status,questionTitle:a,questionId:r,code:o,testcase:l,langKey:s,disableDebug:d}));n.updateSubmissionList({questionSlug:i,lang:s,submitResult:e})}}),Object(v["a"])(function(e){n.setResult({error:Object(k["a"])(e)});return Object(p["a"])({networkErrorStatus:e})}),Object(h["a"])(1),Object(g["a"])(this.destroy$)).toPromise()]})})};return t}t.prototype.componentWillUnmount=function(){this.destroy$.complete()};t.prototype.render=function(){var e=this.props,t=e.children,n=f["__rest"](e,["children"]);return t(f["__assign"]({submit:this.submit,setSubmitResult:this.setResult,cleanSubmitResult:this.cleanSubmitResult},n))};return t}(r.a.PureComponent);t["a"]=d;var S,E},pkpq:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"deleteComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"commentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"post"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:139}};n.loc.source={body:"mutation deleteComment($commentId: Int!) {\n  deleteComment(id: $commentId) {\n    ok\n    error\n    post {\n      id\n      status\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["deleteComment"]=o(n,"deleteComment")},qagx:function(e,t,n){"use strict";var i=n("D57K");var r=n("ERkP");var a=n.n(r);var o=n("SZui");var s=n("lXyA");var l=n.n(s);var u=l()(function e(){return new Promise(function(e,t){var n=document.createElement("script");n.type="text/javascript";n.src="//g.alicdn.com/sd/ncpc/nc.js?t="+Date.now();n.onload=function(){e(window.noCaptcha)};n.onerror=t;document.head.appendChild(n)})});var c=n("l1C2");var d=n("LJ7e");var f=n("6h7y");var p=Object(d["default"])("div",{target:"e5i1odf0"})({borderRadius:"3px",overflow:"hidden","> div":{height:"100%"}},"label:Container;");var m=Object(c["d"])({"body div .nc_wrapper":{boxSizing:"border-box",height:"100%",padding:"1px",background:f["dark8"],".nc_scale":{height:"100%",background:"transparent",".nc_bg":{width:0,borderRadius:"3px",background:"linear-gradient(to left, #4db6ac, #80cbc4)",zIndex:2,boxShadow:"3px 0 0 0 #4db6ac"},".nc_iconfont":{height:"100%",width:"50px",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",border:"none"},".scale_text":{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",'.nc-lang-cnt, .nc-lang-cnt[data-nc-lang="_startTEXT"]':{color:f["dark5"],background:"transparent",webkitTextFillColor:"initial"}}}}},"label:globalStyle;");n.d(t,"a",function(){return v});var v=function(t){i["__extends"](e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.elementId=""+Date.now();e.noCaptcha=null;return e}Object.defineProperty(e.prototype,"options",{get:function(){var t=this;var n=o["a"]?"nc_message_h5":"message";return{renderTo:"#"+this.elementId,appkey:"FFFF000000000179BB25",scene:n,customWidth:"100%",token:"FFFF000000000179BB25"+":"+Date.now()+":"+Math.random(),callback:function(e){t.props.onSuccess(i["__assign"]({},e,{scene:n}))}}},enumerable:true,configurable:true});e.prototype.componentDidMount=function(){var t=this;e.prepare().then(function(e){t.noCaptcha=e(t.options)})};e.prototype.componentWillUnmount=function(){if(this.noCaptcha){this.noCaptcha.destroy()}};e.prototype.render=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(c["b"],{styles:m}),a.a.createElement(p,{id:this.elementId}))};e.prepare=u;return e}(a.a.PureComponent)},"u+Aj":function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n("D57K");var i=n("ERkP");var a=n.n(i);var o=n("DuHN");var s=n("IJu9");var l=n("fQLH");var u=n("U3QC");var c=n("rzNM");var d=n("mhnT");var f=n("q/oC");var p=n("Y7lc");var m=n("w+fZ");var v=n("xml1");var h=n("9Xp4");var g=function(e){r["__extends"](t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;i.state={mutateReportLoading:false};i.report$=new l["a"];i.dispose$=new l["a"];i.postReport$=i.report$.pipe(Object(u["a"])(function(){return i.setState({mutateReportLoading:true})}),Object(c["a"])(function(e){var t=e.reasonId,n=e.reasonText;return Object(p["a"])({mutation:v["a"].flagSomething,variables:{data:r["__assign"]({resourceId:i.props.resourceId,resourceType:i.props.resourceType},t?{reasonId:t}:{},n?{description:n}:{})}}).pipe(Object(u["a"])(function(){return i.setState({mutateReportLoading:false})}),Object(u["a"])(function(e){var t=e.data,n=e.errors;if(n){o["a"].error("网络错误: "+n);Object(f["d"])(m["a"]).error("举报请求错误",{errors:n})}else if(t.flagSomething.error){o["a"].error("举报失败")}else if(t.flagSomething.ok){o["a"].success("举报成功");i.props.onOk&&i.props.onOk();i.props.onClose&&i.props.onClose()}}),Object(d["a"])(i.dispose$))}));i.onOk=function(e){i.report$.next(e)};return i}t.prototype.componentDidMount=function(){this.postReport$.subscribe()};t.prototype.componentWillUnmount=function(){this.report$.complete();this.dispose$.next();this.dispose$.complete()};t.prototype.render=function(){return a.a.createElement(h["a"],r["__assign"]({key:this.props.resourceId===null?"":this.props.resourceId},this.props,{onOk:this.onOk,mutateLoading:this.state.mutateReportLoading}))};t.defaultProps={title:"举报"};return t}(a.a.PureComponent)},uSQ0:function(e,t,n){e.exports={navbar:"navbar__3t7h","navbar-item":"navbar-item__tcCB",navbarItem:"navbar-item__tcCB",menu:"menu__AhCv",account:"account__2XW1",logo:"logo__2lZm"}},uc9o:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateCnComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mentionedUserSlugs"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"mentionedUserSlugs"},value:{kind:"Variable",name:{kind:"Name",value:"mentionedUserSlugs"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"post"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mentionedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nickName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEdited"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:461}};n.loc.source={body:"mutation updateCnComment(\n  $id: Int!\n  $content: String!\n  $mentionedUserSlugs: [String]\n) {\n  updateComment(\n    id: $id\n    content: $content\n    mentionedUserSlugs: $mentionedUserSlugs\n  ) {\n    ok\n    error\n    comment {\n      id\n      post {\n        id\n        content\n        mentionedUsers {\n          key\n          username\n          userSlug\n          nickName\n        }\n        comment {\n          id\n          isEdited\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e){return e.filter(function(e){if(e.kind!=="FragmentDefinition")return true;var t=e.name.value;if(i[t]){return false}else{i[t]=true;return true}})}function a(e,t){if(e.kind==="FragmentSpread"){t.add(e.name.value)}else if(e.kind==="VariableDefinition"){var n=e.type;if(n.kind==="NamedType"){t.add(n.name.value)}}if(e.selectionSet){e.selectionSet.selections.forEach(function(e){a(e,t)})}if(e.variableDefinitions){e.variableDefinitions.forEach(function(e){a(e,t)})}if(e.definitions){e.definitions.forEach(function(e){a(e,t)})}}var s={};(function e(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t);s[e.name.value]=t}})})();function l(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t){return i}}}function o(n,e){var i={kind:n.kind,definitions:[l(n,e)]};if(n.hasOwnProperty("loc")){i.loc=n.loc}var t=s[e]||new Set;var r=new Set;var a=new Set;t.forEach(function(e){a.add(e)});while(a.size>0){var o=a;a=new Set;o.forEach(function(e){if(!r.has(e)){r.add(e);var t=s[e]||new Set;t.forEach(function(e){a.add(e)})}})}r.forEach(function(e){var t=l(n,e);if(t){i.definitions.push(t)}});return i}e.exports=n;e.exports["updateCnComment"]=o(n,"updateCnComment")},ur9m:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n("D57K");var o=n("ERkP");var i=n.n(o);var r=n("fYnN");var s=n.n(r);var l=n("q/oC");var u=n("RUPt");var c=n("w+fZ");function d(e){var t=e.children;var n=a["__read"](Object(o["useState"])(!!s.a.get("csrftoken")),2),i=n[0],r=n[1];Object(o["useEffect"])(function(){if(!i){Object(u["a"])("/api/ensure_csrf").then(function(){r(true)}).catch(function(e){var t=Object(l["d"])(c["a"]);t.error(e,{fromEnsureCsrftoken:true});r(true)})}},[]);if(i){return t}return null}},wJz1:function(e,t,n){e.exports=n.p+"95762378db7032028ac429b8754e3a34.jpg"},x4OZ:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;(function(e){e[e["AC"]=10]="AC";e[e["WA"]=11]="WA";e[e["MLE"]=12]="MLE";e[e["OLE"]=13]="OLE";e[e["TLE"]=14]="TLE";e[e["RE"]=15]="RE";e[e["IE"]=16]="IE";e[e["CE"]=20]="CE";e[e["UE"]=21]="UE";e[e["TO"]=30]="TO";e[e["PD"]=31]="PD";e[e["JG"]=32]="JG";e[e["FN"]=33]="FN"})(i||(i={}))},xml1:function(e,t,n){"use strict";n.d(t,"b",function(){return u});n.d(t,"a",function(){return c});var i=n("hy2y");var r=n.n(i);var a=n("j4zt");var o=n.n(a);var s=n("YVEV");var l=n.n(s);var u={flagReasons:r.a};var c={flagSomething:o.a,flagSetContentStatus:l.a}},xvRP:function(e,t,n){e.exports=n.p+"3bf46b6c91367ab75cc431c04aa78877.svg"},yMer:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("fYnN");var r=n.n(i);function a(t){var n=new FormData;n.append("csrfmiddlewaretoken",r.a.get("csrftoken")||"");Object.keys(t).forEach(function(e){n.append(e,t[e])});return n}},ypvL:function(e,t,n){e.exports=n.p+"dc6e73ef17c81b95a36d4b461b0c2c82.png"},yu9t:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n.d(t,"b",function(){return o});var i=n("Hxrh");var r;(function(e){e["Input"]="Input"})(r||(r={}));var a=new Map;a.set(r.Input,i["a"]);function o(e){return a.get(e)}},z45D:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("6h7y");var r={color:i["redA4"],fontSize:"12px",lineHeight:"18px"}},zcDW:function(e,t,n){e.exports={popover:"popover__2z_q",message:"message__3f7W","control-area":"control-area__3fAZ",controlArea:"control-area__3fAZ",left:"left__1M7l",right:"right__3EYk","popover-target":"popover-target__2soF",popoverTarget:"popover-target__2soF"}}}]);